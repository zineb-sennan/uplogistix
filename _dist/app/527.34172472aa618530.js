"use strict";(self.webpackChunkuplogistix=self.webpackChunkuplogistix||[]).push([[527],{3527:(be,A,d)=>{d.r(A),d.d(A,{UtilisateursModule:()=>fe});var g=d(9808),f=d(3072),p=d(3623),e=d(1223),_=d(4741),b=d(6448),Z=d(513),U=d(1840),q=d(9324),y=d(9421),m=d(2340),v=d(520);let T=(()=>{class s{constructor(t){this.http=t}getAll(){return this.http.get(m.N.apiURL+"/utilisateurs/roles")}create(t){return this.http.post(m.N.apiURL+"/utilisateurs/roles",t)}update(t){return this.http.put(m.N.apiURL+"/utilisateurs/roles/"+t.id,t)}delete(t){return this.http.delete(m.N.apiURL+"/utilisateurs/roles/"+t)}getRole(t){return this.http.get(m.N.apiURL+"/utilisateurs/roles/"+t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(v.eN))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();var M=d(7651),a=d(3075);function P(s,n){if(1&s&&(e.TgZ(0,"div",73),e._uU(1),e._UZ(2,"button",74),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.hij(" ",t.message," ")}}function R(s,n){if(1&s){const t=e.EpF();e.TgZ(0,"tr")(1,"td",75),e._uU(2),e.qZA(),e.TgZ(3,"td",76),e._uU(4),e.qZA(),e.TgZ(5,"td",77),e._uU(6),e.qZA(),e.TgZ(7,"td",78),e._uU(8),e.qZA(),e.TgZ(9,"td",79),e._uU(10),e.qZA(),e.TgZ(11,"td",80),e._uU(12),e.qZA(),e.TgZ(13,"td",81)(14,"button",82),e.NdJ("click",function(){const o=e.CHM(t).$implicit,l=e.oxw();return l.singleUtilisateur.id=o.id,l.singleUtilisateur.locked_by=o.locked_by}),e._UZ(15,"i"),e.qZA(),e.TgZ(16,"button",83),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.oxw().getUtilisateur(o.id)}),e._UZ(17,"i",84),e.qZA()()()}if(2&s){const t=n.$implicit;e.xp6(2),e.AsE(" ",t.prenom," ",t.nom," "),e.xp6(2),e.hij(" ",t.cni," "),e.xp6(2),e.hij(" ",t.email," "),e.xp6(2),e.hij(" ",t.tel," "),e.xp6(2),e.hij(" ",t.ville," "),e.xp6(2),e.Oqu(0==t.role_id?"Toutes les permissions":t.role),e.xp6(2),e.Gre("btn blocker ",t.locked_by?"text-danger":"text-success",""),e.xp6(1),e.Gre("fa-solid ",t.locked_by?"fa-lock":"fa-lock-open","")}}function J(s,n){1&s&&(e.TgZ(0,"strong",57),e._uU(1,"*"),e.qZA())}function x(s,n){1&s&&(e.TgZ(0,"strong",57),e._uU(1,"*"),e.qZA())}function w(s,n){if(1&s&&(e.TgZ(0,"option",85),e._uU(1),e.qZA()),2&s){const t=n.$implicit;e.s9C("value",t.id),e.xp6(1),e.hij("",t.libelle," ")}}function N(s,n){1&s&&(e.TgZ(0,"strong",57),e._uU(1,"*"),e.qZA())}function k(s,n){1&s&&(e.TgZ(0,"strong",57),e._uU(1,"*"),e.qZA())}function S(s,n){if(1&s&&(e.TgZ(0,"option",85),e._uU(1),e.qZA()),2&s){const t=n.$implicit;e.s9C("value",t.id),e.xp6(1),e.hij("",t.nom," ")}}function Q(s,n){1&s&&(e.TgZ(0,"strong",57),e._uU(1,"*"),e.qZA())}function F(s,n){1&s&&(e.TgZ(0,"strong",57),e._uU(1,"*"),e.qZA())}function Y(s,n){if(1&s&&(e.TgZ(0,"option",85),e._uU(1),e.qZA()),2&s){const t=n.$implicit;e.s9C("value",t.id),e.xp6(1),e.hij("",t.nom," ")}}function E(s,n){1&s&&(e.TgZ(0,"strong",57),e._uU(1,"*"),e.qZA())}function O(s,n){if(1&s&&(e.TgZ(0,"option",85),e._uU(1),e.qZA()),2&s){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.nom)}}let G=(()=>{class s{constructor(t,i,r,o,l,c,h,C){this.securiteClass=t,this.globale=i,this.utilisateurService=r,this.paysService=o,this.regionsService=l,this.villesService=c,this.rolesService=h,this.tokenService=C,this.message=null,this.roles=[],this.utilisateurs=[],this.pays=[],this.regions=[],this.villes=[],this.singleUtilisateur={id:null,type_compte:null,role_id:null,nom:null,prenom:null,cni:null,email:null,tel:null,password:null,adresse:null,ville_id:null,region_id:null,pays_id:null,locked_by:null}}ngOnInit(){this.getAllUtilisateurs(),this.getAllPays(),this.getAllRoles()}clear(){this.singleUtilisateur={id:null,type_compte:null,role_id:null,nom:null,prenom:null,cni:null,email:null,tel:null,password:null,adresse:null,ville_id:null,region_id:null,pays_id:null,locked_by:null}}getAllPays(){this.paysService.getAll().subscribe(t=>this.pays=t,t=>{401==t.status&&this.securiteClass.refreshToken()&&this.getAllPays()})}getAllRoles(){this.rolesService.getAll().subscribe(t=>this.roles=t,t=>{401==t.status&&this.securiteClass.refreshToken()&&this.getAllRoles()})}getRegionsByPays(t){this.regionsService.regionsByPays(t).subscribe(i=>{this.regions=i,this.singleUtilisateur.pays_id=t},i=>{401==i.status&&this.securiteClass.refreshToken()&&this.getRegionsByPays(t)})}getVillesByRegion(t){this.villes=[],this.villesService.villesByRegion(t).subscribe(i=>{this.villes=i,this.singleUtilisateur.region_id=t},i=>{401==i.status&&this.securiteClass.refreshToken()&&this.getVillesByRegion(t)})}changePays(t){this.getRegionsByPays(t.target.value)}changeRegion(t){this.getVillesByRegion(t.target.value)}getAllUtilisateurs(){this.utilisateurService.getAll().subscribe(t=>{var i;const r=this.tokenService.payload(null!==(i=this.tokenService.getToken())&&void 0!==i?i:"");this.utilisateurs=t.filter(o=>o.id!=r.id)},t=>{401==t.status&&this.securiteClass.refreshToken()&&this.getAllUtilisateurs()})}getUtilisateur(t){this.message=null,this.utilisateurService.getUtilisateur(t).subscribe(i=>{this.singleUtilisateur=i,this.getRegionsByPays(i.pays_id),this.getVillesByRegion(i.region_id)},i=>{401==i.status&&this.securiteClass.refreshToken()&&this.getAllUtilisateurs()})}update(t){t.id?this.utilisateurService.update(t).subscribe(i=>{this.getAllUtilisateurs(),this.message="L'utilisateur est modifi\xe9 avec succ\xe8s !",this.globale.closeModal()},i=>{401==i.status&&this.securiteClass.refreshToken()&&this.update(t)}):this.utilisateurService.create(t).subscribe(i=>{this.getAllUtilisateurs(),this.message="L'utilisateur est ajout\xe9 avec succ\xe8s !",this.globale.closeModal()},i=>{401==i.status&&this.securiteClass.refreshToken()&&this.update(t)})}lock(){let t=!0;this.singleUtilisateur.locked_by&&(t=!1),this.utilisateurService.lock(t,this.singleUtilisateur.id).subscribe(i=>{this.getAllUtilisateurs(),this.message="L'utilisateur est bloqu\xe9 avec succ\xe8s !",this.singleUtilisateur.locked_by&&(this.message="L'utilisateur est d\xe9bloqu\xe9 avec succ\xe8s !"),this.globale.closeModal()},i=>{401==i.status&&this.securiteClass.refreshToken()&&this.lock()})}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(_.z),e.Y36(b.N),e.Y36(Z.y),e.Y36(U.K),e.Y36(q.E),e.Y36(y.i),e.Y36(T),e.Y36(M.B))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-globale"]],decls:163,vars:28,consts:[[1,"page-clients"],[1,"header-body","shadow-sm","p-3","mb-5","bg-white","rounded"],[1,"align-items-end"],[1,"header-pretitle"],[1,"header-title"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],["type","button","data-bs-toggle","modal","data-bs-target","#modal-edit",1,"btn","btn-outline-primary","mb-2","btn-ajouter",3,"click"],[1,"fa-solid","fa-plus"],["class","alert alert-success","role","alert",4,"ngIf"],[1,"table-responsive","row"],[1,"table","table-sm","table-nowrap","card-table"],[1,"list"],[4,"ngFor","ngForOf"],["id","modal-edit","tabindex","-1","role","dialog","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],["data-list","",1,"modal-card","card"],[1,"card-header"],["id","exampleModalCenterTitle",1,"card-header-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close","pb-0","mp-0"],[1,"card-body"],[3,"ngSubmit"],["utilisateurForm","ngForm"],["type","hidden","name","id","value","singleUtilisateur.id",3,"ngModel","ngModelChange"],[1,"titre","col-md-12","mb-3"],[1,"form-group","col-md-4"],["for","titre",1,"form-label"],["class","text-danger",4,"ngIf"],["name","type_compte","required","",1,"form-select","form-select-sm",3,"ngModel","ngModelChange"],["value","null","disabled",""],["value","Super administrateur"],["value","Op\xe9rateur"],[1,"form-label"],["name","role_id",1,"form-select","form-select-sm",3,"ngModel","ngModelChange"],["value","null","selected","","disabled",""],["value","0"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-4"],[1,"form-group"],["for","nom",1,"form-label"],["type","text","placeholder","Nom","name","nom",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["for","tel",1,"form-label"],["type","text","placeholder","tel","name","tel",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["name","region_id",1,"form-select","form-select-sm",3,"ngModel","change"],["for","prenom",1,"form-label"],["type","text","placeholder","Prenom","name","prenom",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["for","cni",1,"form-label"],["type","text","placeholder","CNI","name","cni",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["name","ville_id",1,"form-select","form-select-sm",3,"ngModel","ngModelChange"],["for","email",1,"form-label"],["type","email","placeholder","Email","name","email",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["for","pays_id",1,"form-label"],["name","pays_id",1,"form-select","form-select-sm",3,"ngModel","change"],["for","pwd",1,"form-label"],["rows","3","name","adresse",1,"form-control",3,"ngModel","ngModelChange"],[1,"text-danger"],["type","submit",1,"btn","btn-success","mb-2","float-right",3,"disabled"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary","float-right",2,"margin-right","5px"],["id","modal-delete","tabindex","-1","role","dialog","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-confirm"],[1,"modal-header","flex-column"],[1,"icon-box"],[1,"material-icons"],[1,"fa-solid","fa-x"],[1,"modal-title","w-100"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"close","btn-close"],[1,"modal-body"],[1,"fa-solid","fa-question"],[1,"modal-footer","justify-content-center"],["type","button","data-dismiss","modal","data-bs-dismiss","modal","aria-label","Close",1,"btn","btn-secondary"],["type","button",1,"btn","btn-danger",3,"click"],["role","alert",1,"alert","alert-success"],["type","button","data-bs-dismiss","alert","aria-label","Close",1,"btn-close","pb-0","mp-0"],[1,"nom_complet"],[1,"cni"],[1,"email"],[1,"tel"],[1,"ville"],[1,"role"],["width","75"],["type","button","data-bs-toggle","modal","data-bs-target","#modal-delete",3,"click"],["type","button","data-bs-toggle","modal","data-bs-target","#modal-edit",1,"btn","btn-operation",3,"click"],[1,"fa-solid","fa-pen"],[3,"value"]],template:function(t,i){if(1&t){const r=e.EpF();e.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"h6",3),e._uU(4," Administration "),e.qZA(),e.TgZ(5,"h2",4),e._uU(6," Gestion des utilisateurs "),e.qZA()()(),e.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"button",8),e.NdJ("click",function(){return i.clear()}),e._UZ(11,"i",9),e.qZA(),e._UZ(12,"br")(13,"br")(14,"br"),e.YNc(15,P,3,1,"div",10),e.TgZ(16,"div",11)(17,"table",12)(18,"thead")(19,"tr")(20,"th"),e._uU(21,"Nom complet"),e.qZA(),e.TgZ(22,"th"),e._uU(23,"CNI"),e.qZA(),e.TgZ(24,"th"),e._uU(25,"Email"),e.qZA(),e.TgZ(26,"th"),e._uU(27,"Tel"),e.qZA(),e.TgZ(28,"th"),e._uU(29,"Ville"),e.qZA(),e.TgZ(30,"th"),e._uU(31,"R\xf4le"),e.qZA(),e.TgZ(32,"th"),e._uU(33,"Options"),e.qZA()()(),e.TgZ(34,"tbody",13),e.YNc(35,R,18,13,"tr",14),e.qZA()()()()()(),e.TgZ(36,"div",15)(37,"div",16)(38,"div",17)(39,"div",18)(40,"div",19)(41,"h4",20),e._uU(42," Utilisateur "),e.qZA(),e._UZ(43,"button",21),e.qZA(),e.TgZ(44,"div",22)(45,"form",23,24),e.NdJ("ngSubmit",function(){e.CHM(r);const l=e.MAs(46);return i.update(l.value)}),e.TgZ(47,"div",6)(48,"input",25),e.NdJ("ngModelChange",function(l){return i.singleUtilisateur.id=l}),e.qZA(),e.TgZ(49,"div",6)(50,"div",26)(51,"h6",3),e._uU(52,"Utilisateur"),e.qZA(),e.TgZ(53,"h3",4),e._uU(54,"Permissions"),e.qZA(),e._UZ(55,"hr"),e.qZA(),e.TgZ(56,"div",27)(57,"label",28),e._uU(58," Type de compte "),e.YNc(59,J,2,0,"strong",29),e.qZA(),e.TgZ(60,"select",30),e.NdJ("ngModelChange",function(l){return i.singleUtilisateur.type_compte=l}),e.TgZ(61,"option",31),e._uU(62,"Veuillez choisir..."),e.qZA(),e.TgZ(63,"option",32),e._uU(64,"Super administrateur"),e.qZA(),e.TgZ(65,"option",33),e._uU(66,"Op\xe9rateur"),e.qZA()()(),e.TgZ(67,"div",27)(68,"label",34),e._uU(69," R\xf4le "),e.YNc(70,x,2,0,"strong",29),e.qZA(),e.TgZ(71,"select",35),e.NdJ("ngModelChange",function(l){return i.singleUtilisateur.role_id=l}),e.TgZ(72,"option",36),e._uU(73,"Veuillez choisir..."),e.qZA(),e.TgZ(74,"option",37),e._uU(75,"Toutes les permissions"),e.qZA(),e.YNc(76,w,2,2,"option",38),e.qZA()()(),e.TgZ(77,"div",6)(78,"div",26)(79,"h6",3),e._uU(80,"Utilisateur"),e.qZA(),e.TgZ(81,"h3",4),e._uU(82,"Informations"),e.qZA(),e._UZ(83,"hr"),e.qZA(),e.TgZ(84,"div",39)(85,"div",40)(86,"label",41),e._uU(87," Nom "),e.YNc(88,N,2,0,"strong",29),e.qZA(),e.TgZ(89,"input",42),e.NdJ("ngModelChange",function(l){return i.singleUtilisateur.nom=l}),e.qZA()(),e.TgZ(90,"div",40)(91,"label",43),e._uU(92," T\xe9l\xe9phone "),e.YNc(93,k,2,0,"strong",29),e.qZA(),e.TgZ(94,"input",44),e.NdJ("ngModelChange",function(l){return i.singleUtilisateur.tel=l}),e.qZA()(),e.TgZ(95,"div",40)(96,"label",34),e._uU(97,"R\xe9gion"),e.qZA(),e.TgZ(98,"select",45),e.NdJ("change",function(l){return i.changeRegion(l)}),e.TgZ(99,"option",36),e._uU(100,"Veuillez choisir..."),e.qZA(),e.YNc(101,S,2,2,"option",38),e.qZA()()(),e.TgZ(102,"div",39)(103,"div",40)(104,"label",46),e._uU(105," Pr\xe9nom "),e.YNc(106,Q,2,0,"strong",29),e.qZA(),e.TgZ(107,"input",47),e.NdJ("ngModelChange",function(l){return i.singleUtilisateur.prenom=l}),e.qZA()(),e.TgZ(108,"div",40)(109,"label",48),e._uU(110,"CNI"),e.qZA(),e.TgZ(111,"input",49),e.NdJ("ngModelChange",function(l){return i.singleUtilisateur.cni=l}),e.qZA()(),e.TgZ(112,"div",40)(113,"label",34),e._uU(114," Ville "),e.YNc(115,F,2,0,"strong",29),e.qZA(),e.TgZ(116,"select",50),e.NdJ("ngModelChange",function(l){return i.singleUtilisateur.ville_id=l}),e.TgZ(117,"option",36),e._uU(118,"Veuillez choisir..."),e.qZA(),e.YNc(119,Y,2,2,"option",38),e.qZA()()(),e.TgZ(120,"div",39)(121,"div",40)(122,"label",51),e._uU(123," Email "),e.YNc(124,E,2,0,"strong",29),e.qZA(),e.TgZ(125,"input",52),e.NdJ("ngModelChange",function(l){return i.singleUtilisateur.email=l}),e.qZA()(),e.TgZ(126,"div",40)(127,"label",53),e._uU(128,"Pays"),e.qZA(),e.TgZ(129,"select",54),e.NdJ("change",function(l){return i.changePays(l)}),e.TgZ(130,"option",31),e._uU(131,"Veuillez choisir..."),e.qZA(),e.YNc(132,O,2,2,"option",38),e.qZA()()(),e.TgZ(133,"div",40)(134,"label",55),e._uU(135,"Adresse"),e.qZA(),e.TgZ(136,"textarea",56),e.NdJ("ngModelChange",function(l){return i.singleUtilisateur.adresse=l}),e.qZA()()(),e.TgZ(137,"div",7)(138,"small",57),e._uU(139,"*: Ces champs sont obligatoires."),e.qZA(),e.TgZ(140,"button",58),e._uU(141,"Enregister"),e.qZA(),e.TgZ(142,"button",59),e._uU(143,"Annuler"),e.qZA()()()()()()()()(),e.TgZ(144,"div",60)(145,"div",61)(146,"div",17)(147,"div",62)(148,"div",63)(149,"i",64),e._UZ(150,"i",65),e.qZA()(),e.TgZ(151,"h4",66),e._uU(152,"\xcates-vous s\xfbr?"),e.qZA(),e._UZ(153,"button",67),e.qZA(),e.TgZ(154,"div",68)(155,"p"),e._uU(156),e._UZ(157,"i",69),e.qZA()(),e.TgZ(158,"div",70)(159,"button",71),e._uU(160,"Annuler"),e.qZA(),e.TgZ(161,"button",72),e.NdJ("click",function(){return i.lock()}),e._uU(162),e.qZA()()()()()()}if(2&t){const r=e.MAs(46);e.xp6(15),e.Q6J("ngIf",i.message),e.xp6(20),e.Q6J("ngForOf",i.utilisateurs),e.xp6(13),e.Q6J("ngModel",i.singleUtilisateur.id),e.xp6(11),e.Q6J("ngIf",!i.singleUtilisateur.type_compte),e.xp6(1),e.Q6J("ngModel",i.singleUtilisateur.type_compte),e.xp6(10),e.Q6J("ngIf",!i.singleUtilisateur.role_id),e.xp6(1),e.Q6J("ngModel",i.singleUtilisateur.role_id),e.xp6(5),e.Q6J("ngForOf",i.roles),e.xp6(12),e.Q6J("ngIf",!i.singleUtilisateur.nom),e.xp6(1),e.Q6J("ngModel",i.singleUtilisateur.nom),e.xp6(4),e.Q6J("ngIf",!i.singleUtilisateur.tel),e.xp6(1),e.Q6J("ngModel",i.singleUtilisateur.tel),e.xp6(4),e.Q6J("ngModel",i.singleUtilisateur.region_id),e.xp6(3),e.Q6J("ngForOf",i.regions),e.xp6(5),e.Q6J("ngIf",!i.singleUtilisateur.prenom),e.xp6(1),e.Q6J("ngModel",i.singleUtilisateur.prenom),e.xp6(4),e.Q6J("ngModel",i.singleUtilisateur.cni),e.xp6(4),e.Q6J("ngIf",!i.singleUtilisateur.ville_id),e.xp6(1),e.Q6J("ngModel",i.singleUtilisateur.ville_id),e.xp6(3),e.Q6J("ngForOf",i.villes),e.xp6(5),e.Q6J("ngIf",!i.singleUtilisateur.email),e.xp6(1),e.Q6J("ngModel",i.singleUtilisateur.email),e.xp6(4),e.Q6J("ngModel",i.singleUtilisateur.pays_id),e.xp6(3),e.Q6J("ngForOf",i.pays),e.xp6(4),e.Q6J("ngModel",i.singleUtilisateur.adresse),e.xp6(4),e.Q6J("disabled",!r.valid),e.xp6(16),e.hij("Voulez-vous vraiment ",i.singleUtilisateur.locked_by?"d\xe9bloquer":"bloquer"," ce conducteur "),e.xp6(6),e.Oqu(i.singleUtilisateur.locked_by?"d\xe9bloquer":"bloquer")}},directives:[g.O5,g.sg,a._Y,a.JL,a.F,a.Fj,a.JJ,a.On,a.EJ,a.Q7,a.YN,a.Kr],styles:[".modal-dialog[_ngcontent-%COMP%]{max-width:850px}"]}),s})();var u=d(8259);function I(s,n){if(1&s&&(e.TgZ(0,"div",34),e._uU(1),e._UZ(2,"button",35),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.hij(" ",t.messageSuccess," ")}}function L(s,n){1&s&&(e.TgZ(0,"strong",20),e._uU(1,"*"),e.qZA())}function j(s,n){1&s&&(e.TgZ(0,"strong",20),e._uU(1,"*"),e.qZA())}function B(s,n){1&s&&(e.TgZ(0,"strong",20),e._uU(1,"*"),e.qZA())}function z(s,n){if(1&s&&(e.TgZ(0,"div",36),e._uU(1),e._UZ(2,"button",35),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.hij(" ",t.messageError," ")}}let V=(()=>{class s{constructor(t,i){this.securiteClass=t,this.utilisateurService=i,this.password={oldpassword:null,newpassword:null,confirmpassword:null}}ngOnInit(){}changementPwd(t){4==u(".valid").length?t.newpassword==t.confirmpassword?this.utilisateurService.changePassword(t).subscribe(i=>{this.messageSuccess="Le mot de passe est modifi\xe9 avec succ\xe8s !",this.securiteClass.logout()},i=>{403==i.status?this.messageError="Le mot de passe actuel est incorrect !":401==i.status&&this.securiteClass.refreshToken()&&this.changementPwd(t)}):this.messageError="La confirmation de mot de passe est diff\xe9rente de mot de nouveau mot de passe !":this.messageError="Le mot de passe doit contenir, une lettre, une lettre majuscule, un num\xe9ro, 8 caract\xe8res."}validationPWD(t){var i=t.target.value;u("#pswd_info").removeClass("d-none"),i.length<8?u("#length").removeClass("valid").addClass("invalid"):u("#length").removeClass("invalid").addClass("valid"),i.match(/[A-z]/)?u("#letter").removeClass("invalid").addClass("valid"):u("#letter").removeClass("valid").addClass("invalid"),i.match(/[A-Z]/)?u("#capital").removeClass("invalid").addClass("valid"):u("#capital").removeClass("valid").addClass("invalid"),i.match(/\d/)?u("#number").removeClass("invalid").addClass("valid"):u("#number").removeClass("valid").addClass("invalid")}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(_.z),e.Y36(Z.y))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-changement-pwd"]],decls:78,vars:9,consts:[[1,"header-body","shadow-sm","p-3","mb-5","bg-white","rounded"],[1,"align-items-end"],[1,"header-pretitle"],[1,"header-title"],[1,"container"],[1,"row"],[1,"col-md-12"],[1,"row","justify-content-between","align-items-center","mb-5"],[1,"text-muted","mb-md-0"],["class","alert alert-success mt-5","role","alert",4,"ngIf"],[1,"mb-4","shadow","p-4","mb-5","bg-white","rounded","col-md-8",3,"ngSubmit"],["passwordForm","ngForm"],[1,"form-group"],["for","pwd-actuel"],["class","text-danger",4,"ngIf"],["type","password","id","pwd-actuel","placeholder","Mot de passe actuel","name","oldpassword","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","nouveau-pwd"],["type","password","id","nouveau-pwd","placeholder","Nouveau mot de passe","name","newpassword","required","",1,"form-control",3,"ngModel","ngModelChange","keyup"],["for","confirmation-pwd"],["type","password","id","confirmation-pwd","placeholder","Confirmation de nouveau mot de passe","name","confirmpassword","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"text-danger"],["type","submit",1,"btn","btn-success","mb-2","float-right","btn-up-pwd",3,"disabled"],["id","pswd_info",1,"d-none"],["id","letter",1,"invalid"],["id","capital",1,"invalid"],["id","number",1,"invalid"],["id","length",1,"invalid"],["class","alert alert-danger alert-dismissible fade show mt-7","role","alert",4,"ngIf"],[1,"col-md-4"],[1,"card","bg-light","border","ms-md-4"],[1,"card-body"],[1,"mb-2"],[1,"small","text-muted","mb-2"],[1,"small","text-muted","ps-4","mb-0"],["role","alert",1,"alert","alert-success","mt-5"],["type","button","data-bs-dismiss","alert","aria-label","Close",1,"btn-close","pb-0","mp-0"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show","mt-7"]],template:function(t,i){if(1&t){const r=e.EpF();e.TgZ(0,"section")(1,"div",0)(2,"div",1)(3,"h6",2),e._uU(4," Utilistaeur "),e.qZA(),e.TgZ(5,"h2",3),e._uU(6," R\xe9initialisation de mot de passe "),e.qZA()()(),e.TgZ(7,"div",4)(8,"div",5)(9,"div",6)(10,"div",7)(11,"p",8),e._uU(12," Veuillez suivre les indications \xe0 droite pour modifier votre mot de passe. "),e.qZA(),e.YNc(13,I,3,1,"div",9),e.qZA(),e.TgZ(14,"div",5)(15,"form",10,11),e.NdJ("ngSubmit",function(){e.CHM(r);const l=e.MAs(16);return i.changementPwd(l.value)}),e.TgZ(17,"div",12)(18,"label",13),e._uU(19," Mot de passe actuel "),e.YNc(20,L,2,0,"strong",14),e.qZA(),e.TgZ(21,"input",15),e.NdJ("ngModelChange",function(l){return i.password.oldpassword=l}),e.qZA()(),e.TgZ(22,"div",12)(23,"label",16),e._uU(24," Nouveau mot de passe "),e.YNc(25,j,2,0,"strong",14),e.qZA(),e.TgZ(26,"input",17),e.NdJ("ngModelChange",function(l){return i.password.newpassword=l})("keyup",function(l){return i.validationPWD(l)}),e.qZA()(),e.TgZ(27,"div",12)(28,"label",18),e._uU(29," Confirmation de nouveau mot de passe "),e.YNc(30,B,2,0,"strong",14),e.qZA(),e.TgZ(31,"input",19),e.NdJ("ngModelChange",function(l){return i.password.confirmpassword=l}),e.qZA()(),e.TgZ(32,"div",6)(33,"small",20),e._uU(34,"*: Ces champs sont obligatoires."),e.qZA(),e.TgZ(35,"button",21),e._uU(36,"Enregister"),e.qZA()(),e.TgZ(37,"div",22),e._UZ(38,"br")(39,"br"),e.TgZ(40,"h4"),e._uU(41,"Le mot de passe doit contenir:"),e.qZA(),e.TgZ(42,"ul")(43,"li",23),e._uU(44,"Au moins "),e.TgZ(45,"strong"),e._uU(46,"une lettre"),e.qZA()(),e.TgZ(47,"li",24),e._uU(48,"Au moins "),e.TgZ(49,"strong"),e._uU(50,"une lettre majuscule"),e.qZA()(),e.TgZ(51,"li",25),e._uU(52,"Au moins "),e.TgZ(53,"strong"),e._uU(54,"un num\xe9ro"),e.qZA()(),e.TgZ(55,"li",26),e._uU(56,"Minimum "),e.TgZ(57,"strong"),e._uU(58,"8 caract\xe8res"),e.qZA()()()(),e.YNc(59,z,3,1,"div",27),e.qZA(),e.TgZ(60,"div",28)(61,"div",29)(62,"div",30)(63,"p",31),e._uU(64,"Mot de passe obligatoire"),e.qZA(),e.TgZ(65,"p",32),e._uU(66," Pour cr\xe9er un nouveau mot de passe, vous devez remplir toutes les conditions suivantes\xa0: "),e.qZA(),e.TgZ(67,"ul",33)(68,"li"),e._uU(69,"Minimum 8 caract\xe8res"),e.qZA(),e.TgZ(70,"li"),e._uU(71,"Au moins une lettre"),e.qZA(),e.TgZ(72,"li"),e._uU(73,"Au moins une lettre majuscule"),e.qZA(),e.TgZ(74,"li"),e._uU(75,"Au moins un num\xe9ro"),e.qZA(),e.TgZ(76,"li"),e._uU(77,"Ne peut pas \xeatre le m\xeame qu'un mot de passe pr\xe9c\xe9dent"),e.qZA()()()()()()()()()()}if(2&t){const r=e.MAs(16);e.xp6(13),e.Q6J("ngIf",i.messageSuccess),e.xp6(7),e.Q6J("ngIf",!i.password.oldpassword),e.xp6(1),e.Q6J("ngModel",i.password.oldpassword),e.xp6(4),e.Q6J("ngIf",!i.password.newpassword),e.xp6(1),e.Q6J("ngModel",i.password.newpassword),e.xp6(4),e.Q6J("ngIf",!i.password.confirmpassword),e.xp6(1),e.Q6J("ngModel",i.password.confirmpassword),e.xp6(4),e.Q6J("disabled",!r.valid),e.xp6(24),e.Q6J("ngIf",i.messageError)}},directives:[g.O5,a._Y,a.JL,a.F,a.Fj,a.Q7,a.JJ,a.On],styles:["form[_ngcontent-%COMP%]{display:block;margin:auto}"]}),s})();const $=function(s){return["/utilisateurs/droits-acces/roles/",s,"permissions"]};function H(s,n){if(1&s){const t=e.EpF();e.TgZ(0,"tr")(1,"td",46),e._uU(2),e.qZA(),e.TgZ(3,"td",47),e._uU(4),e.qZA(),e.TgZ(5,"td",48),e._uU(6),e.qZA(),e.TgZ(7,"td",49)(8,"a",50),e._UZ(9,"i",51),e.qZA(),e._uU(10,"\xa0 "),e.TgZ(11,"button",52),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.oxw().getRole(o.id)}),e._UZ(12,"i",53),e.qZA()()()}if(2&s){const t=n.$implicit;e.xp6(2),e.hij(" ",t.libelle," "),e.xp6(2),e.Oqu(t.description),e.xp6(2),e.Oqu(t.creer_par),e.xp6(2),e.Q6J("routerLink",e.VKq(4,$,t.id))}}function D(s,n){1&s&&(e.TgZ(0,"strong",31),e._uU(1,"*"),e.qZA())}let K=(()=>{class s{constructor(t,i,r){this.securiteClass=t,this.globale=i,this.rolesService=r,this.roles=[],this.message="",this.singleRole={id:null,libelle:null,description:null}}ngOnInit(){this.getAllRoles()}getAllRoles(){this.rolesService.getAll().subscribe(t=>this.roles=t,t=>{401==t.status&&this.securiteClass.refreshToken()&&this.getAllRoles()})}update(t){this.rolesService.create(t).subscribe(i=>{this.getAllRoles(),this.message="Le r\xf4le est ajout\xe9 avec succ\xe8s !",this.globale.closeModal()},i=>{401==i.status&&this.securiteClass.refreshToken()&&this.update(t)})}delete(){this.rolesService.delete(this.singleRole.id).subscribe(t=>{this.getAllRoles(),this.message="Le r\xf4le est supprim\xe9 avec succ\xe8s !",this.globale.closeModal()},t=>{401==t.status&&this.securiteClass.refreshToken()&&this.delete()})}getRole(t){this.message="",this.rolesService.getRole(t).subscribe(i=>this.singleRole=i,i=>{401==i.status&&this.securiteClass.refreshToken()&&this.getRole(t)})}clear(){this.singleRole={id:null,libelle:null,description:null}}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(_.z),e.Y36(b.N),e.Y36(T))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-roles"]],decls:75,vars:5,consts:[[1,"header-body","shadow-sm","p-3","mb-5","bg-white","rounded"],[1,"align-items-end"],[1,"header-pretitle"],[1,"header-title"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],["data-bs-toggle","modal","data-bs-target","#modal-edit",1,"btn","btn-outline-primary","btn-ajouter",3,"click"],[1,"fa-solid","fa-plus"],[1,"table-responsive"],[1,"table","table-sm","table-nowrap","card-table"],[1,"text-center"],[1,"list"],[4,"ngFor","ngForOf"],["id","modal-edit","tabindex","-1","role","dialog","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],["data-list","",1,"modal-card","card"],[1,"card-header"],["id","exampleModalCenterTitle",1,"card-header-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close","pb-0","mp-0"],[1,"card-body"],[3,"ngSubmit"],["roleForm","ngForm"],[1,"frm-region"],[1,"form-group"],["for","nom",1,"form-label"],["class","text-danger",4,"ngIf"],["type","text","placeholder","Libelle","name","libelle","required","",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["for","logo",1,"form-label"],["placeholder","Description","name","description",1,"form-control",3,"ngModel","ngModelChange"],[1,"text-danger"],["type","submit",1,"btn","btn-success","mb-2","float-right",3,"disabled"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary","float-right",2,"margin-right","5px"],["id","modal-delete","tabindex","-1","role","dialog","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-confirm"],[1,"modal-header","flex-column"],[1,"icon-box"],[1,"material-icons"],[1,"fa-solid","fa-x"],[1,"modal-title","w-100"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"close","btn-close"],[1,"modal-body"],[1,"modal-footer","justify-content-center"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],["type","button",1,"btn","btn-danger",3,"click"],[1,"libelle"],[1,"description"],[1,"created_by"],["width","100"],[1,"btn","btn-operation",3,"routerLink"],[1,"fa-solid","fa-pen"],["type","button","data-bs-toggle","modal","data-bs-target","#modal-delete",1,"btn","btn-operation",3,"click"],["_ngcontent-hhv-c59","",1,"fa-solid","fa-trash"]],template:function(t,i){if(1&t){const r=e.EpF();e.TgZ(0,"section")(1,"div",0)(2,"div",1)(3,"h6",2),e._uU(4," Administration "),e.qZA(),e.TgZ(5,"h2",3),e._uU(6," Droits d'acc\xe9s "),e.qZA()()(),e.TgZ(7,"div",4)(8,"div",5)(9,"div",6)(10,"button",7),e.NdJ("click",function(){return i.clear()}),e._UZ(11,"i",8),e.qZA(),e._UZ(12,"br")(13,"br")(14,"br"),e.TgZ(15,"div",9)(16,"table",10)(17,"thead")(18,"tr")(19,"th"),e._uU(20,"Libelle"),e.qZA(),e.TgZ(21,"th"),e._uU(22,"Description"),e.qZA(),e.TgZ(23,"th"),e._uU(24,"Cr\xe9e par"),e.qZA(),e.TgZ(25,"th",11),e._uU(26,"Options"),e.qZA()()(),e.TgZ(27,"tbody",12),e.YNc(28,H,13,6,"tr",13),e.qZA()()()()()(),e.TgZ(29,"div",14)(30,"div",15)(31,"div",16)(32,"div",17)(33,"div",18)(34,"h4",19),e._uU(35," R\xf4le "),e.qZA(),e._UZ(36,"button",20),e.qZA(),e.TgZ(37,"div",21)(38,"form",22,23),e.NdJ("ngSubmit",function(){e.CHM(r);const l=e.MAs(39);return i.update(l.value)}),e.TgZ(40,"div",24)(41,"div",25)(42,"label",26),e._uU(43," Libelle "),e.YNc(44,D,2,0,"strong",27),e.qZA(),e.TgZ(45,"input",28),e.NdJ("ngModelChange",function(l){return i.singleRole.libelle=l}),e.qZA()(),e.TgZ(46,"div",25)(47,"label",29),e._uU(48,"Description"),e.qZA(),e.TgZ(49,"textarea",30),e.NdJ("ngModelChange",function(l){return i.singleRole.description=l}),e.qZA()()(),e.TgZ(50,"div",6)(51,"small",31),e._uU(52,"*: Ce champ est obligatoire."),e.qZA(),e.TgZ(53,"button",32),e._uU(54,"Enregister"),e.qZA(),e.TgZ(55,"button",33),e._uU(56,"Annuler"),e.qZA()()()()()()()(),e.TgZ(57,"div",34)(58,"div",35)(59,"div",16)(60,"div",36)(61,"div",37)(62,"i",38),e._UZ(63,"i",39),e.qZA()(),e.TgZ(64,"h4",40),e._uU(65,"\xcates-vous s\xfbr?"),e.qZA(),e._UZ(66,"button",41),e.qZA(),e.TgZ(67,"div",42)(68,"p"),e._uU(69,"Voulez-vous vraiment supprimer ces enregistrements\xa0? Ce processus ne peut pas \xeatre annul\xe9."),e.qZA()(),e.TgZ(70,"div",43)(71,"button",44),e._uU(72,"Cancel"),e.qZA(),e.TgZ(73,"button",45),e.NdJ("click",function(){return i.delete()}),e._uU(74,"Delete"),e.qZA()()()()()()}if(2&t){const r=e.MAs(39);e.xp6(28),e.Q6J("ngForOf",i.roles),e.xp6(16),e.Q6J("ngIf",!i.singleRole.libelle),e.xp6(1),e.Q6J("ngModel",i.singleRole.libelle),e.xp6(4),e.Q6J("ngModel",i.singleRole.description),e.xp6(4),e.Q6J("disabled",!r.valid)}},directives:[g.sg,f.yS,a._Y,a.JL,a.F,g.O5,a.Fj,a.Q7,a.JJ,a.On],styles:[".btn-ajouter[_ngcontent-%COMP%]{width:45px;height:45px}"]}),s})(),X=(()=>{class s{constructor(t){this.http=t}getAllRolePermissions(t){return this.http.get(m.N.apiURL+"/utilisateurs/roles/"+t+"/permissions")}create(t){return this.http.post(m.N.apiURL+"/utilisateurs/role-permissions",t)}update(t){return this.http.put(m.N.apiURL+"/utilisateurs/roles-permissions",t)}delete(t,i){return this.http.delete(m.N.apiURL+"/utilisateurs/roles/"+t+"/permissions/"+i)}getRolePermission(t,i){return this.http.get(m.N.apiURL+"/utilisateurs/roles/"+t+"/permissions/"+i)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(v.eN))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),W=(()=>{class s{constructor(t){this.http=t}getAll(){return this.http.get(m.N.apiURL+"/utilisateurs/permissions")}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(v.eN))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();var ee=d(8368);function te(s,n){1&s&&(e.TgZ(0,"strong",16),e._uU(1,"*"),e.qZA())}function ie(s,n){if(1&s){const t=e.EpF();e.TgZ(0,"li",26)(1,"span"),e._uU(2),e.qZA(),e.TgZ(3,"div",39)(4,"input",56),e.NdJ("change",function(r){const l=e.CHM(t).$implicit;return e.oxw().canEditChange(r,l)}),e.qZA(),e.TgZ(5,"input",57),e.NdJ("change",function(r){const l=e.CHM(t).$implicit;return e.oxw().canDeleteChange(r,l)}),e.qZA(),e.TgZ(6,"button",58),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.oxw().singleRolePermission.permission_id=o.permission_id}),e._UZ(7,"i",59),e.qZA()()()}if(2&s){const t=n.$implicit;e.xp6(2),e.Oqu(t.permission),e.xp6(2),e.Q6J("checked",t.can_edit),e.xp6(1),e.Q6J("checked",t.can_delete)}}function se(s,n){if(1&s){const t=e.EpF();e.TgZ(0,"li",60)(1,"span"),e._uU(2),e.qZA(),e.TgZ(3,"div",39),e._UZ(4,"input",61),e.TgZ(5,"input",62),e.NdJ("click",function(r){const l=e.CHM(t).index;return e.oxw().checkConsulter(r,l)}),e.qZA(),e.TgZ(6,"input",62),e.NdJ("click",function(r){const l=e.CHM(t).index;return e.oxw().checkConsulter(r,l)}),e.qZA()()()}if(2&s){const t=n.$implicit,i=n.index;e.s9C("id",t.id),e.xp6(2),e.Oqu(t.libelle),e.xp6(2),e.Gre("form-check-input can_consulter_",i," mr"),e.xp6(1),e.Gre("form-check-input can_edit_",i," ml"),e.xp6(1),e.Gre("form-check-input can_delete_",i," ml")}}let le=(()=>{class s{constructor(t,i,r,o,l,c,h,C){this.securiteClass=t,this.globale=i,this.rolesService=r,this.rolePermissionsService=o,this.activatedRoute=l,this.location=c,this.permissionsService=h,this.authService=C,this.role_id=-1,this.permissions=[],this.rolePermissions=[],this.singleRole={id:null,libelle:null,description:null},this.singleRolePermission={id:null,role_id:null,permission_id:null,can_edit:null,can_delete:null}}ngOnInit(){this.activatedRoute.params.subscribe(t=>{this.getRole(t.role_id)})}getRole(t){this.rolesService.getRole(t).subscribe(i=>{this.singleRole=i,this.getAllPermissions()},i=>{401==i.status&&this.securiteClass.refreshToken()&&this.getRole(t)})}updateRole(t){this.rolesService.update(t).subscribe(i=>{},i=>{401==i.status&&this.securiteClass.refreshToken()&&this.updateRole(t)})}fermer(){this.location.back()}getAllRolePermissions(t){this.rolePermissionsService.getAllRolePermissions(t).subscribe(i=>{this.rolePermissions=i,this.filterPermissions()},i=>{401==i.status&&this.securiteClass.refreshToken()&&this.getAllRolePermissions(t)})}getRolePermission(t,i){this.rolePermissionsService.getRolePermission(t,i).subscribe(r=>this.singleRolePermission=r,r=>{401==r.status&&this.securiteClass.refreshToken()&&this.getRolePermission(t,i)})}deleteRolePermission(t,i){this.rolePermissionsService.delete(t,i).subscribe(r=>{this.getAllRolePermissions(t),this.getAllPermissions(),this.globale.closeModal()},r=>{401==r.status&&this.securiteClass.refreshToken()&&this.deleteRolePermission(t,i)})}getAllPermissions(){this.permissionsService.getAll().subscribe(t=>{this.permissions=t,this.getAllRolePermissions(this.singleRole.id)},t=>{401==t.status&&this.securiteClass.refreshToken()&&this.getAllPermissions()})}createRolePermissions(t){this.rolePermissionsService.create(t).subscribe(i=>{this.getAllRolePermissions(t.role_id)},i=>{401==i.status&&this.securiteClass.refreshToken()&&this.createRolePermissions(t)})}editeRolePermissions(t){this.rolePermissionsService.update(t).subscribe(i=>{this.getAllRolePermissions(t.role_id)},i=>{401==i.status&&this.securiteClass.refreshToken()&&this.editeRolePermissions(t)})}addRolePermossion(){const t=this;u(".infos-permission").each(function(i){const r={role_id:t.singleRole.id,permission_id:Number(u(this).attr("id")),can_edit:u(".can_edit_"+i).is(":checked"),can_delete:u(".can_delete_"+i).is(":checked")};(r.can_edit||r.can_delete||u(".can_consulter_"+i).is(":checked"))&&t.createRolePermissions(r)}),this.globale.closeModal()}filterPermissions(){this.permissions=this.permissions.filter(t=>!this.rolePermissions.find(({permission_id:i})=>i==t.id))}canEditChange(t,i){this.editeRolePermissions({role_id:i.role_id,permission_id:i.permission_id,can_edit:t.currentTarget.checked,can_delete:i.can_delete})}canDeleteChange(t,i){this.editeRolePermissions({role_id:i.role_id,permission_id:i.permission_id,can_edit:i.can_edit,can_delete:t.currentTarget.checked})}checkConsulter(t,i){t.currentTarget.checked&&u(".can_consulter_"+i).prop("checked",!0)}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(_.z),e.Y36(b.N),e.Y36(T),e.Y36(X),e.Y36(f.gz),e.Y36(g.Ye),e.Y36(W),e.Y36(ee.e))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-role-permissions"]],decls:93,vars:7,consts:[[1,"header-body","shadow-sm","p-3","mb-5","bg-white","rounded"],[1,"align-items-end"],[1,"header-pretitle"],[1,"header-title"],[1,"container-fluid"],[1,"row"],[1,"mb-4","shadow","p-3","mb-5","bg-white","rounded","frm-client",3,"ngSubmit"],["roleForm","ngForm"],["type","hidden","name","id","value","singleRole.id",3,"ngModel","ngModelChange"],[1,"form-group"],["for","nom",1,"form-label"],["class","text-danger",4,"ngIf"],["type","text","placeholder","Libelle","name","libelle","required","",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["for","logo",1,"form-label"],["placeholder","Description","name","description",1,"form-control",3,"ngModel","ngModelChange"],[1,"mt-4","mb-4"],[1,"text-danger"],["type","submit",1,"btn","w-10","btn-float","btn-primary",3,"disabled"],["type","button",1,"btn","btn-secondary","w-10","btn-float",3,"click"],[1,"col-md-12","shadow","p-3","mb-5","bg-white","rounded"],[1,"header","md-5"],[1,"header-body"],[1,"header-subtitle"],["data-bs-toggle","modal","data-bs-target","#modal-edit",1,"btn","btn-sm","btn-outline-primary","float-right","align-middle",2,"width","60px"],[1,"fa-solid","fa-plus"],[1,"list-group"],[1,"list-group-item"],[1,"text-primary"],[1,"float-right","align-middle","d-flex",2,"margin-right","40px"],[1,"text-primary",2,"margin-right","12px"],["class","list-group-item",4,"ngFor","ngForOf"],["id","modal-edit","tabindex","-1","role","dialog","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],["data-list","",1,"modal-card","card"],[1,"card-header"],["id","exampleModalCenterTitle",1,"card-header-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close","pb-0","mp-0"],[1,"card-body"],[1,"float-right","align-middle","d-flex"],["class","list-group-item infos-permission",3,"id",4,"ngFor","ngForOf"],[1,"col-md-12"],["type","button",1,"btn","btn-primary","mb-2","mt-4","float-right",3,"click"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary","mb-2","mt-4","float-right",2,"margin-right","5px"],["id","modal-delete","tabindex","-1","role","dialog","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-confirm"],[1,"modal-header","flex-column"],[1,"icon-box"],[1,"material-icons"],[1,"fa-solid","fa-x"],[1,"modal-title","w-100"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"close","btn-close"],[1,"modal-body"],[1,"modal-footer","justify-content-center"],["type","button","data-dismiss","modal","data-bs-dismiss","modal","aria-label","Close",1,"btn","btn-secondary"],["type","button",1,"btn","btn-danger",3,"click"],["type","checkbox","name","can_edit",1,"form-check-input","can_can_edit","mr","mt-2",3,"checked","change"],["type","checkbox","name","can_delete",1,"form-check-input","can_delete","mr","mt-2",3,"checked","change"],["data-bs-toggle","modal","data-bs-target","#modal-delete",1,"btn","btn-operation",3,"click"],[1,"fa-solid","fa-trash"],[1,"list-group-item","infos-permission",3,"id"],["type","checkbox"],["type","checkbox",3,"click"]],template:function(t,i){if(1&t){const r=e.EpF();e.TgZ(0,"section")(1,"div",0)(2,"div",1)(3,"h6",2),e._uU(4," Administration "),e.qZA(),e.TgZ(5,"h2",3),e._uU(6," Droits d'acc\xe9s "),e.qZA()()(),e.TgZ(7,"div",4)(8,"div",5)(9,"form",6,7),e.NdJ("ngSubmit",function(){e.CHM(r);const l=e.MAs(10);return i.updateRole(l.value)}),e.TgZ(11,"div",5)(12,"input",8),e.NdJ("ngModelChange",function(l){return i.singleRole.id=l}),e.qZA(),e.TgZ(13,"div",9)(14,"label",10),e._uU(15," Libelle "),e.YNc(16,te,2,0,"strong",11),e.qZA(),e.TgZ(17,"input",12),e.NdJ("ngModelChange",function(l){return i.singleRole.libelle=l}),e.qZA()(),e.TgZ(18,"div",9)(19,"label",13),e._uU(20,"Description"),e.qZA(),e.TgZ(21,"textarea",14),e.NdJ("ngModelChange",function(l){return i.singleRole.description=l}),e.qZA()()(),e._UZ(22,"hr",15),e.TgZ(23,"small",16),e._uU(24,"*: Ce champ est obligatoire."),e.qZA(),e.TgZ(25,"button",17),e._uU(26," Enregistrer "),e.qZA(),e.TgZ(27,"button",18),e.NdJ("click",function(){return i.fermer()}),e._uU(28,"Annuler"),e.qZA()()(),e.TgZ(29,"div",5)(30,"div",19)(31,"div",20)(32,"div",21)(33,"h1",3),e._uU(34,"Permissions"),e.qZA(),e.TgZ(35,"p",22)(36,"button",23),e._UZ(37,"i",24),e.qZA()()()(),e.TgZ(38,"ul",25)(39,"li",26)(40,"span",27),e._uU(41,"Permissions"),e.qZA(),e.TgZ(42,"div",28)(43,"small",29),e._uU(44,"Modifie"),e.qZA(),e.TgZ(45,"small",27),e._uU(46,"Supprimer"),e.qZA()()(),e.YNc(47,ie,8,3,"li",30),e.qZA()()()(),e.TgZ(48,"div",31)(49,"div",32)(50,"div",33)(51,"div",34)(52,"div",35)(53,"h4",36),e._uU(54," Permissions "),e.qZA(),e._UZ(55,"button",37),e.qZA(),e.TgZ(56,"div",38)(57,"ul",25)(58,"li",26)(59,"span",27),e._uU(60,"Permissions"),e.qZA(),e.TgZ(61,"div",39)(62,"small",29),e._uU(63,"Consulter"),e.qZA(),e.TgZ(64,"small",29),e._uU(65,"Modifie"),e.qZA(),e.TgZ(66,"small",27),e._uU(67,"Supprimer"),e.qZA()()(),e.YNc(68,se,7,11,"li",40),e.qZA(),e.TgZ(69,"div",41)(70,"button",42),e.NdJ("click",function(){return i.addRolePermossion()}),e._uU(71,"Enregister"),e.qZA(),e.TgZ(72,"button",43),e._uU(73,"Annuler"),e.qZA()()()()()()(),e.TgZ(74,"div",44)(75,"div",45)(76,"div",33)(77,"div",46)(78,"div",47)(79,"i",48),e._UZ(80,"i",49),e.qZA()(),e.TgZ(81,"h4",50),e._uU(82,"\xcates-vous s\xfbr?"),e.qZA(),e._UZ(83,"button",51),e.qZA(),e.TgZ(84,"div",52)(85,"p"),e._uU(86,"Voulez-vous vraiment supprimer ces enregistrements\xa0? Ce processus ne peut pas \xeatre annul\xe9."),e.qZA(),e._UZ(87,"br"),e.qZA(),e.TgZ(88,"div",53)(89,"button",54),e._uU(90,"Annuler"),e.qZA(),e.TgZ(91,"button",55),e.NdJ("click",function(){return i.deleteRolePermission(i.singleRole.id,i.singleRolePermission.permission_id)}),e._uU(92,"Supprimer"),e.qZA()()()()()()}if(2&t){const r=e.MAs(10);e.xp6(12),e.Q6J("ngModel",i.singleRole.id),e.xp6(4),e.Q6J("ngIf",!i.singleRole.libelle),e.xp6(1),e.Q6J("ngModel",i.singleRole.libelle),e.xp6(4),e.Q6J("ngModel",i.singleRole.description),e.xp6(4),e.Q6J("disabled",!r.valid),e.xp6(22),e.Q6J("ngForOf",i.rolePermissions),e.xp6(21),e.Q6J("ngForOf",i.permissions)}},directives:[a._Y,a.JL,a.F,a.Fj,a.JJ,a.On,g.O5,a.Q7,g.sg],styles:[".list-group-item[_ngcontent-%COMP%]{padding:5px 1rem}.list-group-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-top:3px;position:absolute}.modal-dialog[_ngcontent-%COMP%]{max-width:700px!important}.mr[_ngcontent-%COMP%]{margin-right:37px}.ml[_ngcontent-%COMP%]{margin-right:36px}"]}),s})();function ne(s,n){if(1&s&&(e.TgZ(0,"div",41),e._uU(1),e._UZ(2,"button",42),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.hij(" ",t.message," ")}}function oe(s,n){1&s&&(e.TgZ(0,"strong",39),e._uU(1,"*"),e.qZA())}function re(s,n){1&s&&(e.TgZ(0,"strong",39),e._uU(1,"*"),e.qZA())}function ae(s,n){if(1&s&&(e.TgZ(0,"option",43),e._uU(1),e.qZA()),2&s){const t=n.$implicit;e.s9C("value",t.id),e.xp6(1),e.Oqu(t.nom)}}function de(s,n){1&s&&(e.TgZ(0,"strong",39),e._uU(1,"*"),e.qZA())}function ue(s,n){1&s&&(e.TgZ(0,"strong",39),e._uU(1,"*"),e.qZA())}function ge(s,n){if(1&s&&(e.TgZ(0,"option",43),e._uU(1),e.qZA()),2&s){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.nom)}}function me(s,n){1&s&&(e.TgZ(0,"strong",39),e._uU(1,"*"),e.qZA())}function ce(s,n){if(1&s&&(e.TgZ(0,"option",43),e._uU(1),e.qZA()),2&s){const t=n.$implicit;e.s9C("value",t.id),e.xp6(1),e.Oqu(t.nom)}}const _e=[{path:"",children:[{path:"",component:G,canActivate:[p.a],data:{title:"Gestion des utilisateurs"}},{path:"profile",component:(()=>{class s{constructor(t,i,r,o,l,c,h){this.securiteClass=t,this.globale=i,this.paysService=r,this.regionsService=o,this.villesService=l,this.utilisateurService=c,this.tokenService=h,this.pays=[],this.regions=[],this.villes=[],this.message=null,this.singleUtilisateur={id:null,type_compte:null,role_id:null,nom:null,prenom:null,cni:null,email:null,tel:null,password:null,adresse:null,ville_id:null,region_id:null,pays_id:null,locked_by:null}}ngOnInit(){var t;const i=this.tokenService.payload(null!==(t=this.tokenService.getToken())&&void 0!==t?t:"");this.getUtilisateur(i.id),this.getAllPays()}getUtilisateur(t){this.utilisateurService.getUtilisateur(t).subscribe(i=>{this.singleUtilisateur=i,this.getAllPays(),this.getRegionsByPays(i.pays_id),this.getVillesByRegion(i.region_id)},i=>{401==i.status&&this.securiteClass.refreshToken()&&this.getUtilisateur(t)})}getAllPays(){this.paysService.getAll().subscribe(t=>this.pays=t,t=>{401==t.status&&this.securiteClass.refreshToken()&&this.getAllPays()})}getRegionsByPays(t){this.regionsService.regionsByPays(t).subscribe(i=>{this.regions=i,this.singleUtilisateur.pays_id=t},i=>{401==i.status&&this.securiteClass.refreshToken()&&this.getRegionsByPays(t)})}getVillesByRegion(t){this.villes=[],this.villesService.villesByRegion(t).subscribe(i=>{this.villes=i,this.singleUtilisateur.region_id=t},i=>{401==i.status&&this.securiteClass.refreshToken()&&this.getVillesByRegion(t)})}changePays(t){this.getRegionsByPays(t.target.value)}changeRegion(t){this.getVillesByRegion(t.target.value)}update(t){this.utilisateurService.update(t).subscribe(i=>this.message="Votre profile est modifi\xe9 avec succ\xe8s !",i=>{401==i.status&&this.securiteClass.refreshToken()&&this.update(t)})}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(_.z),e.Y36(b.N),e.Y36(U.K),e.Y36(q.E),e.Y36(y.i),e.Y36(Z.y),e.Y36(M.B))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-profil"]],decls:77,vars:22,consts:[[1,"header-body","shadow-sm","p-3","mb-5","bg-white","rounded"],[1,"align-items-end"],[1,"header-pretitle"],[1,"header-title"],[1,"container"],[1,"row"],[1,"col-md-12"],[1,"row","justify-content-between","align-items-center","mb-5"],[1,"text-muted","mb-md-0"],["class","alert alert-success mt-5","role","alert",4,"ngIf"],[1,"mb-4","shadow","p-3","mb-5","bg-white","rounded",3,"ngSubmit"],["utilisateurForm","ngForm"],["type","hidden","name","id","value","singleUtilisateur.id",3,"ngModel","ngModelChange"],["type","hidden","name","type_compte","value","singleUtilisateur.type_compte",3,"ngModel","ngModelChange"],["type","hidden","name","role_id","value","singleUtilisateur.role_id",3,"ngModel","ngModelChange"],[1,"col-md-6"],[1,"form-group"],["for","nom",1,"form-label"],["class","text-danger",4,"ngIf"],["type","text","placeholder","Nom","name","nom","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","cni",1,"form-label"],["type","text","placeholder","CNI","name","cni",1,"form-control",3,"ngModel","ngModelChange"],["for","tel",1,"form-label"],["type","text","placeholder","tel","name","tel","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-label"],["name","region_id",1,"form-select",3,"ngModel","change"],["value","0","selected","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["for","prenom",1,"form-label"],["type","text","placeholder","Pr\xe9nom","name","prenom","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","email",1,"form-label"],["type","email","placeholder","Email","name","email","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","pays_id",1,"form-label"],["name","pays_id",1,"form-select",3,"ngModel","change"],["value","0","disabled",""],["name","ville_id",1,"form-select",3,"ngModel","ngModelChange"],["value","","selected","","disabled",""],["for","pwd",1,"form-label"],["name","adresse",1,"form-control",3,"ngModel","ngModelChange"],[1,"text-danger"],["type","submit",1,"btn","btn-success","mb-2","float-right",3,"disabled"],["role","alert",1,"alert","alert-success","mt-5"],["type","button","data-bs-dismiss","alert","aria-label","Close",1,"btn-close","pb-0","mp-0"],[3,"value"]],template:function(t,i){if(1&t){const r=e.EpF();e.TgZ(0,"section")(1,"div",0)(2,"div",1)(3,"h6",2),e._uU(4," Utilistaeur "),e.qZA(),e.TgZ(5,"h2",3),e._uU(6," Profil "),e.qZA()()(),e.TgZ(7,"div",4)(8,"div",5)(9,"div",6)(10,"div",7)(11,"p",8),e._uU(12," Veuillez entrer les informations du compte. "),e.qZA(),e.YNc(13,ne,3,1,"div",9),e.qZA(),e.TgZ(14,"form",10,11),e.NdJ("ngSubmit",function(){e.CHM(r);const l=e.MAs(15);return i.update(l.value)}),e.TgZ(16,"div",5)(17,"input",12),e.NdJ("ngModelChange",function(l){return i.singleUtilisateur.id=l}),e.qZA(),e.TgZ(18,"input",13),e.NdJ("ngModelChange",function(l){return i.singleUtilisateur.type_compte=l}),e.qZA(),e.TgZ(19,"input",14),e.NdJ("ngModelChange",function(l){return i.singleUtilisateur.role_id=l}),e.qZA(),e.TgZ(20,"div",15)(21,"div",16)(22,"label",17),e._uU(23," Nom "),e.YNc(24,oe,2,0,"strong",18),e.qZA(),e.TgZ(25,"input",19),e.NdJ("ngModelChange",function(l){return i.singleUtilisateur.nom=l}),e.qZA()(),e.TgZ(26,"div",16)(27,"label",20),e._uU(28,"CNI"),e.qZA(),e.TgZ(29,"input",21),e.NdJ("ngModelChange",function(l){return i.singleUtilisateur.cni=l}),e.qZA()(),e.TgZ(30,"div",16)(31,"label",22),e._uU(32," Tel "),e.YNc(33,re,2,0,"strong",18),e.qZA(),e.TgZ(34,"input",23),e.NdJ("ngModelChange",function(l){return i.singleUtilisateur.tel=l}),e.qZA()(),e.TgZ(35,"div",16)(36,"label",24),e._uU(37,"R\xe9gion"),e.qZA(),e.TgZ(38,"select",25),e.NdJ("change",function(l){return i.changeRegion(l)}),e.TgZ(39,"option",26),e._uU(40,"Veuillez choisir..."),e.qZA(),e.YNc(41,ae,2,2,"option",27),e.qZA()()(),e.TgZ(42,"div",15)(43,"div",16)(44,"label",28),e._uU(45," Pr\xe9nom "),e.YNc(46,de,2,0,"strong",18),e.qZA(),e.TgZ(47,"input",29),e.NdJ("ngModelChange",function(l){return i.singleUtilisateur.prenom=l}),e.qZA()(),e.TgZ(48,"div",16)(49,"label",30),e._uU(50," Email "),e.YNc(51,ue,2,0,"strong",18),e.qZA(),e.TgZ(52,"input",31),e.NdJ("ngModelChange",function(l){return i.singleUtilisateur.email=l}),e.qZA()(),e.TgZ(53,"div",16)(54,"label",32),e._uU(55,"Pays"),e.qZA(),e.TgZ(56,"select",33),e.NdJ("change",function(l){return i.changePays(l)}),e.TgZ(57,"option",34),e._uU(58,"Veuillez choisir..."),e.qZA(),e.YNc(59,ge,2,2,"option",27),e.qZA()(),e.TgZ(60,"div",16)(61,"label",24),e._uU(62," Ville "),e.YNc(63,me,2,0,"strong",18),e.qZA(),e.TgZ(64,"select",35),e.NdJ("ngModelChange",function(l){return i.singleUtilisateur.ville_id=l}),e.TgZ(65,"option",36),e._uU(66,"Veuillez choisir..."),e.qZA(),e.YNc(67,ce,2,2,"option",27),e.qZA()()(),e.TgZ(68,"div",16)(69,"label",37),e._uU(70,"Adresse"),e.qZA(),e.TgZ(71,"textarea",38),e.NdJ("ngModelChange",function(l){return i.singleUtilisateur.adresse=l}),e.qZA()(),e.TgZ(72,"div",6)(73,"small",39),e._uU(74,"*: Ces champs sont obligatoires."),e.qZA(),e.TgZ(75,"button",40),e._uU(76,"Enregister"),e.qZA()()()()()()()()}if(2&t){const r=e.MAs(15);e.xp6(13),e.Q6J("ngIf",i.message),e.xp6(4),e.Q6J("ngModel",i.singleUtilisateur.id),e.xp6(1),e.Q6J("ngModel",i.singleUtilisateur.type_compte),e.xp6(1),e.Q6J("ngModel",i.singleUtilisateur.role_id),e.xp6(5),e.Q6J("ngIf",!i.singleUtilisateur.nom),e.xp6(1),e.Q6J("ngModel",i.singleUtilisateur.nom),e.xp6(4),e.Q6J("ngModel",i.singleUtilisateur.cni),e.xp6(4),e.Q6J("ngIf",!i.singleUtilisateur.tel),e.xp6(1),e.Q6J("ngModel",i.singleUtilisateur.tel),e.xp6(4),e.Q6J("ngModel",i.singleUtilisateur.region_id),e.xp6(3),e.Q6J("ngForOf",i.regions),e.xp6(5),e.Q6J("ngIf",!i.singleUtilisateur.prenom),e.xp6(1),e.Q6J("ngModel",i.singleUtilisateur.prenom),e.xp6(4),e.Q6J("ngIf",!i.singleUtilisateur.email),e.xp6(1),e.Q6J("ngModel",i.singleUtilisateur.email),e.xp6(4),e.Q6J("ngModel",i.singleUtilisateur.pays_id),e.xp6(3),e.Q6J("ngForOf",i.pays),e.xp6(4),e.Q6J("ngIf",!i.singleUtilisateur.ville_id),e.xp6(1),e.Q6J("ngModel",i.singleUtilisateur.ville_id),e.xp6(3),e.Q6J("ngForOf",i.villes),e.xp6(4),e.Q6J("ngModel",i.singleUtilisateur.adresse),e.xp6(4),e.Q6J("disabled",!r.valid)}},directives:[g.O5,a._Y,a.JL,a.F,a.Fj,a.JJ,a.On,a.Q7,a.EJ,a.YN,a.Kr,g.sg],styles:["form[_ngcontent-%COMP%]{padding:15px 30px!important}"]}),s})(),canActivate:[p.a],data:{title:"Profile de l'utilisateurs"}},{path:"changement-pwd",component:V,canActivate:[p.a],data:{title:"Changement de mot de passe"}},{path:"droits-acces",component:K,canActivate:[p.a],data:{title:"Les droits-acces"}},{path:"droits-acces/roles/:role_id/permissions",component:le,canActivate:[p.a],data:{title:"role-permissions"}}]}];let he=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[[f.Bz.forChild(_e)],f.Bz]}),s})(),fe=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[[g.ez,he,a.u5]]}),s})()}}]);