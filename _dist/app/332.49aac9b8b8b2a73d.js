"use strict";(self.webpackChunkuplogistix=self.webpackChunkuplogistix||[]).push([[332],{8332:(ja,Fe,T)=>{T.r(Fe),T.d(Fe,{EcoconduitModule:()=>Ra});var p=T(9808),B=T(3072),Ce=T(8299),e=T(1223),D=T(5861),M=T(4393),f=T(8259),z=T(5882),Ne=T(4741),F=T(899),h=T(3075);function ht(n,a){1&n&&(e.TgZ(0,"p",28),e._uU(1," Pas des donn\xe9es disponibles ... "),e.qZA())}function mt(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"li",29)(1,"input",30),e.NdJ("click",function(i){const s=e.CHM(t).$implicit;return e.oxw().checkConducteurs(i,s)}),e.qZA(),e._uU(2),e.qZA()}if(2&n){const t=a.$implicit;e.xp6(1),e.MGl("id","conducteur_",t.id,""),e.s9C("checked",t.checked),e.xp6(1),e.AsE(" ",t.prenom," ",t.nom," ")}}function pt(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"li",29)(1,"input",30),e.NdJ("click",function(i){const s=e.CHM(t).$implicit;return e.oxw(3).checkChart(i,s.index)}),e.qZA(),e._uU(2),e.qZA()}if(2&n){const t=a.$implicit;e.xp6(1),e.MGl("id","chart_",t.index,""),e.s9C("checked",t.checked),e.xp6(1),e.hij(" ",t.libelle," ")}}function ft(n,a){if(1&n&&(e.TgZ(0,"small",17)(1,"div",18),e._UZ(2,"i",19),e._uU(3," \xa0 "),e.qZA(),e.TgZ(4,"ul",20)(5,"h4",21),e._uU(6),e.qZA(),e.YNc(7,pt,3,3,"li",22),e.TgZ(8,"strong",34),e._UZ(9,"i",24),e._uU(10),e.qZA()()()),2&n){const t=e.oxw(2);e.xp6(6),e.hij("Veuillez choisir ",t.maxChart," type :"),e.xp6(1),e.Q6J("ngForOf",t.chartSelected),e.xp6(3),e.hij(" Le maximum est ",t.maxChart," ")}}const ye=function(n){return{"d-none":n}};function gt(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"th",31)(1,"label",32),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.oxw().remplissageChartPrincipale(o.index)}),e._uU(2),e.qZA(),e.YNc(3,ft,11,3,"small",33),e.qZA()}if(2&n){const t=a.$implicit;e.Gre("text-muted text-center col-chart col-chart-",t.index,""),e.Q6J("ngClass",e.VKq(6,ye,!t.checked)),e.xp6(2),e.hij(" ",t.libelle," "),e.xp6(1),e.Q6J("ngIf",t.last)}}function _t(n,a){if(1&n&&(e.TgZ(0,"td",31)(1,"strong",37),e._uU(2,"0"),e.qZA(),e._UZ(3,"canvas",38),e.qZA()),2&n){const t=a.$implicit,r=e.oxw().$implicit;e.Gre("col-chart tchart chart-",t.index,""),e.Q6J("ngClass",e.VKq(8,ye,!t.checked)),e.xp6(1),e.hYB("id","max_",r.id,"",t.index,""),e.xp6(2),e.hYB("id","chart_conducteur_",r.id,"",t.index,"")}}function vt(n,a){if(1&n&&(e.TgZ(0,"tr")(1,"td",35),e._uU(2),e._UZ(3,"br"),e.TgZ(4,"small",36),e._uU(5),e.qZA()(),e.YNc(6,_t,4,10,"td",25),e.qZA()),2&n){const t=a.$implicit,r=e.oxw();e.xp6(2),e.AsE(" ",t.prenom," ",t.nom,""),e.xp6(3),e.Oqu(t.matricule),e.xp6(1),e.Q6J("ngForOf",r.chartSelected)}}function Ct(n,a){1&n&&(e.TgZ(0,"tfoot")(1,"tr")(2,"td",39)(3,"p",40),e._uU(4," Pas des donn\xe9es disponibles ... "),e.qZA()()()())}let yt=(()=>{class n{constructor(t,r,i,o){this.conducteurService=t,this.securiteClass=r,this.datepipe=i,this.geoLocalisationService=o,this.date=new Date,this.filter={vehicule_id:null,date_debut:this.datepipe.transform(new Date(this.date.getFullYear(),this.date.getMonth(),1),"yyyy-MM-dd"),date_fin:this.datepipe.transform(this.date,"yyyy-MM-dd")},this.colors=["56, 95, 158","247, 189, 1","20, 156, 56","94, 202, 223"],this.viewChartPrincipale=null,this.maxConducteur=2,this.maxChart=5,this.conducteurs=[],this.conducteursSelected=[],this.chartSelected=[{index:1,libelle:"Acceleration brusque",slug:"acceleration-brusque",data:[],dates:[]},{index:2,libelle:"Freinage brusque",slug:"freinage-brusque",data:[],dates:[]},{index:3,libelle:"Comportement excessif",slug:"comportement-excessif",data:[],dates:[]},{index:4,libelle:"Temps de conduite",slug:"temps-de-conduite",data:[],dates:[]},{index:5,libelle:"Score d'exc\xe8s de vitesse",slug:"Nbre-exces-vitesse",data:[],dates:[]}],this.myChart=[]}ngOnInit(){M.kL.register(...M.zX),this.getConducteurs();for(let t=0;t<this.maxChart;t++)this.chartSelected[t].checked=!0;this.chartSelected[this.maxChart-1].last=!0}getConducteurs(){var t=this;this.conducteurService.getAll(1).subscribe(r=>{this.conducteurs=r.records;for(let i=0;i<this.maxConducteur;i++)this.checkConducteurs(null,this.conducteurs[i]),this.conducteurs[i].checked=!0},function(){var r=(0,D.Z)(function*(i){401==i.status&&(yield t.securiteClass.refreshToken())&&t.getConducteurs()});return function(i){return r.apply(this,arguments)}}())}checkConducteurs(t,r){this.viewChartPrincipale=null,f(".tchart").removeClass("active"),f(".col-chart").removeClass("border-bottom"),null!=t?this.conducteursSelected.length==this.maxConducteur?t.currentTarget.checked?(t.currentTarget.checked=!1,f(".mv-error").removeClass("d-none")):(this.chartSelected.forEach(i=>{i.data=i.data.filter(o=>o.matricule!=r.matricule)}),this.conducteursSelected=this.conducteursSelected.filter(i=>i.id!=r.id),f(".mv-error").addClass("d-none")):this.conducteursSelected.length<this.maxConducteur&&(t.currentTarget.checked?(r.color=this.colors.filter(i=>!this.conducteursSelected.map(o=>o.color).includes(i))[0],this.conducteursSelected.push(r),this.getInformationsConducteur(r)):t.currentTarget.checked||(this.conducteursSelected=this.conducteursSelected.filter(i=>i.id!=r.id),this.chartSelected.forEach(i=>{i.data=i.data.filter(o=>o.matricule!=r.matricule)}))):(r.color=this.colors[this.conducteursSelected.length],this.conducteursSelected.push(r),this.getInformationsConducteur(r))}getInformationsConducteur(t){var r=null;this.filter.vehicule_id=t.vehicule_id,this.geoLocalisationService.analyseConducteur(this.filter).subscribe(i=>{this.chartSelected.forEach(o=>{r=1==o.index?[...i.acceleration].map(l=>({x:l.date,y:l.score})):2==o.index?[...i.freinage].map(l=>({x:l.date,y:l.score})):3==o.index?[...i.virrage_serre].map(l=>({x:l.date,y:l.score})):4==o.index?i.driveTime.map(l=>({x:l.date,y:this.toSeconds(l.time)})):5==o.index?i.speedScore.map(l=>({x:l.date,y:l.score})):[],this.chartSelected[o.index-1].data.push({values:r,matricule:t.nom,color:t.color}),this.createChart(t.id+""+o.index,r,t,Math.max(...r.map(l=>l.y)),o.index)})})}formateDate(t){var r;return null===(r=this.datepipe.transform(t,"dd-MM-yyyy"))||void 0===r?void 0:r.toString()}createChart(t,r,i,o,s){this.myChart[t]&&this.myChart[t].destroy();const l={type:"line",data:{datasets:[{data:r,label:i.matricule,borderColor:"rgb("+i.color+")",fill:{target:"origin",above:"rgba("+i.color+",0.2)"},pointBackgroundColor:"rgba(76, 132, 255,0)",pointHoverBackgroundColor:"rgb(44, 122, 228)",pointBorderWidth:0,pointStyle:"rectRounded",borderWidth:1.5}]},options:{responsive:!0,scales:{x:{display:!1},y:{display:!1}},plugins:{legend:{display:!1}}}};4==s?f("#max_"+t).text(this.secondsToDhms(o)):"-Infinity"!=o&&!isNaN(o)&&f("#max_"+t).text(o.toFixed(2)),this.myChart[t]=new M.kL(f("#chart_conducteur_"+t),l)}remplissageChartPrincipale(t){this.chartSelected[t-1].data.length>=this.maxConducteur?(this.viewChartPrincipale=!0,f(".tchart").removeClass("active"),f(".chart-"+t).addClass("active"),f(".col-chart").removeClass("border-bottom"),f(".col-chart-"+t).addClass("border-bottom"),this.createChartPrincipale(this.chartSelected[t-1])):this.viewChartPrincipale=!1}traiterData(t,r){return[...r].forEach(i=>{0==[...t].filter(o=>o.x==i).length&&t.push({x:i,y:0})}),t=[...t].sort((i,o)=>new Date(i.x).getTime()/1e3-new Date(o.x).getTime()/1e3),[...t].map(i=>({x:this.formateDate(i.x),y:i.y}))}createChartPrincipale(t){var r=f("#chart-principal");this.myChart[-1]&&this.myChart[-1].destroy();var i={type:"line",data:{datasets:[]},options:{maintainAspectRatio:!1,scales:{x:{grid:{drawOnChartArea:!1}},y:{grid:{drawOnChartArea:!1}}}}};let o=[];t.data.forEach(s=>{[...s.values].forEach(l=>{0==[...o].filter(c=>c==l.x).length&&o.push(l.x)})}),t.data.forEach(s=>{var l={data:this.traiterData(s.values,o),label:s.matricule,borderColor:"rgba("+s.color+",1)"};i.data.datasets.push(l)}),4==t.index&&(i.options={maintainAspectRatio:!1,scales:{x:{grid:{drawOnChartArea:!1}},y:{grid:{drawOnChartArea:!1},ticks:{callback:function(s){var l=Math.floor(s/3600),c=Math.floor(s%3600/60),d=Math.floor(s%60);return l.toString().padStart(2,"0")+":"+c.toString().padStart(2,"0")+":"+d.toString().padStart(2,"0")}}}},plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(s){var l=Math.floor(s.parsed.y/3600),c=Math.floor(s.parsed.y%3600/60),d=Math.floor(s.parsed.y%60);return l.toString().padStart(2,"0")+":"+c.toString().padStart(2,"0")+":"+d.toString().padStart(2,"0")}}}}}),this.myChart[-1]=new M.kL(r,i)}changeData(){f(".tchart").removeClass("active"),f(".col-chart").removeClass("border-bottom"),this.chartSelected.forEach(t=>{delete t.data,t.data=[]}),this.conducteursSelected.forEach(t=>{this.getInformationsConducteur(t)})}checkChart(t,r){this.viewChartPrincipale=null,f(".tchart").removeClass("active"),f(".col-chart").removeClass("border-bottom");let i=this.chartSelected.filter(o=>1==o.checked);this.chartSelected[i[i.length-1].index-1].last=!1,t.currentTarget.checked?this.maxChart>i.length?this.chartSelected[r-1].checked=!0:(t.currentTarget.checked=!1,f(".mc-error").removeClass("d-none")):1==i.length?t.currentTarget.checked=!0:this.chartSelected[r-1].checked=null,i=this.chartSelected.filter(o=>1==o.checked),this.chartSelected[i[i.length-1].index-1].last=!0}entierAleatoire(t,r){return Math.floor(Math.random()*(r-t+1))+t}secondsToDhms(t){var r=Math.floor(t/3600),i=Math.floor(t%3600/60),o=Math.floor(t%60);return r.toString().padStart(2,"0")+":"+i.toString().padStart(2,"0")+":"+o.toString().padStart(2,"0")}toSeconds(t){var r=t.split(":");return 3600*+r[0]+60*+r[1]+ +r[2]}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(z.b),e.Y36(Ne.z),e.Y36(p.uU),e.Y36(F.O))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-comparaison-conducteurs"]],decls:42,vars:12,consts:[[1,"app"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"row","gx-0","mb-3","frm-search-jms"],["searchForm","ngForm"],[1,"input-group","mb-3"],["type","date","name","date_debut",1,"form-control","form-control-sm","mr",3,"ngModel","ngModelChange"],["type","date","name","date_fin",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"input-group-append"],["type","button",1,"btn","btn-sm","btn-outline-primary",3,"click"],[1,"fas","fa-search"],["class","text-muted text-center mt-5",4,"ngIf"],[1,"principal-chart",3,"ngClass"],["id","chart-principal"],[1,"charts-par-vehicule","mb-7","mt-4"],[1,"col-vehicules","text-muted"],[1,"dropdown"],["role","button","data-bs-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"dropdown-ellipses","dropdown-toggle","float-right"],[1,"fas","fa-ellipsis-v"],[1,"dropdown-menu","dropdown-menu-end"],[1,"card-header-title","dropdown-item"],["class","dropdown-item",4,"ngFor","ngForOf"],[1,"text-danger","dropdown-item","d-none","mv-error"],[1,"fas","fa-exclamation-triangle"],[3,"class","ngClass",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"text-muted","text-center","mt-5"],[1,"dropdown-item"],["type","checkbox",1,"form-check-input","check-vehicule",3,"id","checked","click"],[3,"ngClass"],[1,"cursor",3,"click"],["class","dropdown",4,"ngIf"],[1,"text-danger","dropdown-item","d-none","mc-error"],[1,"nom-complet"],[1,"text-muted"],[1,"text-dark","small",3,"id"],[1,"chat-conducteur",3,"id"],["colspan","5"],[1,"text-center","text-muted"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"form",4,5)(6,"label"),e._uU(7,"P\xe9riode"),e.qZA(),e.TgZ(8,"div",6)(9,"input",7),e.NdJ("ngModelChange",function(o){return r.filter.date_debut=o}),e.qZA(),e.TgZ(10,"input",8),e.NdJ("ngModelChange",function(o){return r.filter.date_fin=o}),e.qZA(),e.TgZ(11,"div",9)(12,"button",10),e.NdJ("click",function(){return r.changeData()}),e._UZ(13,"i",11),e.qZA()()()()()(),e.TgZ(14,"div",2)(15,"div",3),e.YNc(16,ht,2,0,"p",12),e.TgZ(17,"div",13),e._UZ(18,"canvas",14),e.qZA()()(),e.TgZ(19,"div",2)(20,"div",3)(21,"div",15)(22,"table")(23,"thead")(24,"tr")(25,"th",16),e._uU(26," \xa0\xa0Conducteurs "),e.TgZ(27,"small",17)(28,"div",18),e._UZ(29,"i",19),e._uU(30," \xa0 "),e.qZA(),e.TgZ(31,"ul",20)(32,"h4",21),e._uU(33),e.qZA(),e.YNc(34,mt,3,4,"li",22),e.TgZ(35,"strong",23),e._UZ(36,"i",24),e._uU(37),e.qZA()()()(),e.YNc(38,gt,4,8,"th",25),e.qZA()(),e.TgZ(39,"tbody"),e.YNc(40,vt,7,4,"tr",26),e.qZA(),e.YNc(41,Ct,5,0,"tfoot",27),e.qZA()()()()()()),2&t&&(e.xp6(9),e.Q6J("ngModel",r.filter.date_debut),e.xp6(1),e.Q6J("ngModel",r.filter.date_fin),e.xp6(6),e.Q6J("ngIf",0==r.viewChartPrincipale),e.xp6(1),e.Q6J("ngClass",e.VKq(10,ye,!r.viewChartPrincipale)),e.xp6(16),e.hij("Veuillez choisir ",r.maxConducteur," conducteurs:"),e.xp6(1),e.Q6J("ngForOf",r.conducteurs),e.xp6(3),e.hij(" Le maximum est ",r.maxConducteur," "),e.xp6(1),e.Q6J("ngForOf",r.chartSelected),e.xp6(2),e.Q6J("ngForOf",r.conducteursSelected),e.xp6(1),e.Q6J("ngIf",0==r.conducteursSelected.length))},directives:[h._Y,h.JL,h.F,h.Fj,h.JJ,h.On,p.O5,p.mk,p.sg],styles:["table[_ngcontent-%COMP%]{width:100%}.dropdown-menu-end[_ngcontent-%COMP%]{z-index:1040}.active[_ngcontent-%COMP%]{background-color:#196da833}#chart-principal[_ngcontent-%COMP%]{height:290px!important}.dropdown-menu[_ngcontent-%COMP%]{text-transform:initial!important}tfoot[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:20px 10px}td.nom-prenom[_ngcontent-%COMP%]{padding-left:10px}.nav-tabs[_ngcontent-%COMP%]{font-size:14px}.form-search[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-left:13px}.card-header-tabs[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{background-color:transparent}.border-bottom[_ngcontent-%COMP%]{border-bottom:4px solid #196da8!important;color:#196da8!important}.frm-search-jms[_ngcontent-%COMP%]{width:180px;float:right}.dropdown-item[_ngcontent-%COMP%]{font-size:12px;padding:1px 10px}.dropdown-item[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]{margin-top:3px;width:12px;height:12px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{box-shadow:#0000003d 0 3px 8px;font-size:.625rem;color:#95aac9;background-color:#f9fbfd;font-weight:600;letter-spacing:.08em;text-transform:uppercase}table[_ngcontent-%COMP%]{background-color:#fff;box-shadow:#00000029 0 1px 4px}.principal-chart[_ngcontent-%COMP%]{box-shadow:#0000003d 0 3px 8px;margin-top:30px;padding:20px 30px;background-color:#fff;height:330px}ul.dropdown-menu.dropdown-menu-end.show[_ngcontent-%COMP%]{max-height:200px;overflow-y:scroll}canvas.chat-conducteur[_ngcontent-%COMP%]{height:9vh!important;width:12.7vw!important;margin:0 auto;display:block}label.cursor[_ngcontent-%COMP%]{width:80%}a.nav-link.active[_ngcontent-%COMP%]{padding-bottom:2px!important}@media (max-width: 1842px){canvas.chat-conducteur[_ngcontent-%COMP%]{width:13vw!important}}@media (max-width: 1298px){canvas.chat-conducteur[_ngcontent-%COMP%]{width:10vw!important}}@media (max-width: 650px){.nom-complet[_ngcontent-%COMP%]{font-size:12px!important}}.frm-search-jms[_ngcontent-%COMP%]{width:303px;float:right}.container-fluid[_ngcontent-%COMP%]{width:100%!important}"]}),n})();function bt(n,a){if(1&n&&(e.TgZ(0,"option",51),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.s9C("value",t.vehicule_id),e.xp6(1),e.AsE("",t.prenom," ",t.nom,"")}}let wt=(()=>{class n{constructor(t,r,i){this.datepipe=t,this.geoLocalisationService=r,this.conducteurService=i,this.date=new Date,this.conducteurs=[],this.filter={vehicule_id:null,date_debut:this.datepipe.transform(this.date,"yyyy-MM-dd"),date_fin:this.datepipe.transform(this.date,"yyyy-MM-dd"),typeFilter:"acceleration",conducteur:""},this.score={maximale:"",minimal:""},this.myChart=[]}ngOnInit(){this.filter.date_debut=this.datepipe.transform(new Date(this.date.getFullYear(),this.date.getMonth(),1),"yyyy-MM-dd"),this.filter.date_fin=this.datepipe.transform(this.date,"yyyy-MM-dd"),M.kL.register(...M.zX),this.getConducteurs()}getConducteurs(){this.conducteurService.getAll(1).subscribe(t=>{this.conducteurs=[...t.records].filter(r=>r.vehicule_id),this.conducteurs.length>0&&(this.filter.vehicule_id=this.conducteurs[0].vehicule_id,this.filter.conducteur=this.conducteurs[0].prenom+" "+this.conducteurs[0].nom,this.getEvolutionScore(),this.filterData())})}changeConducteur(t){this.filter.conducteur=[...this.conducteurs].filter(r=>r.vehicule_id==t.target.value).map(r=>r.prenom+" "+r.nom),this.filter.vehicule_id=t.target.value,this.filterData(),this.getEvolutionScore()}filterData(){this.geoLocalisationService.analyseConducteur(this.filter).subscribe(t=>{var r=null;"acceleration"==this.filter.typeFilter||"freinage"==this.filter.typeFilter||"virrage_serre"==this.filter.typeFilter||"speedScore"==this.filter.typeFilter?r=t[this.filter.typeFilter].map(i=>({x:this.formateDate(i.date),y:i.score})):"driveTime"==this.filter.typeFilter&&(r=t[this.filter.typeFilter].map(i=>({x:this.formateDate(i.date),y:this.toSeconds(i.time),z:i.time}))),this.genererGraphe("chart_conducteur",r,1),f("#maxVal").text(Math.max(...r.map(i=>i.y)).toFixed(2))})}getEvolutionScore(){const t={vehicule_id:this.filter.vehicule_id,date_debut:this.datepipe.transform(new Date(this.date.getFullYear(),this.date.getMonth(),1),"yyyy-MM-dd"),date_fin:this.datepipe.transform(this.date,"yyyy-MM-dd")};this.geoLocalisationService.analyseConducteur(t).subscribe(r=>{this.genererGraphe("chart_score",r.score.map(i=>({x:this.datepipe.transform(i.date,"dd/MM"),y:i.score})),0),this.score.maximale=Math.max(...r.score.map(i=>i.score)).toFixed(2),this.score.minimal=Math.min(...r.score.map(i=>i.score)).toFixed(2)})}genererGraphe(t,r,i){this.myChart[i]&&this.myChart[i].destroy();const o={type:"line",data:{datasets:[{data:r,backgroundColor:"rgb(44, 123, 228)"}]},options:{maintainAspectRatio:!1,scales:{x:{grid:{drawOnChartArea:!1}},y:{grid:{drawOnChartArea:!1}}},plugins:{legend:{display:!1}}}};"driveTime"==this.filter.typeFilter&&(o.options={maintainAspectRatio:!1,scales:{x:{grid:{drawOnChartArea:!1}},y:{grid:{drawOnChartArea:!1},ticks:{callback:function(s){var l=Math.floor(s/3600),c=Math.floor(s%3600/60),d=Math.floor(s%60);return l.toString().padStart(2,"0")+":"+c.toString().padStart(2,"0")+":"+d.toString().padStart(2,"0")}}}},plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(s){var l=Math.floor(s.parsed.y/3600),c=Math.floor(s.parsed.y%3600/60),d=Math.floor(s.parsed.y%60);return l.toString().padStart(2,"0")+":"+c.toString().padStart(2,"0")+":"+d.toString().padStart(2,"0")}}}}}),this.myChart[i]=new M.kL(f("#"+t),o)}secondsToDhms(t){var r=Math.floor(t/3600),i=Math.floor(t%3600/60),o=Math.floor(t%60);return r.toString().padStart(2,"0")+":"+i.toString().padStart(2,"0")+":"+o.toString().padStart(2,"0")}toSeconds(t){var r=t.split(":");return 3600*+r[0]+60*+r[1]+ +r[2]}formateDate(t){return this.datepipe.transform(t,"dd-MM-yyyy")}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.uU),e.Y36(F.O),e.Y36(z.b))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-analyse-par-conducteur"]],decls:104,vars:17,consts:[[1,"row"],[1,"col-md-12"],[1,"text-primary","mb-6","h5"],[1,"dropdown","float-right","mb-6"],["type","button","data-bs-toggle","dropdown","data-bs-auto-close","outside","aria-haspopup","true","aria-expanded","false",1,"btn","btn-primary","shadow"],[1,"fa-solid","fa-arrow-down-wide-short"],[1,"dropdown-menu","dropdown-menu-end","dropdown-menu-card"],[1,"card-body"],[1,"list-group","list-group-flush","mt-n4","mb-4"],[1,"list-group-item","border-none"],[1,"col-auto"],[1,"form-group",2,"width","300px"],["for","vehicule_id"],["id","vehicule_id","name","vehicule_id",1,"form-select","form-select-sm",3,"ngModel","change","ngModelChange"],["disabled",""],[3,"value",4,"ngFor","ngForOf"],[1,"col"],[1,"form-group"],["id","type_chart","name","typeFilter",1,"form-select","form-select-sm",3,"ngModel","ngModelChange"],["value","","disabled",""],["value","acceleration","selected",""],["value","freinage"],["value","virrage_serre"],["value","driveTime"],["value","speedScore"],[1,"list-group-item"],[1,"row","gx-0","mb-3","frm-search-jms"],["searchForm","ngForm"],[1,"input-group"],["type","date","name","date_debut",1,"form-control","form-control-sm","mr",3,"ngModel","ngModelChange"],["type","date","name","date_fin",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["type","button",1,"btn","w-100","btn-outline-primary",3,"click"],[1,"card","bg","bg-white"],[1,"card-header"],["id","chart_conducteur"],[1,"card-header-title","txt-card"],[1,"badge","badge-warning","bg-primary"],["id","maxVal"],[1,"col-md-8"],[1,"card","bg"],["id","chart_score"],[1,"col-md-4"],[1,"card","pt-2"],[1,"card-header-title"],[1,"list-group","list-group-flush","list-group-activity","my-n3"],[1,"avatar","avatar-sm"],[1,"avatar-title","fs-lg","bg-primary-soft","rounded-circle","text-primary"],[1,"fa-solid","fa-car"],[1,"col","ms-n2"],[1,"mb-1"],[1,"text-muted"],[3,"value"]],template:function(t,r){1&t&&(e.TgZ(0,"div")(1,"div",0)(2,"div",0)(3,"div",1)(4,"small",2),e._uU(5),e.ALo(6,"date"),e.ALo(7,"date"),e.qZA(),e.TgZ(8,"div",3)(9,"button",4),e._UZ(10,"i",5),e._uU(11," Analyser par ... "),e.qZA(),e.TgZ(12,"form",6)(13,"div",7)(14,"div",8)(15,"div",9)(16,"div",0)(17,"div",10)(18,"div",11)(19,"label",12),e._uU(20,"Conducteurs"),e.qZA(),e.TgZ(21,"select",13),e.NdJ("change",function(o){return r.changeConducteur(o)})("ngModelChange",function(o){return r.filter.vehicule_id=o}),e.TgZ(22,"option",14),e._uU(23,"Veuillez choisir ..."),e.qZA(),e.YNc(24,bt,2,3,"option",15),e.qZA()()()()(),e.TgZ(25,"div",9)(26,"div",0)(27,"div",16)(28,"div",17)(29,"label",12),e._uU(30,"Type de graphe"),e.qZA(),e.TgZ(31,"select",18),e.NdJ("ngModelChange",function(o){return r.filter.typeFilter=o}),e.TgZ(32,"option",19),e._uU(33,"Veuillez choisir ..."),e.qZA(),e.TgZ(34,"option",20),e._uU(35,"Acceleration brusque"),e.qZA(),e.TgZ(36,"option",21),e._uU(37,"Freinage brusque"),e.qZA(),e.TgZ(38,"option",22),e._uU(39,"Comportement excessif"),e.qZA(),e.TgZ(40,"option",23),e._uU(41,"Temps de conduite"),e.qZA(),e.TgZ(42,"option",24),e._uU(43,"Score d'exc\xe8s de vitesse"),e.qZA()()()()()(),e.TgZ(44,"div",25)(45,"div",0)(46,"div",1)(47,"form",26,27)(49,"label"),e._uU(50,"P\xe9riode"),e.qZA(),e.TgZ(51,"div",28)(52,"input",29),e.NdJ("ngModelChange",function(o){return r.filter.date_debut=o}),e.qZA(),e.TgZ(53,"input",30),e.NdJ("ngModelChange",function(o){return r.filter.date_fin=o}),e.qZA()()()()()()(),e.TgZ(54,"button",31),e.NdJ("click",function(){return r.filterData()}),e._uU(55," Appliquer le filtre "),e.qZA()()()(),e.TgZ(56,"div",32)(57,"div",33),e._UZ(58,"canvas",34),e.qZA(),e.TgZ(59,"div",7)(60,"h4",35),e._uU(61),e.TgZ(62,"span",36),e._uU(63,"Max: "),e.TgZ(64,"span",37),e._uU(65,"_"),e.qZA()()()()()()(),e.TgZ(66,"div",0)(67,"div",38)(68,"div",39)(69,"div",33),e._UZ(70,"canvas",40),e.qZA(),e.TgZ(71,"div",7)(72,"h4",35),e._uU(73," \xc9volution de Score de ce mois "),e.qZA()()()(),e.TgZ(74,"div",41)(75,"div",42)(76,"div",33)(77,"h4",43),e._uU(78," Classement "),e.qZA()(),e.TgZ(79,"div",7)(80,"div",44)(81,"div",25)(82,"div",0)(83,"div",10)(84,"div",45)(85,"div",46),e._UZ(86,"i",47),e.qZA()()(),e.TgZ(87,"div",48)(88,"h5",49),e._uU(89," Score maximale "),e.qZA(),e.TgZ(90,"small",50),e._uU(91),e.qZA()()()()(),e.TgZ(92,"div",44)(93,"div",25)(94,"div",0)(95,"div",10)(96,"div",45)(97,"div",46),e._UZ(98,"i",47),e.qZA()()(),e.TgZ(99,"div",48)(100,"h5",49),e._uU(101," Score minimal "),e.qZA(),e.TgZ(102,"small",50),e._uU(103),e.qZA()()()()()()()()()()()),2&t&&(e.xp6(5),e.lnq(" ",r.filter.conducteur,": du ",e.xi3(6,11,r.filter.date_debut,"dd/MM/yyyy"),", au ",e.xi3(7,14,r.filter.date_fin,"dd/MM/yyyy")," "),e.xp6(16),e.Q6J("ngModel",r.filter.vehicule_id),e.xp6(3),e.Q6J("ngForOf",r.conducteurs),e.xp6(7),e.Q6J("ngModel",r.filter.typeFilter),e.xp6(21),e.Q6J("ngModel",r.filter.date_debut),e.xp6(1),e.Q6J("ngModel",r.filter.date_fin),e.xp6(8),e.hij(" ","acceleration"==r.filter.typeFilter?"Acceleration brusque":"freinage"==r.filter.typeFilter?"Freinage brusque":"virrage_serre"==r.filter.typeFilter?"Comportement excessif":"driveTime"==r.filter.typeFilter?"Temps de conduite":"speedScore"==r.filter.typeFilter?"Nbre des exc\xe8s de vitesse":""," "),e.xp6(30),e.hij("",r.score.maximale,"%"),e.xp6(12),e.hij("",r.score.minimal,"%"))},directives:[h._Y,h.JL,h.F,h.EJ,h.JJ,h.On,h.YN,h.Kr,p.sg,h.Fj],pipes:[p.uU],styles:[".card[_ngcontent-%COMP%]{box-shadow:0 .46875rem 2.1875rem #04091408,0 .9375rem 1.40625rem #04091408,0 .25rem .53125rem #0409140d,0 .125rem .1875rem #04091408!important}.card-header[_ngcontent-%COMP%]{display:inline-table}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline-block;vertical-align:top;padding:10px 20px;cursor:pointer;position:relative}canvas#chart_score[_ngcontent-%COMP%], #chart_conducteur[_ngcontent-%COMP%]{height:220px!important}.card[_ngcontent-%COMP%]{border:0;margin-bottom:30px;margin-top:30px;border-radius:6px;color:#333;background:#fff;width:100%;position:relative;display:flex;flex-direction:column;min-width:0;word-wrap:break-word}#chart_vehicule[_ngcontent-%COMP%], #chart_score[_ngcontent-%COMP%]{box-shadow:#0000003d 0 3px 8px;margin-top:-37px;background-color:#fff;border-radius:10px;padding:5px;width:100%;height:300px}.card-header[_ngcontent-%COMP%]{height:35px;border-bottom:none;padding-top:5px!important;padding-bottom:5px!important}.bg[_ngcontent-%COMP%]{background-color:#fafbfd;box-shadow:#0e1e251f 0 2px 4px,#0e1e2552 0 2px 16px}.card-header-title[_ngcontent-%COMP%]{font-weight:500}.txt-card[_ngcontent-%COMP%]{color:#515151!important}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:0}.dropdown-menu.show[_ngcontent-%COMP%]{display:block!important}.dropdown[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:5px 20px;border-radius:3px}.dropdown-menu[_ngcontent-%COMP%]{display:none!important}.dropdown[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:.2rem}.dropdown[_ngcontent-%COMP%]   .card-header-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{padding-top:10px!important;padding-bottom:6px!important}"]}),n})();var se=T(4238),be=T(4425);function xt(n,a){if(1&n&&(e.TgZ(0,"option",46),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.s9C("value",t.vehicule_id),e.xp6(1),e.AsE("",t.prenom," ",t.nom,"")}}let Tt=(()=>{class n{constructor(t,r,i,o){this.datepipe=t,this.geoLocalisationService=r,this.conducteurService=i,this.ecoconduiteService=o,this.date=new Date,this.infosGlobale={scoreGlobal:0,dureeConduite:0,distanceParcourue:0,nbTrajets:0},this.conducteurs=[],this.filter={vehicule_id:null,date_debut:this.datepipe.transform(new Date(this.date.getFullYear(),this.date.getMonth(),1),"yyyy-MM-dd"),date_fin:this.datepipe.transform(this.date,"yyyy-MM-dd"),conducteur:""},this.dataComportement=[],this.myChart=null}ngOnInit(){this.getAllConducteurs()}getAllConducteurs(){this.conducteurService.getConducteurs().subscribe(t=>{this.conducteurs=[...t].filter(r=>r.vehicule_id),this.conducteurs.length>0&&(this.filter.conducteur=this.conducteurs[0].prenom+" "+this.conducteurs[0].nom,this.filter.vehicule_id=this.conducteurs[0].vehicule_id,this.getResumeConducteur())})}getResumeConducteur(){var t=this;this.geoLocalisationService.getAnalyseVehicule(this.filter).subscribe(function(){var r=(0,D.Z)(function*(i){t.infosGlobale.distanceParcourue=i.distance.reduce((o,s)=>o+s.distance,0),t.infosGlobale.dureeConduite=t.secondsToDhms(i.driveTime.reduce((o,s)=>o+t.toSeconds(s.duree),0))});return function(i){return r.apply(this,arguments)}}()),this.ecoconduiteService.historiqueVehicule(this.filter.vehicule_id,{date_debut:this.filter.date_debut+"T00:00:00",date_fin:this.filter.date_fin+"T23:59:59"}).subscribe(r=>this.infosGlobale.nbTrajets=[...r.records].filter(i=>"trip"==i.genre).length),this.geoLocalisationService.analyseConducteur(this.filter).subscribe(r=>{this.dataComportement=[],this.dataComportement.push({x:"Score d'exc\xe8s de vitesse",y:this.claculMoy(r.speedScore)}),this.dataComportement.push({x:"Freinage brusque",y:this.claculMoy(r.freinage)}),this.dataComportement.push({x:"Comportement excessif",y:this.claculMoy(r.virrage_serre)}),this.dataComportement.push({x:"Acc\xe9l\xe9ration brusque",y:this.claculMoy(r.acceleration)}),this.infosGlobale.scoreGlobal=(this.dataComportement[0].y+this.dataComportement[1].y+this.dataComportement[2].y+this.dataComportement[3].y)/4,this.charComportement(this.dataComportement)})}changeConducteur(t){this.filter.conducteur=[...this.conducteurs].filter(r=>r.vehicule_id==t.target.value).map(r=>r.prenom+" "+r.nom),this.filter.vehicule_id=t.target.value}claculMoy(t){const r=[...t].filter(i=>0!=i.score);return[...r].length>0?[...r].reduce((i,o)=>i+o.score,0)/[...r].length:100}charComportement(t){this.myChart&&this.myChart.destroy(),this.myChart=new M.kL(f("#chart_test"),{type:"radar",data:{datasets:[{data:[...t].map(r=>r.y),label:"chart",borderColor:"rgba(44, 123, 228, 0.5)"}],labels:[...t].map(r=>r.x)},options:{maintainAspectRatio:!1,scales:{x:{grid:{drawOnChartArea:!1}},y:{grid:{drawOnChartArea:!1}}},plugins:{legend:{display:!1}}}})}toSeconds(t){var r=t.split(":");return 3600*+r[0]+60*+r[1]+ +r[2]}secondsToDhms(t){var r=Math.floor(t/3600),i=Math.floor(t%3600/60),o=Math.floor(t%60);return r.toString().padStart(2,"0")+":"+i.toString().padStart(2,"0")+":"+o.toString().padStart(2,"0")}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.uU),e.Y36(F.O),e.Y36(z.b),e.Y36(se.d))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-fiche-conducteur"]],decls:116,vars:52,consts:[[1,"row"],[1,"col-md-12"],[1,"col-auto"],[1,"text-primary","mb-6","h5"],[1,"dropdown","float-right"],["type","button","data-bs-toggle","dropdown","data-bs-auto-close","outside","aria-haspopup","true","aria-expanded","false",1,"btn","btn-primary","shadow"],[1,"fa-solid","fa-arrow-down-wide-short"],[1,"dropdown-menu","dropdown-menu-end","dropdown-menu-card"],[1,"card-body"],[1,"list-group","list-group-flush","mt-n4","mb-4"],[1,"list-group-item"],[1,"col"],[1,"form-group"],["for","vehicule_id"],["name","vehicule_id",1,"form-select","form-select-sm",3,"ngModel","ngModelChange","change"],["disabled",""],[3,"value",4,"ngFor","ngForOf"],[1,"row","gx-0","mb-3","frm-search-jms"],["searchForm","ngForm"],[1,"input-group"],["type","date","name","date_debut",1,"form-control","form-control-sm","mr-3",3,"ngModel","ngModelChange"],["type","date","name","date_fin",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["type","button",1,"btn","w-100","btn-outline-primary",3,"click"],[1,"row",2,"padding","0 10px"],[1,"main-card","mb-3","card"],[1,"no-gutters","row"],[1,"col-md-6","col-xl-3"],[1,"widget-content"],[1,"widget-content-wrapper"],[1,"widget-content-right","ml-0","mr-3"],[1,"widget-numbers","text-success"],[1,"widget-content-left"],[1,"widget-heading"],[1,"widget-numbers","text-warning"],[1,"widget-numbers","text-danger"],[1,"d-md-block","col-md-6","col-xl-3"],[1,"widget-numbers","text-primary"],[1,"col-md-6"],[1,"card"],[1,"card-header"],["id","chart_test",2,"height","150px"],[1,"col-md-3"],[1,"card-header-title"],[2,"display","block","margin","auto",3,"percent","space","radius","animation","animationDuration","showSubtitle"],[3,"percent","space","radius","innerStrokeWidth","outerStrokeColor","innerStrokeColor","animation","animationDuration","showSubtitle"],[3,"percent","space","radius","animation","animationDuration","outerStrokeColor","innerStrokeColor","showSubtitle"],[3,"value"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"small",3),e._uU(4),e.ALo(5,"date"),e.ALo(6,"date"),e.qZA(),e.TgZ(7,"div",4)(8,"button",5),e._UZ(9,"i",6),e._uU(10," Fiche de ... "),e.qZA(),e.TgZ(11,"form",7)(12,"div",8)(13,"div",9)(14,"div",10)(15,"div",0)(16,"div",11)(17,"div",12)(18,"label",13),e._uU(19,"V\xe9hicules"),e.qZA(),e.TgZ(20,"select",14),e.NdJ("ngModelChange",function(o){return r.filter.vehicule_id=o})("change",function(o){return r.changeConducteur(o)}),e.TgZ(21,"option",15),e._uU(22,"Veuillez choisir ..."),e.qZA(),e.YNc(23,xt,2,3,"option",16),e.qZA()()()()(),e.TgZ(24,"div",10)(25,"div",0)(26,"div",1)(27,"form",17,18)(29,"label"),e._uU(30,"P\xe9riode"),e.qZA(),e.TgZ(31,"div",19)(32,"input",20),e.NdJ("ngModelChange",function(o){return r.filter.date_debut=o}),e.qZA(),e.TgZ(33,"input",21),e.NdJ("ngModelChange",function(o){return r.filter.date_fin=o}),e.qZA()()()()()()(),e.TgZ(34,"button",22),e.NdJ("click",function(){return r.getResumeConducteur()}),e._uU(35," Appliquer le filtre "),e.qZA()()()()()()(),e.TgZ(36,"div",23)(37,"div",24)(38,"div",25)(39,"div",26)(40,"div",27)(41,"div",28)(42,"div",29)(43,"div",30),e._uU(44),e.qZA()(),e.TgZ(45,"div",31)(46,"div",32),e._uU(47,"Trajets"),e.qZA()()()()(),e.TgZ(48,"div",26)(49,"div",27)(50,"div",28)(51,"div",29)(52,"div",33),e._uU(53),e.qZA()(),e.TgZ(54,"div",31)(55,"div",32),e._uU(56,"Distance parcourue"),e.qZA()()()()(),e.TgZ(57,"div",26)(58,"div",27)(59,"div",28)(60,"div",29)(61,"div",34),e._uU(62),e.qZA()(),e.TgZ(63,"div",31)(64,"div",32),e._uU(65,"Dur\xe9e de conduite"),e.qZA()()()()(),e.TgZ(66,"div",35)(67,"div",27)(68,"div",28)(69,"div",29)(70,"div",36),e._uU(71),e.qZA()(),e.TgZ(72,"div",31)(73,"div",32),e._uU(74,"Score Global"),e.qZA()()()()()()()(),e.TgZ(75,"div",0)(76,"div",37)(77,"div",38),e._UZ(78,"div",39),e.TgZ(79,"div",8),e._UZ(80,"canvas",40),e.qZA()()(),e.TgZ(81,"div",41)(82,"div",1)(83,"div",38)(84,"div",39)(85,"h4",42),e._uU(86),e.qZA()(),e.TgZ(87,"div",8)(88,"div",0)(89,"div",1),e._UZ(90,"circle-progress",43),e.qZA()()()()(),e.TgZ(91,"div",1)(92,"div",38)(93,"div",39)(94,"h4",42),e._uU(95),e.qZA()(),e.TgZ(96,"div",8)(97,"div"),e._UZ(98,"circle-progress",44),e.qZA()()()()(),e.TgZ(99,"div",41)(100,"div",1)(101,"div",38)(102,"div",39)(103,"h4",42),e._uU(104),e.qZA()(),e.TgZ(105,"div",8)(106,"div"),e._UZ(107,"circle-progress",45),e.qZA()()()(),e.TgZ(108,"div",1)(109,"div",38)(110,"div",39)(111,"h4",42),e._uU(112),e.qZA()(),e.TgZ(113,"div",8)(114,"div"),e._UZ(115,"circle-progress",45),e.qZA()()()()()()),2&t&&(e.xp6(4),e.lnq(" ",r.filter.conducteur,": du ",e.xi3(5,46,r.filter.date_debut,"dd/MM/yyyy"),", au ",e.xi3(6,49,r.filter.date_fin,"dd/MM/yyyy")," "),e.xp6(16),e.Q6J("ngModel",r.filter.vehicule_id),e.xp6(3),e.Q6J("ngForOf",r.conducteurs),e.xp6(9),e.Q6J("ngModel",r.filter.date_debut),e.xp6(1),e.Q6J("ngModel",r.filter.date_fin),e.xp6(11),e.Oqu(r.infosGlobale.nbTrajets),e.xp6(9),e.hij("",null==r.infosGlobale.distanceParcourue?null:r.infosGlobale.distanceParcourue.toFixed(0)," Km"),e.xp6(9),e.Oqu(r.infosGlobale.dureeConduite),e.xp6(9),e.hij("",null==r.infosGlobale.scoreGlobal?null:r.infosGlobale.scoreGlobal.toFixed(0)," %"),e.xp6(15),e.hij(" ",null==r.dataComportement[0]?null:r.dataComportement[0].x," "),e.xp6(4),e.Q6J("percent",null==r.dataComportement[0]?null:r.dataComportement[0].y)("space",-10)("radius",50)("animation",!0)("animationDuration",1e3)("showSubtitle",!1),e.xp6(5),e.hij(" ",null==r.dataComportement[1]?null:r.dataComportement[1].x," "),e.xp6(3),e.Q6J("percent",null==r.dataComportement[1]?null:r.dataComportement[1].y)("space",-10)("radius",52)("innerStrokeWidth",7)("outerStrokeColor","#4882c2")("innerStrokeColor","rgba(72, 130, 194, 0.3)")("animation",!0)("animationDuration",1e3)("showSubtitle",!1),e.xp6(6),e.hij(" ",null==r.dataComportement[2]?null:r.dataComportement[2].x," "),e.xp6(3),e.Q6J("percent",null==r.dataComportement[2]?null:r.dataComportement[2].y)("space",-10)("radius",50)("animation",!0)("animationDuration",1e3)("outerStrokeColor","#dd0417")("innerStrokeColor","rgba(221, 4, 23, 0.3)")("showSubtitle",!1),e.xp6(5),e.hij(" ",null==r.dataComportement[3]?null:r.dataComportement[3].x," "),e.xp6(3),e.Q6J("percent",null==r.dataComportement[3]?null:r.dataComportement[3].y)("space",-10)("radius",50)("animation",!0)("animationDuration",1e3)("outerStrokeColor","#ec6708")("innerStrokeColor","rgba(236, 103, 8, 0.3)")("showSubtitle",!1))},directives:[h._Y,h.JL,h.F,h.EJ,h.JJ,h.On,h.YN,h.Kr,p.sg,h.Fj,be.nu],pipes:[p.uU],styles:[".widget-content[_ngcontent-%COMP%]{padding:1rem;flex-direction:row;align-items:center}.widget-content[_ngcontent-%COMP%]   .widget-content-wrapper[_ngcontent-%COMP%]{display:flex;flex:1;position:relative;align-items:center}.widget-content[_ngcontent-%COMP%]   .widget-numbers[_ngcontent-%COMP%]{font-weight:700;font-size:1.8rem;display:block}.widget-content[_ngcontent-%COMP%]   .widget-content-left[_ngcontent-%COMP%]   .widget-heading[_ngcontent-%COMP%]{opacity:.8;font-weight:700}.widget-content[_ngcontent-%COMP%]   .widget-content-left[_ngcontent-%COMP%]   .widget-subheading[_ngcontent-%COMP%]{opacity:.5}.mr-3[_ngcontent-%COMP%], .mx-3[_ngcontent-%COMP%]{margin-right:1rem!important}.ml-0[_ngcontent-%COMP%], .mx-0[_ngcontent-%COMP%]{margin-left:0!important}.card-header[_ngcontent-%COMP%]{height:35px;border-bottom:none;padding-top:5px!important;padding-bottom:5px!important}canvas[_ngcontent-%COMP%]{height:364px!important}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:0}.dropdown-menu.show[_ngcontent-%COMP%]{display:block!important}.dropdown[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:.2rem}.dropdown[_ngcontent-%COMP%]   .card-header-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{padding-top:10px!important;padding-bottom:6px!important}.dropdown[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:5px 20px;border-radius:3px}.dropdown-menu[_ngcontent-%COMP%]{display:none!important}.dropdown[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{margin-bottom:15px}"]}),n})();var le=T(4128),N=T(4004),ce=T(3900);const Mt=function(n){return{width:n}};function Zt(n,a){if(1&n&&(e.TgZ(0,"div",8)(1,"div",9)(2,"div",10)(3,"a",11),e._UZ(4,"img",12),e.qZA()(),e.TgZ(5,"div",13)(6,"h4",14)(7,"a"),e._uU(8),e.qZA()(),e.TgZ(9,"p",15)(10,"span",16),e._uU(11,"\u25cf"),e.qZA(),e._uU(12),e.qZA()(),e.TgZ(13,"div",10)(14,"div",17)(15,"div",10)(16,"div",18)(17,"div",19),e._uU(18),e.qZA()()()()()()()),2&n){const t=a.$implicit,r=a.index;e.xp6(4),e.s9C("src",0==r&&t.moy_score>=70||100==t.moy_score?"assets/img/cup-icon.png":"assets/img/driver.jpg",e.LSH),e.xp6(4),e.Oqu(t.nom_complet),e.xp6(4),e.hij("",t.matricule," "),e.xp6(5),e.s9C("ngClass",t.moy_score<70?"bg-danger":""),e.Q6J("ngStyle",e.VKq(6,Mt,t.moy_score<=25?"35%":t.moy_score+"%")),e.xp6(1),e.hij("",t.moy_score.toFixed(2),"%")}}function Ot(n,a){if(1&n&&(e.TgZ(0,"p",26),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",t.nom_complet," ")}}function St(n,a){if(1&n&&(e.TgZ(0,"div",21)(1,"div",8)(2,"div",0)(3,"div",10)(4,"div",22)(5,"div",23),e._UZ(6,"i",24),e.qZA()()(),e.TgZ(7,"div",13)(8,"h5",14),e._uU(9," Conducteur le plus dangereux "),e.qZA(),e.YNc(10,Ot,2,1,"p",25),e.qZA()()()()),2&n){const t=e.oxw(2);e.xp6(10),e.Q6J("ngForOf",t.classement.min)}}function At(n,a){if(1&n&&(e.TgZ(0,"p",26),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",t.nom_complet," ")}}function Ut(n,a){if(1&n&&(e.TgZ(0,"div",21)(1,"div",8)(2,"div",0)(3,"div",10)(4,"div",22)(5,"div",23),e._UZ(6,"i",24),e.qZA()()(),e.TgZ(7,"div",13)(8,"h5",14),e._uU(9," Conducteur le moins dangereux "),e.qZA(),e.YNc(10,At,2,1,"p",25),e.qZA()()()()),2&n){const t=e.oxw(2);e.xp6(10),e.Q6J("ngForOf",t.classement.max)}}function qt(n,a){if(1&n&&(e.TgZ(0,"div",2)(1,"div",3),e.YNc(2,St,11,1,"div",20),e.YNc(3,Ut,11,1,"div",20),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.classement.min.length>0),e.xp6(1),e.Q6J("ngIf",t.classement.max.length>0)}}let kt=(()=>{class n{constructor(t,r,i){this.conducteurService=t,this.geoLocalisationService=r,this.datePipe=i,this.date=new Date,this.conducteurs=[],this.classement={max:"",min:"",maxValeur:0,minValeur:0}}ngOnInit(){var t=this;return(0,D.Z)(function*(){const r=t.conducteurService.getConducteurs().pipe((0,N.U)(i=>i.filter(o=>o.vehicule_id)),(0,ce.w)(i=>(0,le.D)(i.map(t.getScoreByConducteur.bind(t)))));t.conducteurs=(yield r.toPromise()).sort((i,o)=>o.moy_score-i.moy_score),t.classement.maxValeur=Math.max(...t.conducteurs.map(i=>i.moy_score)),t.classement.minValeur=Math.min(...t.conducteurs.map(i=>i.moy_score)),t.classement.maxValeur>70&&(t.classement.max=[...t.conducteurs].filter(i=>i.moy_score==t.classement.maxValeur)),t.classement.minValeur<30&&(t.classement.min=[...t.conducteurs].filter(i=>i.moy_score==t.classement.minValeur))})()}getScoreByConducteur(t){const r={vehicule_id:t.vehicule_id,date_debut:this.datePipe.transform(new Date(this.date.getFullYear(),this.date.getMonth(),1),"yyyy-MM-dd"),date_fin:this.datePipe.transform(this.date,"yyyy-MM-dd")};return this.geoLocalisationService.analyseConducteur(r).pipe((0,N.U)(i=>({matricule:t.matricule,nom_complet:t.prenom+" "+t.nom,moy_score:[...i.score].filter(o=>o.score>0).reduce((o,s)=>o+s.score,0)/[...i.score].filter(o=>o.score>0).length})))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(z.b),e.Y36(F.O),e.Y36(p.uU))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-classement-conducteurs"]],decls:9,vars:2,consts:[[1,"row"],[1,"col-md-8"],[1,"card"],[1,"card-body"],[1,"list-group","list-group-flush","my-n3"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"col-md-4"],["class","card",4,"ngIf"],[1,"list-group-item"],[1,"row","align-items-center"],[1,"col-auto"],[1,"avatar"],["alt","...",1,"avatar-img","rounded-circle",3,"src"],[1,"col","ms-n2"],[1,"mb-1"],[1,"small","mb-0"],[1,"text-success"],[1,"row","align-items-center","g-0"],[1,"progress",2,"width","150px","height","11px"],["role","progressbar",1,"progress-bar","progress-bar-striped","bg-success","progress-bar-animated",3,"ngClass","ngStyle"],["class","list-group list-group-flush list-group-activity my-n3",4,"ngIf"],[1,"list-group","list-group-flush","list-group-activity","my-n3"],[1,"avatar","avatar-sm"],[1,"avatar-title","fs-lg","bg-primary-soft","rounded-circle","text-primary"],[1,"fa-solid","fa-car"],["class","small text-gray-700 mb-0",4,"ngFor","ngForOf"],[1,"small","text-gray-700","mb-0"]],template:function(t,r){1&t&&(e._UZ(0,"br"),e.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4),e.YNc(6,Zt,19,8,"div",5),e.qZA()()()(),e.TgZ(7,"div",6),e.YNc(8,qt,4,2,"div",7),e.qZA()()),2&t&&(e.xp6(6),e.Q6J("ngForOf",r.conducteurs),e.xp6(2),e.Q6J("ngIf",r.classement.min.length>0||r.classement.max.length>0))},directives:[p.sg,p.mk,p.PC,p.O5],styles:[""]}),n})();function Pt(n,a){1&n&&e._UZ(0,"app-comparaison-conducteurs")}function Dt(n,a){1&n&&e._UZ(0,"app-analyse-par-conducteur")}function Ft(n,a){1&n&&e._UZ(0,"app-fiche-conducteur")}function Nt(n,a){1&n&&e._UZ(0,"app-classement-conducteurs")}const de=function(n){return{active:n}};let Yt=(()=>{class n{constructor(){this.type="analyse-conducteurs"}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-globale-conducteur"]],decls:30,vars:16,consts:[[1,"header-body","shadow-sm","p-3","mb-5","bg-white","rounded"],[1,"align-items-end"],[1,"header-pretitle"],[1,"header-title"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"row","align-items-center"],[1,"col"],[1,"nav","nav-tabs","nav-overflow","header-tabs"],[1,"nav-item"],[1,"nav-link","active",3,"ngClass","click"],[1,"nav-link",3,"ngClass","click"],[1,"continents"],[4,"ngIf"]],template:function(t,r){1&t&&(e.TgZ(0,"section")(1,"div",0)(2,"div",1)(3,"h6",2),e._uU(4," \xc9co conduite "),e.qZA(),e.TgZ(5,"h2",3),e._uU(6," Analyse conducteurs "),e.qZA()()(),e.TgZ(7,"div",4)(8,"div",5)(9,"div",6)(10,"div",7)(11,"div",8)(12,"ul",9)(13,"li",10)(14,"button",11),e.NdJ("click",function(){return r.type="analyse-conducteurs"}),e._uU(15," Analye conducteurs "),e.qZA()(),e.TgZ(16,"li",10)(17,"button",12),e.NdJ("click",function(){return r.type="analyse-par-conducteur"}),e._uU(18," Analye par conducteur "),e.qZA()(),e.TgZ(19,"li",10)(20,"button",12),e.NdJ("click",function(){return r.type="fiche-conducteur"}),e._uU(21," Fiche conducteur "),e.qZA()(),e.TgZ(22,"li",10)(23,"button",12),e.NdJ("click",function(){return r.type="classement-conducteurs"}),e._uU(24," Classements des conducteurs "),e.qZA()()()()(),e.TgZ(25,"div",13),e.YNc(26,Pt,1,0,"app-comparaison-conducteurs",14),e.YNc(27,Dt,1,0,"app-analyse-par-conducteur",14),e.YNc(28,Ft,1,0,"app-fiche-conducteur",14),e.YNc(29,Nt,1,0,"app-classement-conducteurs",14),e.qZA()()()()()),2&t&&(e.xp6(14),e.Q6J("ngClass",e.VKq(8,de,"analyse-conducteurs"==r.type)),e.xp6(3),e.Q6J("ngClass",e.VKq(10,de,"analyse-par-conducteur"==r.type)),e.xp6(3),e.Q6J("ngClass",e.VKq(12,de,"fiche-conducteur"==r.type)),e.xp6(3),e.Q6J("ngClass",e.VKq(14,de,"classement-conducteurs"==r.type)),e.xp6(3),e.Q6J("ngIf","analyse-conducteurs"==r.type),e.xp6(1),e.Q6J("ngIf","analyse-par-conducteur"==r.type),e.xp6(1),e.Q6J("ngIf","fiche-conducteur"==r.type),e.xp6(1),e.Q6J("ngIf","classement-conducteurs"==r.type))},directives:[p.mk,p.O5,yt,wt,Tt,kt],styles:[""]}),n})();var K=T(9584);function Vt(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"input",31),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().filter.date_debut=i}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("ngModel",t.filter.date_debut)}}function Et(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"input",31),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().filter.date_debut=i}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("ngModel",t.filter.date_debut)}}function Jt(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"input",32),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().filter.date_fin=i}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("ngModel",t.filter.date_fin)}}function It(n,a){1&n&&(e.TgZ(0,"p",33),e._uU(1," Pas des donn\xe9es disponibles ... "),e.qZA())}function Qt(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"li",34)(1,"input",35),e.NdJ("click",function(i){const s=e.CHM(t).$implicit;return e.oxw().checkVehicules(i,s)}),e.qZA(),e._uU(2),e.qZA()}if(2&n){const t=a.$implicit;e.xp6(1),e.MGl("id","vehicule_",t.id,""),e.s9C("checked",t.checked),e.xp6(1),e.hij(" ",t.matricule," ")}}function Gt(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"li",34)(1,"input",35),e.NdJ("click",function(i){const s=e.CHM(t).$implicit;return e.oxw(3).checkChart(i,s.index)}),e.qZA(),e._uU(2),e.qZA()}if(2&n){const t=a.$implicit;e.xp6(1),e.MGl("id","chart_",t.index,""),e.s9C("checked",t.checked),e.xp6(1),e.hij(" ",t.libelle," ")}}function Lt(n,a){if(1&n&&(e.TgZ(0,"small",20)(1,"div",21),e._UZ(2,"i",22),e._uU(3," \xa0 "),e.qZA(),e.TgZ(4,"ul",23)(5,"h4",24),e._uU(6),e.qZA(),e.YNc(7,Gt,3,3,"li",25),e.TgZ(8,"strong",39),e._UZ(9,"i",27),e._uU(10),e.qZA()()()),2&n){const t=e.oxw(2);e.xp6(6),e.hij("Veuillez choisir ",t.maxChart," type :"),e.xp6(1),e.Q6J("ngForOf",t.chartSelected),e.xp6(3),e.hij(" Le maximum est ",t.maxChart," ")}}const we=function(n){return{"d-none":n}};function Wt(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"th",36)(1,"label",37),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.oxw().remplissageChartPrincipale(o.index)}),e._uU(2),e.qZA(),e.YNc(3,Lt,11,3,"small",38),e.qZA()}if(2&n){const t=a.$implicit;e.Gre("text-muted text-center col-chart col-chart-",t.index,""),e.Q6J("ngClass",e.VKq(6,we,!t.checked)),e.xp6(2),e.Oqu(t.libelle),e.xp6(1),e.Q6J("ngIf",t.last)}}function Ht(n,a){if(1&n&&(e.TgZ(0,"td",36)(1,"strong",44),e._uU(2,"_"),e.qZA(),e._UZ(3,"canvas",45),e.qZA()),2&n){const t=a.$implicit,r=e.oxw().$implicit;e.Gre("col-chart tchart chart-",t.index,""),e.Q6J("ngClass",e.VKq(8,we,!t.checked)),e.xp6(1),e.hYB("id","max_",r.id,"",t.index,""),e.xp6(2),e.hYB("id","chart_",r.id,"",t.index,"")}}const Rt=function(){return["/geolocalisation/historique"]};function jt(n,a){if(1&n&&(e.TgZ(0,"tr")(1,"td",40),e._uU(2),e._UZ(3,"br"),e.TgZ(4,"small",41),e._uU(5),e.qZA(),e._UZ(6,"br"),e.TgZ(7,"a",42),e._UZ(8,"i",43),e.qZA()(),e.YNc(9,Ht,4,10,"td",28),e.qZA()),2&n){const t=a.$implicit,r=e.oxw();e.xp6(2),e.hij(" ",t.matricule,""),e.xp6(3),e.Oqu(t.groupe),e.xp6(2),e.Q6J("routerLink",e.DdM(4,Rt)),e.xp6(2),e.Q6J("ngForOf",r.chartSelected)}}function Bt(n,a){1&n&&(e.TgZ(0,"tfoot")(1,"tr")(2,"td",46)(3,"p",47),e._uU(4," Pas des donn\xe9es disponibles ... "),e.qZA()()()())}let zt=(()=>{class n{constructor(t,r,i,o){this.vehiculeService=t,this.securiteClass=r,this.geoLocalisationService=i,this.datepipe=o,this.date=new Date,this.typeFilter="periode",this.filter={vehicule_id:null,date_debut:this.datepipe.transform(this.date,"yyyy-MM-dd"),date_fin:this.datepipe.transform(this.date,"yyyy-MM-dd")},this.colors=["56, 95, 158","247, 189, 1","20, 156, 56","94, 202, 223"],this.viewChartPrincipale=null,this.maxVehicule=2,this.maxChart=5,this.vehicules=[],this.vehiculesSelected=[],this.chartSelected=[{index:1,libelle:"Vitesse maximale Km",slug:"vitesse-moyenne",data:[]},{index:2,libelle:"Vitesse moyenne Km",slug:"vitesse-moyenne",data:[]},{index:3,libelle:"Co\xfbt du carburant Dh",slug:"vitesse-moyenne",data:[]},{index:4,libelle:"Distance parcourue Km",slug:"distance-parcourue",data:[]},{index:5,libelle:"Emission CO2 kg",slug:"emission-co2",data:[]},{index:6,libelle:"Temps de conduite",slug:"temps-conduite",data:[]},{index:7,libelle:"Consommation l/100km",slug:"Consommation-l-100km",data:[]}],this.myChart=[]}ngOnInit(){M.kL.register(...M.zX),this.getVehiculeWitheEco();for(let t=0;t<this.maxChart;t++)this.chartSelected[t].checked=!0;this.chartSelected[this.maxChart-1].last=!0,this.changeType("periode")}getVehiculeWitheEco(){var t=this;this.vehiculeService.getAll().subscribe(r=>{this.vehicules=r.filter(i=>i.eco_conduite);for(let i=0;i<this.maxVehicule;i++)this.checkVehicules(null,this.vehicules[i]),this.vehicules[i].checked=!0},function(){var r=(0,D.Z)(function*(i){401==i.status&&(yield t.securiteClass.refreshToken())&&t.getVehiculeWitheEco()});return function(i){return r.apply(this,arguments)}}())}checkVehicules(t,r){this.viewChartPrincipale=null,f(".tchart").removeClass("active"),f(".col-chart").removeClass("border-bottom"),null!=t?this.vehiculesSelected.length==this.maxVehicule?t.currentTarget.checked?(t.currentTarget.checked=!1,f(".mv-error").removeClass("d-none")):(this.chartSelected.forEach(i=>{i.data=i.data.filter(o=>o.matricule!=r.matricule)}),this.vehiculesSelected=this.vehiculesSelected.filter(i=>i.id!=r.id),f(".mv-error").addClass("d-none")):this.vehiculesSelected.length<this.maxVehicule&&(t.currentTarget.checked?(r.color=this.colors.filter(i=>!this.vehiculesSelected.map(o=>o.color).includes(i))[0],this.vehiculesSelected.push(r),this.getInformationsVehicule(r)):t.currentTarget.checked||(this.vehiculesSelected=this.vehiculesSelected.filter(i=>i.id!=r.id),this.chartSelected.forEach(i=>{i.data=i.data.filter(o=>o.matricule!=r.matricule)}))):(r.color=this.colors[this.vehiculesSelected.length],this.vehiculesSelected.push(r),this.getInformationsVehicule(r))}getInformationsVehicule(t){var r=null;this.filter.vehicule_id=t.id,this.geoLocalisationService.getAnalyseVehicule(this.filter).subscribe(i=>{this.chartSelected.forEach(o=>{1==o.index?r=i.maxSpeed.map(l=>({x:l.date_heure.toString(),y:l.average})):2==o.index?r=i.speedAverage.map(l=>({x:l.date_heure.toString(),y:l.average})):3==o.index?r=i.fuel.map(l=>({x:l.date_heure.toString(),y:Number(l.montant_carburant)})):4==o.index?r=i.distance.map(l=>({x:l.date_heure.toString(),y:l.distance})):5==o.index?r=i.carbone.map(l=>({x:l.date_heure.toString(),y:Number(l.CO2g)})):6==o.index?r=i.driveTime.map(l=>({x:l.date_heure.toString(),y:this.toSeconds(l.duree)})):7==o.index&&(r=i.l100.map(l=>({x:l.date_heure.toString(),y:Number(l.consommation)}))),this.chartSelected[o.index-1].data.push({values:r,matricule:t.matricule,color:t.color}),this.createChart(t.id+""+o.index,r,t,Math.max(...r.map(l=>l.y)),o.index)})})}formateDate(t){return"jour"==this.typeFilter?t.toString().padStart(2,"0")+":00":this.datepipe.transform(t,"dd-MM-yyyy")}createChart(t,r,i,o,s){this.myChart[t]&&this.myChart[t].destroy();const l={type:"line",data:{datasets:[{data:r,label:i.matricule,borderColor:"rgb("+i.color+")",fill:{target:"origin",above:"rgba("+i.color+",0.2)"},pointBackgroundColor:"rgba(76, 132, 255,0)",pointHoverBackgroundColor:"rgb(44, 122, 228)",pointBorderWidth:0,pointStyle:"rectRounded",borderWidth:1.5}]},options:{responsive:!0,scales:{x:{display:!1},y:{display:!1}},plugins:{legend:{display:!1}}}};this.myChart[t]=new M.kL(f("#chart_"+t),l),6==s?f("#max_"+t).text(this.secondsToDhms(o)):"-Infinity"!=o&&!isNaN(o)&&f("#max_"+t).text(o.toFixed(2))}remplissageChartPrincipale(t){this.chartSelected[t-1].data.length>=this.maxVehicule?(this.viewChartPrincipale=!0,f(".tchart").removeClass("active"),f(".chart-"+t).addClass("active"),f(".col-chart").removeClass("border-bottom"),f(".col-chart-"+t).addClass("border-bottom"),this.createChartPrincipale(this.chartSelected[t-1])):this.viewChartPrincipale=!1}traiterData(t,r){return[...r].forEach(i=>{0==[...t].filter(o=>o.x==i).length&&t.push({x:i,y:0})}),t="jour"==this.typeFilter?[...t].sort((i,o)=>Number(i.x)-Number(o.x)):[...t].sort((i,o)=>new Date(i.x).getTime()/1e3-new Date(o.x).getTime()/1e3),[...t].map(i=>({x:this.formateDate(i.x),y:i.y}))}createChartPrincipale(t){var r=f("#chart-principal");this.myChart[-1]&&this.myChart[-1].destroy();var i={type:"line",data:{datasets:[]},options:{maintainAspectRatio:!1,scales:{x:{grid:{drawOnChartArea:!1}},y:{grid:{drawOnChartArea:!1}}}}};let o=[];t.data.forEach(s=>{[...s.values].forEach(l=>{0==[...o].filter(c=>c==l.x).length&&o.push(l.x)})}),t.data.forEach(s=>{var l={data:this.traiterData(s.values,o),label:s.matricule,borderColor:"rgba("+s.color+",1)"};i.data.datasets.push(l)}),6==t.index&&(i.options={maintainAspectRatio:!1,scales:{x:{grid:{drawOnChartArea:!1}},y:{grid:{drawOnChartArea:!1},ticks:{callback:function(s){var l=Math.floor(s/3600),c=Math.floor(s%3600/60),d=Math.floor(s%60);return l.toString().padStart(2,"0")+":"+c.toString().padStart(2,"0")+":"+d.toString().padStart(2,"0")}}}},plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(s){var l=Math.floor(s.parsed.y/3600),c=Math.floor(s.parsed.y%3600/60),d=Math.floor(s.parsed.y%60);return l.toString().padStart(2,"0")+":"+c.toString().padStart(2,"0")+":"+d.toString().padStart(2,"0")}}}}}),this.myChart[-1]=new M.kL(r,i)}changeData(t){"jour"==t&&(this.filter.date_fin=this.filter.date_debut),this.typeFilter=t,this.viewChartPrincipale=null,f(".tchart").removeClass("active"),f(".col-chart").removeClass("border-bottom"),this.chartSelected.forEach(r=>{delete r.data,r.data=[]}),this.vehiculesSelected.forEach(r=>{this.getInformationsVehicule(r)})}checkChart(t,r){this.viewChartPrincipale=null,f(".tchart").removeClass("active"),f(".col-chart").removeClass("border-bottom");let i=this.chartSelected.filter(o=>1==o.checked);this.chartSelected[i[i.length-1].index-1].last=!1,t.currentTarget.checked?this.maxChart>i.length?this.chartSelected[r-1].checked=!0:(t.currentTarget.checked=!1,f(".mc-error").removeClass("d-none")):1==i.length?t.currentTarget.checked=!0:this.chartSelected[r-1].checked=null,i=this.chartSelected.filter(o=>1==o.checked),this.chartSelected[i[i.length-1].index-1].last=!0}entierAleatoire(t,r){return Math.floor(Math.random()*(r-t+1))+t}toSeconds(t){var r=t.split(":");return 3600*+r[0]+60*+r[1]+ +r[2]}secondsToDhms(t){var r=Math.floor(t/3600),i=Math.floor(t%3600/60),o=Math.floor(t%60);return r.toString().padStart(2,"0")+":"+i.toString().padStart(2,"0")+":"+o.toString().padStart(2,"0")}changeType(t){this.typeFilter=t,"jour"==t?this.filter.date_fin=this.filter.date_debut=this.datepipe.transform(this.date,"yyyy-MM-dd"):(this.filter.date_debut=this.datepipe.transform(new Date(this.date.getFullYear(),this.date.getMonth(),1),"yyyy-MM-dd"),this.filter.date_fin=this.datepipe.transform(this.date,"yyyy-MM-dd"))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(K.t),e.Y36(Ne.z),e.Y36(F.O),e.Y36(p.uU))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-comparaison-vehicule"]],decls:47,vars:13,consts:[[1,"row"],[1,"col-md-12"],[1,"row","gx-0","mb-3","frm-search-jms"],["searchForm","ngForm"],[1,"nav","nav-tabs","nav-tabs-sm","card-header-tabs"],["data-toggle","chart","data-target","#salesChart","data-trigger","click","data-action","toggle","data-dataset","0",1,"nav-item",3,"click"],["href","#","data-bs-toggle","tab",1,"nav-link"],["data-toggle","chart","data-target","#salesChart","data-trigger","click","data-action","toggle","data-dataset","2",1,"nav-item",3,"click"],["href","#","data-bs-toggle","tab",1,"nav-link","active"],[1,"input-group","mb-3"],["type","date","class","form-control form-control-sm","name","date_debut",3,"ngModel","ngModelChange",4,"ngIf"],["type","date","class","form-control form-control-sm","name","date_fin",3,"ngModel","ngModelChange",4,"ngIf"],[1,"input-group-append"],["type","button",1,"btn","btn-sm","btn-outline-primary",3,"click"],[1,"fas","fa-search"],["class","text-muted text-center mt-5",4,"ngIf"],[1,"principal-chart",3,"ngClass"],["id","chart-principal"],[1,"charts-par-vehicule","mb-7","mt-4"],[1,"col-vehicules","text-muted"],[1,"dropdown"],["role","button","data-bs-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"dropdown-ellipses","dropdown-toggle","float-right"],[1,"fas","fa-ellipsis-v"],[1,"dropdown-menu","dropdown-menu-end"],[1,"card-header-title","dropdown-item"],["class","dropdown-item",4,"ngFor","ngForOf"],[1,"text-danger","dropdown-item","d-none","mv-error"],[1,"fas","fa-exclamation-triangle"],[3,"class","ngClass",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[4,"ngIf"],["type","date","name","date_debut",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["type","date","name","date_fin",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"text-muted","text-center","mt-5"],[1,"dropdown-item"],["type","checkbox",1,"form-check-input","check-vehicule",3,"id","checked","click"],[3,"ngClass"],[1,"cursor",3,"click"],["class","dropdown",4,"ngIf"],[1,"text-danger","dropdown-item","d-none","mc-error"],[1,"matricule"],[1,"text-muted"],[1,"h2",3,"routerLink"],[1,"fa-solid","fa-location-dot","text-muted","mb-0"],[1,"text-dark","small",3,"id"],[1,"chat-vehicule",3,"id"],["colspan","5"],[1,"text-center","text-muted"]],template:function(t,r){1&t&&(e.TgZ(0,"div")(1,"div",0)(2,"div",1)(3,"form",2,3)(5,"ul",4)(6,"li",5),e.NdJ("click",function(){return r.changeType("jour")}),e.TgZ(7,"a",6),e._uU(8," Jour "),e.qZA()(),e.TgZ(9,"li",7),e.NdJ("click",function(){return r.changeType("periode")}),e.TgZ(10,"a",8),e._uU(11," P\xe9riode "),e.qZA()()(),e.TgZ(12,"div",9),e.YNc(13,Vt,1,1,"input",10),e.YNc(14,Et,1,1,"input",10),e.YNc(15,Jt,1,1,"input",11),e.TgZ(16,"div",12)(17,"button",13),e.NdJ("click",function(){return r.changeData(r.typeFilter)}),e._UZ(18,"i",14),e.qZA()()()()()(),e.TgZ(19,"div",0)(20,"div",1),e.YNc(21,It,2,0,"p",15),e.TgZ(22,"div",16),e._UZ(23,"canvas",17),e.qZA()()(),e.TgZ(24,"div",0)(25,"div",1)(26,"div",18)(27,"table")(28,"thead")(29,"tr")(30,"th",19),e._uU(31," \xa0\xa0V\xe9hicule "),e.TgZ(32,"small",20)(33,"div",21),e._UZ(34,"i",22),e._uU(35," \xa0 "),e.qZA(),e.TgZ(36,"ul",23)(37,"h4",24),e._uU(38),e.qZA(),e.YNc(39,Qt,3,3,"li",25),e.TgZ(40,"strong",26),e._UZ(41,"i",27),e._uU(42),e.qZA()()()(),e.YNc(43,Wt,4,8,"th",28),e.qZA()(),e.TgZ(44,"tbody"),e.YNc(45,jt,10,5,"tr",29),e.qZA(),e.YNc(46,Bt,5,0,"tfoot",30),e.qZA()()()()()),2&t&&(e.xp6(13),e.Q6J("ngIf","jour"==r.typeFilter),e.xp6(1),e.Q6J("ngIf","periode"==r.typeFilter),e.xp6(1),e.Q6J("ngIf","periode"==r.typeFilter),e.xp6(6),e.Q6J("ngIf",0==r.viewChartPrincipale),e.xp6(1),e.Q6J("ngClass",e.VKq(11,we,!r.viewChartPrincipale)),e.xp6(16),e.hij("Veuillez choisir ",r.maxVehicule," v\xe9hicules:"),e.xp6(1),e.Q6J("ngForOf",r.vehicules),e.xp6(3),e.hij(" Le maximum est ",r.maxVehicule," "),e.xp6(1),e.Q6J("ngForOf",r.chartSelected),e.xp6(2),e.Q6J("ngForOf",r.vehiculesSelected),e.xp6(1),e.Q6J("ngIf",0==r.vehiculesSelected.length))},directives:[h._Y,h.JL,h.F,p.O5,h.Fj,h.JJ,h.On,p.mk,p.sg,B.yS],styles:["th[_ngcontent-%COMP%]{width:16%}table[_ngcontent-%COMP%]{width:100%}.dropdown-menu-end[_ngcontent-%COMP%]{z-index:1040}.active[_ngcontent-%COMP%]{background-color:#196da833}#chart-principal[_ngcontent-%COMP%]{height:290px!important}.dropdown-menu[_ngcontent-%COMP%]{text-transform:initial!important}tfoot[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:20px 10px}td.matricule[_ngcontent-%COMP%]{padding-left:10px}.nav-tabs[_ngcontent-%COMP%]{font-size:14px}.form-search[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-left:13px}.card-header-tabs[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{background-color:transparent}.border-bottom[_ngcontent-%COMP%]{border-bottom:4px solid #196da8!important;color:#196da8!important}.frm-search-jms[_ngcontent-%COMP%]{width:250px;float:right}.dropdown-item[_ngcontent-%COMP%]{font-size:12px;padding:1px 10px}.dropdown-item[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]{margin-top:3px;width:12px;height:12px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{box-shadow:#0000003d 0 3px 8px;font-size:.625rem;color:#95aac9;background-color:#f9fbfd;font-weight:600;letter-spacing:.08em;text-transform:uppercase}table[_ngcontent-%COMP%]{background-color:#fff;box-shadow:#00000029 0 1px 4px}.principal-chart[_ngcontent-%COMP%]{box-shadow:#0000003d 0 3px 8px;margin-top:30px;padding:20px 30px;background-color:#fff;height:330px}ul.dropdown-menu.dropdown-menu-end.show[_ngcontent-%COMP%]{max-height:200px;overflow-y:scroll}canvas.chat-vehicule[_ngcontent-%COMP%]{height:9vh!important;width:15vw!important;margin:0 auto;display:block}label.cursor[_ngcontent-%COMP%]{width:80%}@media (max-width: 1842px){canvas.chat-vehicule[_ngcontent-%COMP%]{width:13vw!important}}@media (max-width: 1298px){canvas.chat-vehicule[_ngcontent-%COMP%]{width:10vw!important}}@media (max-width: 650px){.matricule[_ngcontent-%COMP%]{font-size:12px!important}}a.nav-link.active[_ngcontent-%COMP%]{padding-bottom:2px!important}"]}),n})();function u(n,a){if(a.length<n)throw new TypeError(n+" argument"+(n>1?"s":"")+" required, but only "+a.length+" present")}function m(n){u(1,arguments);var a=Object.prototype.toString.call(n);return n instanceof Date||"object"==typeof n&&"[object Date]"===a?new Date(n.getTime()):"number"==typeof n||"[object Number]"===a?new Date(n):(("string"==typeof n||"[object String]"===a)&&"undefined"!=typeof console&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}var Kt={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function xe(n){return function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=a.width?String(a.width):n.defaultWidth,r=n.formats[t]||n.formats[n.defaultWidth];return r}}var rn={date:xe({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:xe({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:xe({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},on={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function X(n){return function(a,t){var o,r=t||{};if("formatting"===(r.context?String(r.context):"standalone")&&n.formattingValues){var s=n.defaultFormattingWidth||n.defaultWidth,l=r.width?String(r.width):s;o=n.formattingValues[l]||n.formattingValues[s]}else{var c=n.defaultWidth,d=r.width?String(r.width):n.defaultWidth;o=n.values[d]||n.values[c]}return o[n.argumentCallback?n.argumentCallback(a):a]}}function $(n){return function(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.width,i=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],o=a.match(i);if(!o)return null;var d,s=o[0],l=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],c=Array.isArray(l)?Cn(l,function(w){return w.test(s)}):vn(l,function(w){return w.test(s)});d=n.valueCallback?n.valueCallback(c):c,d=t.valueCallback?t.valueCallback(d):d;var v=a.slice(s.length);return{value:d,rest:v}}}function vn(n,a){for(var t in n)if(n.hasOwnProperty(t)&&a(n[t]))return t}function Cn(n,a){for(var t=0;t<n.length;t++)if(a(n[t]))return t}const Ye={code:"en-US",formatDistance:function(n,a,t){var r,i=Kt[n];return r="string"==typeof i?i:1===a?i.one:i.other.replace("{{count}}",a.toString()),null!=t&&t.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r},formatLong:rn,formatRelative:function(n,a,t,r){return on[n]},localize:{ordinalNumber:function(n,a){var t=Number(n),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},era:X({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:X({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(n){return n-1}}),month:X({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:X({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:X({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:function yn(n){return function(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=a.match(n.matchPattern);if(!r)return null;var i=r[0],o=a.match(n.parsePattern);if(!o)return null;var s=n.valueCallback?n.valueCallback(o[0]):o[0];s=t.valueCallback?t.valueCallback(s):s;var l=a.slice(i.length);return{value:s,rest:l}}}({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(n){return parseInt(n,10)}}),era:$({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:$({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(n){return n+1}}),month:$({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:$({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:$({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function g(n){if(null===n||!0===n||!1===n)return NaN;var a=Number(n);return isNaN(a)?a:a<0?Math.ceil(a):Math.floor(a)}function ee(n,a){u(2,arguments);var t=m(n).getTime(),r=g(a);return new Date(t+r)}function Ve(n,a){u(2,arguments);var t=g(a);return ee(n,-t)}function Fn(n,a){if(null==n)throw new TypeError("assign requires that input parameter not be null or undefined");for(var t in a=a||{})Object.prototype.hasOwnProperty.call(a,t)&&(n[t]=a[t]);return n}function Ee(n,a){switch(n){case"P":return a.date({width:"short"});case"PP":return a.date({width:"medium"});case"PPP":return a.date({width:"long"});default:return a.date({width:"full"})}}function Je(n,a){switch(n){case"p":return a.time({width:"short"});case"pp":return a.time({width:"medium"});case"ppp":return a.time({width:"long"});default:return a.time({width:"full"})}}const Ie={p:Je,P:function Nn(n,a){var o,t=n.match(/(P+)(p+)?/)||[],r=t[1],i=t[2];if(!i)return Ee(n,a);switch(r){case"P":o=a.dateTime({width:"short"});break;case"PP":o=a.dateTime({width:"medium"});break;case"PPP":o=a.dateTime({width:"long"});break;default:o=a.dateTime({width:"full"})}return o.replace("{{date}}",Ee(r,a)).replace("{{time}}",Je(i,a))}};function ue(n){var a=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return a.setUTCFullYear(n.getFullYear()),n.getTime()-a.getTime()}var Vn=["D","DD"],En=["YY","YYYY"];function Qe(n){return-1!==Vn.indexOf(n)}function Ge(n){return-1!==En.indexOf(n)}function he(n,a,t){if("YYYY"===n)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(a,"`) for formatting years to the input `").concat(t,"`; see: https://git.io/fxCyr"));if("YY"===n)throw new RangeError("Use `yy` instead of `YY` (in `".concat(a,"`) for formatting years to the input `").concat(t,"`; see: https://git.io/fxCyr"));if("D"===n)throw new RangeError("Use `d` instead of `D` (in `".concat(a,"`) for formatting days of the month to the input `").concat(t,"`; see: https://git.io/fxCyr"));if("DD"===n)throw new RangeError("Use `dd` instead of `DD` (in `".concat(a,"`) for formatting days of the month to the input `").concat(t,"`; see: https://git.io/fxCyr"))}function J(n,a){u(1,arguments);var t=a||{},r=t.locale,i=r&&r.options&&r.options.weekStartsOn,o=null==i?0:g(i),s=null==t.weekStartsOn?o:g(t.weekStartsOn);if(!(s>=0&&s<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var l=m(n),c=l.getUTCDay(),d=(c<s?7:0)+c-s;return l.setUTCDate(l.getUTCDate()-d),l.setUTCHours(0,0,0,0),l}function Te(n,a){u(1,arguments);var t=m(n),r=t.getUTCFullYear(),i=a||{},o=i.locale,s=o&&o.options&&o.options.firstWeekContainsDate,l=null==s?1:g(s),c=null==i.firstWeekContainsDate?l:g(i.firstWeekContainsDate);if(!(c>=1&&c<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var d=new Date(0);d.setUTCFullYear(r+1,0,c),d.setUTCHours(0,0,0,0);var v=J(d,a),w=new Date(0);w.setUTCFullYear(r,0,c),w.setUTCHours(0,0,0,0);var k=J(w,a);return t.getTime()>=v.getTime()?r+1:t.getTime()>=k.getTime()?r:r-1}function Me(n,a,t){u(2,arguments);var r=t||{},i=r.locale,o=i&&i.options&&i.options.weekStartsOn,s=null==o?0:g(o),l=null==r.weekStartsOn?s:g(r.weekStartsOn);if(!(l>=0&&l<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var c=m(n),d=g(a),v=c.getUTCDay(),w=d%7,k=(w+7)%7,G=(k<l?7:0)+d-v;return c.setUTCDate(c.getUTCDate()+G),c}function W(n){u(1,arguments);var a=1,t=m(n),r=t.getUTCDay(),i=(r<a?7:0)+r-a;return t.setUTCDate(t.getUTCDate()-i),t.setUTCHours(0,0,0,0),t}function Le(n){u(1,arguments);var a=m(n),t=a.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(t+1,0,4),r.setUTCHours(0,0,0,0);var i=W(r),o=new Date(0);o.setUTCFullYear(t,0,4),o.setUTCHours(0,0,0,0);var s=W(o);return a.getTime()>=i.getTime()?t+1:a.getTime()>=s.getTime()?t:t-1}function In(n){u(1,arguments);var a=Le(n),t=new Date(0);t.setUTCFullYear(a,0,4),t.setUTCHours(0,0,0,0);var r=W(t);return r}var Qn=6048e5;function We(n){u(1,arguments);var a=m(n),t=W(a).getTime()-In(a).getTime();return Math.round(t/Qn)+1}function Ln(n,a){u(1,arguments);var t=a||{},r=t.locale,i=r&&r.options&&r.options.firstWeekContainsDate,o=null==i?1:g(i),s=null==t.firstWeekContainsDate?o:g(t.firstWeekContainsDate),l=Te(n,a),c=new Date(0);c.setUTCFullYear(l,0,s),c.setUTCHours(0,0,0,0);var d=J(c,a);return d}var Wn=6048e5;function He(n,a){u(1,arguments);var t=m(n),r=J(t,a).getTime()-Ln(t,a).getTime();return Math.round(r/Wn)+1}var b_month=/^(1[0-2]|0?\d)/,b_date=/^(3[0-1]|[0-2]?\d)/,b_dayOfYear=/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,b_week=/^(5[0-3]|[0-4]?\d)/,b_hour23h=/^(2[0-3]|[0-1]?\d)/,b_hour24h=/^(2[0-4]|[0-1]?\d)/,b_hour11h=/^(1[0-1]|0?\d)/,b_hour12h=/^(1[0-2]|0?\d)/,b_minute=/^[0-5]?\d/,b_second=/^[0-5]?\d/,b_singleDigit=/^\d/,b_twoDigits=/^\d{1,2}/,b_threeDigits=/^\d{1,3}/,b_fourDigits=/^\d{1,4}/,b_anyDigitsSigned=/^-?\d+/,b_singleDigitSigned=/^-?\d/,b_twoDigitsSigned=/^-?\d{1,2}/,b_threeDigitsSigned=/^-?\d{1,3}/,b_fourDigitsSigned=/^-?\d{1,4}/,U_basicOptionalMinutes=/^([+-])(\d{2})(\d{2})?|Z/,U_basic=/^([+-])(\d{2})(\d{2})|Z/,U_basicOptionalSeconds=/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,U_extended=/^([+-])(\d{2}):(\d{2})|Z/,U_extendedOptionalSeconds=/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/;function C(n,a,t){var r=a.match(n);if(!r)return null;var i=parseInt(r[0],10);return{value:t?t(i):i,rest:a.slice(r[0].length)}}function q(n,a){var t=a.match(n);return t?"Z"===t[0]?{value:0,rest:a.slice(1)}:{value:("+"===t[1]?1:-1)*(36e5*(t[2]?parseInt(t[2],10):0)+6e4*(t[3]?parseInt(t[3],10):0)+1e3*(t[5]?parseInt(t[5],10):0)),rest:a.slice(t[0].length)}:null}function Re(n,a){return C(b_anyDigitsSigned,n,a)}function y(n,a,t){switch(n){case 1:return C(b_singleDigit,a,t);case 2:return C(b_twoDigits,a,t);case 3:return C(b_threeDigits,a,t);case 4:return C(b_fourDigits,a,t);default:return C(new RegExp("^\\d{1,"+n+"}"),a,t)}}function me(n,a,t){switch(n){case 1:return C(b_singleDigitSigned,a,t);case 2:return C(b_twoDigitsSigned,a,t);case 3:return C(b_threeDigitsSigned,a,t);case 4:return C(b_fourDigitsSigned,a,t);default:return C(new RegExp("^-?\\d{1,"+n+"}"),a,t)}}function Ze(n){switch(n){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function je(n,a){var i,t=a>0,r=t?a:1-a;if(r<=50)i=n||100;else{var o=r+50;i=n+100*Math.floor(o/100)-(n>=o%100?100:0)}return t?i:1-i}var zn=[31,28,31,30,31,30,31,31,30,31,30,31],Kn=[31,29,31,30,31,30,31,31,30,31,30,31];function Be(n){return n%400==0||n%4==0&&n%100!=0}const $n={G:{priority:140,parse:function(n,a,t,r){switch(a){case"G":case"GG":case"GGG":return t.era(n,{width:"abbreviated"})||t.era(n,{width:"narrow"});case"GGGGG":return t.era(n,{width:"narrow"});default:return t.era(n,{width:"wide"})||t.era(n,{width:"abbreviated"})||t.era(n,{width:"narrow"})}},set:function(n,a,t,r){return a.era=t,n.setUTCFullYear(t,0,1),n.setUTCHours(0,0,0,0),n},incompatibleTokens:["R","u","t","T"]},y:{priority:130,parse:function(n,a,t,r){var i=function(o){return{year:o,isTwoDigitYear:"yy"===a}};switch(a){case"y":return y(4,n,i);case"yo":return t.ordinalNumber(n,{unit:"year",valueCallback:i});default:return y(a.length,n,i)}},validate:function(n,a,t){return a.isTwoDigitYear||a.year>0},set:function(n,a,t,r){var i=n.getUTCFullYear();if(t.isTwoDigitYear){var o=je(t.year,i);return n.setUTCFullYear(o,0,1),n.setUTCHours(0,0,0,0),n}return n.setUTCFullYear("era"in a&&1!==a.era?1-t.year:t.year,0,1),n.setUTCHours(0,0,0,0),n},incompatibleTokens:["Y","R","u","w","I","i","e","c","t","T"]},Y:{priority:130,parse:function(n,a,t,r){var i=function(o){return{year:o,isTwoDigitYear:"YY"===a}};switch(a){case"Y":return y(4,n,i);case"Yo":return t.ordinalNumber(n,{unit:"year",valueCallback:i});default:return y(a.length,n,i)}},validate:function(n,a,t){return a.isTwoDigitYear||a.year>0},set:function(n,a,t,r){var i=Te(n,r);if(t.isTwoDigitYear){var o=je(t.year,i);return n.setUTCFullYear(o,0,r.firstWeekContainsDate),n.setUTCHours(0,0,0,0),J(n,r)}return n.setUTCFullYear("era"in a&&1!==a.era?1-t.year:t.year,0,r.firstWeekContainsDate),n.setUTCHours(0,0,0,0),J(n,r)},incompatibleTokens:["y","R","u","Q","q","M","L","I","d","D","i","t","T"]},R:{priority:130,parse:function(n,a,t,r){return me("R"===a?4:a.length,n)},set:function(n,a,t,r){var i=new Date(0);return i.setUTCFullYear(t,0,4),i.setUTCHours(0,0,0,0),W(i)},incompatibleTokens:["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]},u:{priority:130,parse:function(n,a,t,r){return me("u"===a?4:a.length,n)},set:function(n,a,t,r){return n.setUTCFullYear(t,0,1),n.setUTCHours(0,0,0,0),n},incompatibleTokens:["G","y","Y","R","w","I","i","e","c","t","T"]},Q:{priority:120,parse:function(n,a,t,r){switch(a){case"Q":case"QQ":return y(a.length,n);case"Qo":return t.ordinalNumber(n,{unit:"quarter"});case"QQQ":return t.quarter(n,{width:"abbreviated",context:"formatting"})||t.quarter(n,{width:"narrow",context:"formatting"});case"QQQQQ":return t.quarter(n,{width:"narrow",context:"formatting"});default:return t.quarter(n,{width:"wide",context:"formatting"})||t.quarter(n,{width:"abbreviated",context:"formatting"})||t.quarter(n,{width:"narrow",context:"formatting"})}},validate:function(n,a,t){return a>=1&&a<=4},set:function(n,a,t,r){return n.setUTCMonth(3*(t-1),1),n.setUTCHours(0,0,0,0),n},incompatibleTokens:["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]},q:{priority:120,parse:function(n,a,t,r){switch(a){case"q":case"qq":return y(a.length,n);case"qo":return t.ordinalNumber(n,{unit:"quarter"});case"qqq":return t.quarter(n,{width:"abbreviated",context:"standalone"})||t.quarter(n,{width:"narrow",context:"standalone"});case"qqqqq":return t.quarter(n,{width:"narrow",context:"standalone"});default:return t.quarter(n,{width:"wide",context:"standalone"})||t.quarter(n,{width:"abbreviated",context:"standalone"})||t.quarter(n,{width:"narrow",context:"standalone"})}},validate:function(n,a,t){return a>=1&&a<=4},set:function(n,a,t,r){return n.setUTCMonth(3*(t-1),1),n.setUTCHours(0,0,0,0),n},incompatibleTokens:["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]},M:{priority:110,parse:function(n,a,t,r){var i=function(o){return o-1};switch(a){case"M":return C(b_month,n,i);case"MM":return y(2,n,i);case"Mo":return t.ordinalNumber(n,{unit:"month",valueCallback:i});case"MMM":return t.month(n,{width:"abbreviated",context:"formatting"})||t.month(n,{width:"narrow",context:"formatting"});case"MMMMM":return t.month(n,{width:"narrow",context:"formatting"});default:return t.month(n,{width:"wide",context:"formatting"})||t.month(n,{width:"abbreviated",context:"formatting"})||t.month(n,{width:"narrow",context:"formatting"})}},validate:function(n,a,t){return a>=0&&a<=11},set:function(n,a,t,r){return n.setUTCMonth(t,1),n.setUTCHours(0,0,0,0),n},incompatibleTokens:["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]},L:{priority:110,parse:function(n,a,t,r){var i=function(o){return o-1};switch(a){case"L":return C(b_month,n,i);case"LL":return y(2,n,i);case"Lo":return t.ordinalNumber(n,{unit:"month",valueCallback:i});case"LLL":return t.month(n,{width:"abbreviated",context:"standalone"})||t.month(n,{width:"narrow",context:"standalone"});case"LLLLL":return t.month(n,{width:"narrow",context:"standalone"});default:return t.month(n,{width:"wide",context:"standalone"})||t.month(n,{width:"abbreviated",context:"standalone"})||t.month(n,{width:"narrow",context:"standalone"})}},validate:function(n,a,t){return a>=0&&a<=11},set:function(n,a,t,r){return n.setUTCMonth(t,1),n.setUTCHours(0,0,0,0),n},incompatibleTokens:["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]},w:{priority:100,parse:function(n,a,t,r){switch(a){case"w":return C(b_week,n);case"wo":return t.ordinalNumber(n,{unit:"week"});default:return y(a.length,n)}},validate:function(n,a,t){return a>=1&&a<=53},set:function(n,a,t,r){return J(function Hn(n,a,t){u(2,arguments);var r=m(n),i=g(a),o=He(r,t)-i;return r.setUTCDate(r.getUTCDate()-7*o),r}(n,t,r),r)},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","i","t","T"]},I:{priority:100,parse:function(n,a,t,r){switch(a){case"I":return C(b_week,n);case"Io":return t.ordinalNumber(n,{unit:"week"});default:return y(a.length,n)}},validate:function(n,a,t){return a>=1&&a<=53},set:function(n,a,t,r){return W(function Gn(n,a){u(2,arguments);var t=m(n),r=g(a),i=We(t)-r;return t.setUTCDate(t.getUTCDate()-7*i),t}(n,t,r),r)},incompatibleTokens:["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]},d:{priority:90,subPriority:1,parse:function(n,a,t,r){switch(a){case"d":return C(b_date,n);case"do":return t.ordinalNumber(n,{unit:"date"});default:return y(a.length,n)}},validate:function(n,a,t){var i=Be(n.getUTCFullYear()),o=n.getUTCMonth();return i?a>=1&&a<=Kn[o]:a>=1&&a<=zn[o]},set:function(n,a,t,r){return n.setUTCDate(t),n.setUTCHours(0,0,0,0),n},incompatibleTokens:["Y","R","q","Q","w","I","D","i","e","c","t","T"]},D:{priority:90,subPriority:1,parse:function(n,a,t,r){switch(a){case"D":case"DD":return C(b_dayOfYear,n);case"Do":return t.ordinalNumber(n,{unit:"date"});default:return y(a.length,n)}},validate:function(n,a,t){return Be(n.getUTCFullYear())?a>=1&&a<=366:a>=1&&a<=365},set:function(n,a,t,r){return n.setUTCMonth(0,t),n.setUTCHours(0,0,0,0),n},incompatibleTokens:["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]},E:{priority:90,parse:function(n,a,t,r){switch(a){case"E":case"EE":case"EEE":return t.day(n,{width:"abbreviated",context:"formatting"})||t.day(n,{width:"short",context:"formatting"})||t.day(n,{width:"narrow",context:"formatting"});case"EEEEE":return t.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(n,{width:"short",context:"formatting"})||t.day(n,{width:"narrow",context:"formatting"});default:return t.day(n,{width:"wide",context:"formatting"})||t.day(n,{width:"abbreviated",context:"formatting"})||t.day(n,{width:"short",context:"formatting"})||t.day(n,{width:"narrow",context:"formatting"})}},validate:function(n,a,t){return a>=0&&a<=6},set:function(n,a,t,r){return(n=Me(n,t,r)).setUTCHours(0,0,0,0),n},incompatibleTokens:["D","i","e","c","t","T"]},e:{priority:90,parse:function(n,a,t,r){var i=function(o){var s=7*Math.floor((o-1)/7);return(o+r.weekStartsOn+6)%7+s};switch(a){case"e":case"ee":return y(a.length,n,i);case"eo":return t.ordinalNumber(n,{unit:"day",valueCallback:i});case"eee":return t.day(n,{width:"abbreviated",context:"formatting"})||t.day(n,{width:"short",context:"formatting"})||t.day(n,{width:"narrow",context:"formatting"});case"eeeee":return t.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(n,{width:"short",context:"formatting"})||t.day(n,{width:"narrow",context:"formatting"});default:return t.day(n,{width:"wide",context:"formatting"})||t.day(n,{width:"abbreviated",context:"formatting"})||t.day(n,{width:"short",context:"formatting"})||t.day(n,{width:"narrow",context:"formatting"})}},validate:function(n,a,t){return a>=0&&a<=6},set:function(n,a,t,r){return(n=Me(n,t,r)).setUTCHours(0,0,0,0),n},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]},c:{priority:90,parse:function(n,a,t,r){var i=function(o){var s=7*Math.floor((o-1)/7);return(o+r.weekStartsOn+6)%7+s};switch(a){case"c":case"cc":return y(a.length,n,i);case"co":return t.ordinalNumber(n,{unit:"day",valueCallback:i});case"ccc":return t.day(n,{width:"abbreviated",context:"standalone"})||t.day(n,{width:"short",context:"standalone"})||t.day(n,{width:"narrow",context:"standalone"});case"ccccc":return t.day(n,{width:"narrow",context:"standalone"});case"cccccc":return t.day(n,{width:"short",context:"standalone"})||t.day(n,{width:"narrow",context:"standalone"});default:return t.day(n,{width:"wide",context:"standalone"})||t.day(n,{width:"abbreviated",context:"standalone"})||t.day(n,{width:"short",context:"standalone"})||t.day(n,{width:"narrow",context:"standalone"})}},validate:function(n,a,t){return a>=0&&a<=6},set:function(n,a,t,r){return(n=Me(n,t,r)).setUTCHours(0,0,0,0),n},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]},i:{priority:90,parse:function(n,a,t,r){var i=function(o){return 0===o?7:o};switch(a){case"i":case"ii":return y(a.length,n);case"io":return t.ordinalNumber(n,{unit:"day"});case"iii":return t.day(n,{width:"abbreviated",context:"formatting",valueCallback:i})||t.day(n,{width:"short",context:"formatting",valueCallback:i})||t.day(n,{width:"narrow",context:"formatting",valueCallback:i});case"iiiii":return t.day(n,{width:"narrow",context:"formatting",valueCallback:i});case"iiiiii":return t.day(n,{width:"short",context:"formatting",valueCallback:i})||t.day(n,{width:"narrow",context:"formatting",valueCallback:i});default:return t.day(n,{width:"wide",context:"formatting",valueCallback:i})||t.day(n,{width:"abbreviated",context:"formatting",valueCallback:i})||t.day(n,{width:"short",context:"formatting",valueCallback:i})||t.day(n,{width:"narrow",context:"formatting",valueCallback:i})}},validate:function(n,a,t){return a>=1&&a<=7},set:function(n,a,t,r){return n=function Jn(n,a){u(2,arguments);var t=g(a);t%7==0&&(t-=7);var r=1,i=m(n),o=i.getUTCDay(),c=((t%7+7)%7<r?7:0)+t-o;return i.setUTCDate(i.getUTCDate()+c),i}(n,t,r),n.setUTCHours(0,0,0,0),n},incompatibleTokens:["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]},a:{priority:80,parse:function(n,a,t,r){switch(a){case"a":case"aa":case"aaa":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"})||t.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaaa":return t.dayPeriod(n,{width:"narrow",context:"formatting"});default:return t.dayPeriod(n,{width:"wide",context:"formatting"})||t.dayPeriod(n,{width:"abbreviated",context:"formatting"})||t.dayPeriod(n,{width:"narrow",context:"formatting"})}},set:function(n,a,t,r){return n.setUTCHours(Ze(t),0,0,0),n},incompatibleTokens:["b","B","H","k","t","T"]},b:{priority:80,parse:function(n,a,t,r){switch(a){case"b":case"bb":case"bbb":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"})||t.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbbb":return t.dayPeriod(n,{width:"narrow",context:"formatting"});default:return t.dayPeriod(n,{width:"wide",context:"formatting"})||t.dayPeriod(n,{width:"abbreviated",context:"formatting"})||t.dayPeriod(n,{width:"narrow",context:"formatting"})}},set:function(n,a,t,r){return n.setUTCHours(Ze(t),0,0,0),n},incompatibleTokens:["a","B","H","k","t","T"]},B:{priority:80,parse:function(n,a,t,r){switch(a){case"B":case"BB":case"BBB":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"})||t.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBBB":return t.dayPeriod(n,{width:"narrow",context:"formatting"});default:return t.dayPeriod(n,{width:"wide",context:"formatting"})||t.dayPeriod(n,{width:"abbreviated",context:"formatting"})||t.dayPeriod(n,{width:"narrow",context:"formatting"})}},set:function(n,a,t,r){return n.setUTCHours(Ze(t),0,0,0),n},incompatibleTokens:["a","b","t","T"]},h:{priority:70,parse:function(n,a,t,r){switch(a){case"h":return C(b_hour12h,n);case"ho":return t.ordinalNumber(n,{unit:"hour"});default:return y(a.length,n)}},validate:function(n,a,t){return a>=1&&a<=12},set:function(n,a,t,r){var i=n.getUTCHours()>=12;return n.setUTCHours(i&&t<12?t+12:i||12!==t?t:0,0,0,0),n},incompatibleTokens:["H","K","k","t","T"]},H:{priority:70,parse:function(n,a,t,r){switch(a){case"H":return C(b_hour23h,n);case"Ho":return t.ordinalNumber(n,{unit:"hour"});default:return y(a.length,n)}},validate:function(n,a,t){return a>=0&&a<=23},set:function(n,a,t,r){return n.setUTCHours(t,0,0,0),n},incompatibleTokens:["a","b","h","K","k","t","T"]},K:{priority:70,parse:function(n,a,t,r){switch(a){case"K":return C(b_hour11h,n);case"Ko":return t.ordinalNumber(n,{unit:"hour"});default:return y(a.length,n)}},validate:function(n,a,t){return a>=0&&a<=11},set:function(n,a,t,r){var i=n.getUTCHours()>=12;return n.setUTCHours(i&&t<12?t+12:t,0,0,0),n},incompatibleTokens:["h","H","k","t","T"]},k:{priority:70,parse:function(n,a,t,r){switch(a){case"k":return C(b_hour24h,n);case"ko":return t.ordinalNumber(n,{unit:"hour"});default:return y(a.length,n)}},validate:function(n,a,t){return a>=1&&a<=24},set:function(n,a,t,r){return n.setUTCHours(t<=24?t%24:t,0,0,0),n},incompatibleTokens:["a","b","h","H","K","t","T"]},m:{priority:60,parse:function(n,a,t,r){switch(a){case"m":return C(b_minute,n);case"mo":return t.ordinalNumber(n,{unit:"minute"});default:return y(a.length,n)}},validate:function(n,a,t){return a>=0&&a<=59},set:function(n,a,t,r){return n.setUTCMinutes(t,0,0),n},incompatibleTokens:["t","T"]},s:{priority:50,parse:function(n,a,t,r){switch(a){case"s":return C(b_second,n);case"so":return t.ordinalNumber(n,{unit:"second"});default:return y(a.length,n)}},validate:function(n,a,t){return a>=0&&a<=59},set:function(n,a,t,r){return n.setUTCSeconds(t,0),n},incompatibleTokens:["t","T"]},S:{priority:30,parse:function(n,a,t,r){return y(a.length,n,function(o){return Math.floor(o*Math.pow(10,3-a.length))})},set:function(n,a,t,r){return n.setUTCMilliseconds(t),n},incompatibleTokens:["t","T"]},X:{priority:10,parse:function(n,a,t,r){switch(a){case"X":return q(U_basicOptionalMinutes,n);case"XX":return q(U_basic,n);case"XXXX":return q(U_basicOptionalSeconds,n);case"XXXXX":return q(U_extendedOptionalSeconds,n);default:return q(U_extended,n)}},set:function(n,a,t,r){return a.timestampIsSet?n:new Date(n.getTime()-t)},incompatibleTokens:["t","T","x"]},x:{priority:10,parse:function(n,a,t,r){switch(a){case"x":return q(U_basicOptionalMinutes,n);case"xx":return q(U_basic,n);case"xxxx":return q(U_basicOptionalSeconds,n);case"xxxxx":return q(U_extendedOptionalSeconds,n);default:return q(U_extended,n)}},set:function(n,a,t,r){return a.timestampIsSet?n:new Date(n.getTime()-t)},incompatibleTokens:["t","T","X"]},t:{priority:40,parse:function(n,a,t,r){return Re(n)},set:function(n,a,t,r){return[new Date(1e3*t),{timestampIsSet:!0}]},incompatibleTokens:"*"},T:{priority:20,parse:function(n,a,t,r){return Re(n)},set:function(n,a,t,r){return[new Date(t),{timestampIsSet:!0}]},incompatibleTokens:"*"}};var tr=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,nr=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,rr=/^'([^]*?)'?$/,ar=/''/g,ir=/\S/,or=/[a-zA-Z]/;function lr(n,a){if(a.timestampIsSet)return n;var t=new Date(0);return t.setFullYear(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()),t.setHours(n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds(),n.getUTCMilliseconds()),t}function cr(n){return n.match(rr)[1].replace(ar,"'")}Math.pow(10,8);var Oe=6e4,Se=36e5,pe={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},hr=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,mr=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,pr=/^([+-])(\d{2})(?::?(\d{2}))?$/;function fr(n){var r,a={},t=n.split(pe.dateTimeDelimiter);if(t.length>2)return a;if(/:/.test(t[0])?r=t[0]:(a.date=t[0],r=t[1],pe.timeZoneDelimiter.test(a.date)&&(a.date=n.split(pe.timeZoneDelimiter)[0],r=n.substr(a.date.length,n.length))),r){var i=pe.timezone.exec(r);i?(a.time=r.replace(i[1],""),a.timezone=i[1]):a.time=r}return a}function gr(n,a){var t=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+a)+"})|(\\d{2}|[+-]\\d{"+(2+a)+"})$)"),r=n.match(t);if(!r)return{year:NaN,restDateString:""};var i=r[1]?parseInt(r[1]):null,o=r[2]?parseInt(r[2]):null;return{year:null===o?i:100*o,restDateString:n.slice((r[1]||r[2]).length)}}function _r(n,a){if(null===a)return new Date(NaN);var t=n.match(hr);if(!t)return new Date(NaN);var r=!!t[4],i=te(t[1]),o=te(t[2])-1,s=te(t[3]),l=te(t[4]),c=te(t[5])-1;if(r)return function Tr(n,a,t){return a>=1&&a<=53&&t>=0&&t<=6}(0,l,c)?function yr(n,a,t){var r=new Date(0);r.setUTCFullYear(n,0,4);var o=7*(a-1)+t+1-(r.getUTCDay()||7);return r.setUTCDate(r.getUTCDate()+o),r}(a,l,c):new Date(NaN);var d=new Date(0);return function wr(n,a,t){return a>=0&&a<=11&&t>=1&&t<=(br[a]||(ze(n)?29:28))}(a,o,s)&&function xr(n,a){return a>=1&&a<=(ze(n)?366:365)}(a,i)?(d.setUTCFullYear(a,o,Math.max(i,s)),d):new Date(NaN)}function te(n){return n?parseInt(n):1}function vr(n){var a=n.match(mr);if(!a)return NaN;var t=Ae(a[1]),r=Ae(a[2]),i=Ae(a[3]);return function Mr(n,a,t){return 24===n?0===a&&0===t:t>=0&&t<60&&a>=0&&a<60&&n>=0&&n<25}(t,r,i)?t*Se+r*Oe+1e3*i:NaN}function Ae(n){return n&&parseFloat(n.replace(",","."))||0}function Cr(n){if("Z"===n)return 0;var a=n.match(pr);if(!a)return 0;var t="+"===a[1]?-1:1,r=parseInt(a[2]),i=a[3]&&parseInt(a[3])||0;return function Zr(n,a){return a>=0&&a<=59}(0,i)?t*(r*Se+i*Oe):NaN}var br=[31,null,31,30,31,30,31,31,30,31,30,31];function ze(n){return n%400==0||n%4==0&&n%100!=0}function Or(n){return u(1,arguments),n instanceof Date||"object"==typeof n&&"[object Date]"===Object.prototype.toString.call(n)}function Ke(n){if(u(1,arguments),!Or(n)&&"number"!=typeof n)return!1;var a=m(n);return!isNaN(Number(a))}function _(n,a){for(var t=n<0?"-":"",r=Math.abs(n).toString();r.length<a;)r="0"+r;return t+r}const Y_y=function(n,a){var t=n.getUTCFullYear(),r=t>0?t:1-t;return _("yy"===a?r%100:r,a.length)},Y_M=function(n,a){var t=n.getUTCMonth();return"M"===a?String(t+1):_(t+1,2)},Y_d=function(n,a){return _(n.getUTCDate(),a.length)},Y_h=function(n,a){return _(n.getUTCHours()%12||12,a.length)},Y_H=function(n,a){return _(n.getUTCHours(),a.length)},Y_m=function(n,a){return _(n.getUTCMinutes(),a.length)},Y_s=function(n,a){return _(n.getUTCSeconds(),a.length)},Y_S=function(n,a){var t=a.length,r=n.getUTCMilliseconds();return _(Math.floor(r*Math.pow(10,t-3)),a.length)};function Xe(n,a){var t=n>0?"-":"+",r=Math.abs(n),i=Math.floor(r/60),o=r%60;if(0===o)return t+String(i);var s=a||"";return t+String(i)+s+_(o,2)}function $e(n,a){return n%60==0?(n>0?"-":"+")+_(Math.abs(n)/60,2):I(n,a)}function I(n,a){var t=a||"",r=n>0?"-":"+",i=Math.abs(n);return r+_(Math.floor(i/60),2)+t+_(i%60,2)}const kr={G:function(n,a,t){var r=n.getUTCFullYear()>0?1:0;switch(a){case"G":case"GG":case"GGG":return t.era(r,{width:"abbreviated"});case"GGGGG":return t.era(r,{width:"narrow"});default:return t.era(r,{width:"wide"})}},y:function(n,a,t){if("yo"===a){var r=n.getUTCFullYear();return t.ordinalNumber(r>0?r:1-r,{unit:"year"})}return Y_y(n,a)},Y:function(n,a,t,r){var i=Te(n,r),o=i>0?i:1-i;return"YY"===a?_(o%100,2):"Yo"===a?t.ordinalNumber(o,{unit:"year"}):_(o,a.length)},R:function(n,a){return _(Le(n),a.length)},u:function(n,a){return _(n.getUTCFullYear(),a.length)},Q:function(n,a,t){var r=Math.ceil((n.getUTCMonth()+1)/3);switch(a){case"Q":return String(r);case"QQ":return _(r,2);case"Qo":return t.ordinalNumber(r,{unit:"quarter"});case"QQQ":return t.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(r,{width:"narrow",context:"formatting"});default:return t.quarter(r,{width:"wide",context:"formatting"})}},q:function(n,a,t){var r=Math.ceil((n.getUTCMonth()+1)/3);switch(a){case"q":return String(r);case"qq":return _(r,2);case"qo":return t.ordinalNumber(r,{unit:"quarter"});case"qqq":return t.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(r,{width:"narrow",context:"standalone"});default:return t.quarter(r,{width:"wide",context:"standalone"})}},M:function(n,a,t){var r=n.getUTCMonth();switch(a){case"M":case"MM":return Y_M(n,a);case"Mo":return t.ordinalNumber(r+1,{unit:"month"});case"MMM":return t.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(r,{width:"narrow",context:"formatting"});default:return t.month(r,{width:"wide",context:"formatting"})}},L:function(n,a,t){var r=n.getUTCMonth();switch(a){case"L":return String(r+1);case"LL":return _(r+1,2);case"Lo":return t.ordinalNumber(r+1,{unit:"month"});case"LLL":return t.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(r,{width:"narrow",context:"standalone"});default:return t.month(r,{width:"wide",context:"standalone"})}},w:function(n,a,t,r){var i=He(n,r);return"wo"===a?t.ordinalNumber(i,{unit:"week"}):_(i,a.length)},I:function(n,a,t){var r=We(n);return"Io"===a?t.ordinalNumber(r,{unit:"week"}):_(r,a.length)},d:function(n,a,t){return"do"===a?t.ordinalNumber(n.getUTCDate(),{unit:"date"}):Y_d(n,a)},D:function(n,a,t){var r=function Ar(n){u(1,arguments);var a=m(n),t=a.getTime();a.setUTCMonth(0,1),a.setUTCHours(0,0,0,0);var r=a.getTime();return Math.floor((t-r)/864e5)+1}(n);return"Do"===a?t.ordinalNumber(r,{unit:"dayOfYear"}):_(r,a.length)},E:function(n,a,t){var r=n.getUTCDay();switch(a){case"E":case"EE":case"EEE":return t.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(r,{width:"short",context:"formatting"});default:return t.day(r,{width:"wide",context:"formatting"})}},e:function(n,a,t,r){var i=n.getUTCDay(),o=(i-r.weekStartsOn+8)%7||7;switch(a){case"e":return String(o);case"ee":return _(o,2);case"eo":return t.ordinalNumber(o,{unit:"day"});case"eee":return t.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(i,{width:"short",context:"formatting"});default:return t.day(i,{width:"wide",context:"formatting"})}},c:function(n,a,t,r){var i=n.getUTCDay(),o=(i-r.weekStartsOn+8)%7||7;switch(a){case"c":return String(o);case"cc":return _(o,a.length);case"co":return t.ordinalNumber(o,{unit:"day"});case"ccc":return t.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(i,{width:"narrow",context:"standalone"});case"cccccc":return t.day(i,{width:"short",context:"standalone"});default:return t.day(i,{width:"wide",context:"standalone"})}},i:function(n,a,t){var r=n.getUTCDay(),i=0===r?7:r;switch(a){case"i":return String(i);case"ii":return _(i,a.length);case"io":return t.ordinalNumber(i,{unit:"day"});case"iii":return t.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(r,{width:"short",context:"formatting"});default:return t.day(r,{width:"wide",context:"formatting"})}},a:function(n,a,t){var i=n.getUTCHours()/12>=1?"pm":"am";switch(a){case"a":case"aa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(i,{width:"narrow",context:"formatting"});default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(n,a,t){var i,r=n.getUTCHours();switch(i=12===r?"noon":0===r?"midnight":r/12>=1?"pm":"am",a){case"b":case"bb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(i,{width:"narrow",context:"formatting"});default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(n,a,t){var i,r=n.getUTCHours();switch(i=r>=17?"evening":r>=12?"afternoon":r>=4?"morning":"night",a){case"B":case"BB":case"BBB":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(i,{width:"narrow",context:"formatting"});default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(n,a,t){if("ho"===a){var r=n.getUTCHours()%12;return 0===r&&(r=12),t.ordinalNumber(r,{unit:"hour"})}return Y_h(n,a)},H:function(n,a,t){return"Ho"===a?t.ordinalNumber(n.getUTCHours(),{unit:"hour"}):Y_H(n,a)},K:function(n,a,t){var r=n.getUTCHours()%12;return"Ko"===a?t.ordinalNumber(r,{unit:"hour"}):_(r,a.length)},k:function(n,a,t){var r=n.getUTCHours();return 0===r&&(r=24),"ko"===a?t.ordinalNumber(r,{unit:"hour"}):_(r,a.length)},m:function(n,a,t){return"mo"===a?t.ordinalNumber(n.getUTCMinutes(),{unit:"minute"}):Y_m(n,a)},s:function(n,a,t){return"so"===a?t.ordinalNumber(n.getUTCSeconds(),{unit:"second"}):Y_s(n,a)},S:function(n,a){return Y_S(n,a)},X:function(n,a,t,r){var o=(r._originalDate||n).getTimezoneOffset();if(0===o)return"Z";switch(a){case"X":return $e(o);case"XXXX":case"XX":return I(o);default:return I(o,":")}},x:function(n,a,t,r){var o=(r._originalDate||n).getTimezoneOffset();switch(a){case"x":return $e(o);case"xxxx":case"xx":return I(o);default:return I(o,":")}},O:function(n,a,t,r){var o=(r._originalDate||n).getTimezoneOffset();switch(a){case"O":case"OO":case"OOO":return"GMT"+Xe(o,":");default:return"GMT"+I(o,":")}},z:function(n,a,t,r){var o=(r._originalDate||n).getTimezoneOffset();switch(a){case"z":case"zz":case"zzz":return"GMT"+Xe(o,":");default:return"GMT"+I(o,":")}},t:function(n,a,t,r){return _(Math.floor((r._originalDate||n).getTime()/1e3),a.length)},T:function(n,a,t,r){return _((r._originalDate||n).getTime(),a.length)}};var Pr=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Dr=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Fr=/^'([^]*?)'?$/,Nr=/''/g,Yr=/[a-zA-Z]/;function Er(n){return n.match(Fr)[1].replace(Nr,"'")}function et(n,a){u(2,arguments);var t=m(n),r=g(a);return isNaN(r)?new Date(NaN):(r&&t.setDate(t.getDate()+r),t)}function Ue(n,a){u(2,arguments);var t=m(n),r=g(a);if(isNaN(r))return new Date(NaN);if(!r)return t;var i=t.getDate(),o=new Date(t.getTime());o.setMonth(t.getMonth()+r+1,0);var s=o.getDate();return i>=s?o:(t.setFullYear(o.getFullYear(),o.getMonth(),i),t)}function fe(n,a){return u(2,arguments),m(n).getTime()-m(a).getTime()}var tt={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(n){return n<0?Math.ceil(n):Math.floor(n)}};function ne(n){return n?tt[n]:tt.trunc}function qe(n){u(1,arguments);var a=m(n);return a.setHours(0,0,0,0),a}function $r(n,a){u(2,arguments);var t=qe(n),r=qe(a),i=t.getTime()-ue(t),o=r.getTime()-ue(r);return Math.round((i-o)/864e5)}function nt(n,a){var t=n.getFullYear()-a.getFullYear()||n.getMonth()-a.getMonth()||n.getDate()-a.getDate()||n.getHours()-a.getHours()||n.getMinutes()-a.getMinutes()||n.getSeconds()-a.getSeconds()||n.getMilliseconds()-a.getMilliseconds();return t<0?-1:t>0?1:t}function rt(n,a){u(2,arguments);var t=m(n),r=m(a),i=nt(t,r),o=Math.abs($r(t,r));t.setDate(t.getDate()-i*o);var s=Number(nt(t,r)===-i),l=i*(o-s);return 0===l?0:l}function ta(n,a){u(2,arguments);var t=m(n),r=m(a),i=t.getFullYear()-r.getFullYear(),o=t.getMonth()-r.getMonth();return 12*i+o}function re(n,a){u(2,arguments);var t=m(n),r=m(a),i=t.getTime()-r.getTime();return i<0?-1:i>0?1:i}function at(n){u(1,arguments);var a=m(n);return a.setHours(23,59,59,999),a}function it(n){u(1,arguments);var a=m(n),t=a.getMonth();return a.setFullYear(a.getFullYear(),t+1,0),a.setHours(23,59,59,999),a}function na(n){u(1,arguments);var a=m(n);return at(a).getTime()===it(a).getTime()}function ot(n,a){u(2,arguments);var s,t=m(n),r=m(a),i=re(t,r),o=Math.abs(ta(t,r));if(o<1)s=0;else{1===t.getMonth()&&t.getDate()>27&&t.setDate(30),t.setMonth(t.getMonth()-i*o);var l=re(t,r)===-i;na(m(n))&&1===o&&1===re(n,r)&&(l=!1),s=i*(o-Number(l))}return 0===s?0:s}function aa(n,a){u(2,arguments);var t=m(n),r=m(a);return t.getFullYear()-r.getFullYear()}function st(n,a){u(1,arguments);var t=a||{},r=t.locale,i=r&&r.options&&r.options.weekStartsOn,o=null==i?0:g(i),s=null==t.weekStartsOn?o:g(t.weekStartsOn);if(!(s>=0&&s<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var l=m(n),c=l.getDay(),d=(c<s?7:0)+c-s;return l.setDate(l.getDate()-d),l.setHours(0,0,0,0),l}const va={datetime:"MMM d, yyyy, h:mm:ss aaaa",millisecond:"h:mm:ss.SSS aaaa",second:"h:mm:ss aaaa",minute:"h:mm aaaa",hour:"ha",day:"MMM d",week:"PP",month:"MMM yyyy",quarter:"qqq - yyyy",year:"yyyy"};function Ca(n,a){if(1&n&&(e.TgZ(0,"option",55),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.s9C("value",t.id),e.xp6(1),e.hij("",t.matricule," ")}}function ya(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"input",56),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().filter.date_debut=i}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("ngModel",t.filter.date_debut)}}function ba(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"input",56),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().filter.date_debut=i}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("ngModel",t.filter.date_debut)}}function wa(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"input",57),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().filter.date_fin=i}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("ngModel",t.filter.date_fin)}}M.IQ._date.override({_id:"date-fns",formats:function(){return va},parse:function(n,a){if(null==n)return null;const t=typeof n;return"number"===t||n instanceof Date?n=m(n):"string"===t&&(n="string"==typeof a?function sr(n,a,t,r){u(3,arguments);var i=String(n),o=String(a),s=r||{},l=s.locale||Ye;if(!l.match)throw new RangeError("locale must contain match property");var c=l.options&&l.options.firstWeekContainsDate,d=null==c?1:g(c),v=null==s.firstWeekContainsDate?d:g(s.firstWeekContainsDate);if(!(v>=1&&v<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var w=l.options&&l.options.weekStartsOn,k=null==w?0:g(w),G=null==s.weekStartsOn?k:g(s.weekStartsOn);if(!(G>=0&&G<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(""===o)return""===i?m(t):new Date(NaN);var P,R={firstWeekContainsDate:v,weekStartsOn:G,locale:l},L=[{priority:10,subPriority:-1,set:lr,index:0}],Z=o.match(nr).map(function(S){var A=S[0];return"p"===A||"P"===A?(0,Ie[A])(S,l.formatLong,R):S}).join("").match(tr),O=[];for(P=0;P<Z.length;P++){var x=Z[P];!s.useAdditionalWeekYearTokens&&Ge(x)&&he(x,o,n),!s.useAdditionalDayOfYearTokens&&Qe(x)&&he(x,o,n);var j=x[0],E=$n[j];if(E){var lt=E.incompatibleTokens;if(Array.isArray(lt)){for(var ke=void 0,_e=0;_e<O.length;_e++){var ct=O[_e].token;if(-1!==lt.indexOf(ct)||ct===j){ke=O[_e];break}}if(ke)throw new RangeError("The format string mustn't contain `".concat(ke.fullToken,"` and `").concat(x,"` at the same time"))}else if("*"===E.incompatibleTokens&&O.length)throw new RangeError("The format string mustn't contain `".concat(x,"` and any other token at the same time"));O.push({token:j,fullToken:x});var Pe=E.parse(i,x,l.match,R);if(!Pe)return new Date(NaN);L.push({priority:E.priority,subPriority:E.subPriority||0,set:E.set,validate:E.validate,value:Pe.value,index:L.length}),i=Pe.rest}else{if(j.match(or))throw new RangeError("Format string contains an unescaped latin alphabet character `"+j+"`");if("''"===x?x="'":"'"===j&&(x=cr(x)),0!==i.indexOf(x))return new Date(NaN);i=i.slice(x.length)}}if(i.length>0&&ir.test(i))return new Date(NaN);var dt=L.map(function(S){return S.priority}).sort(function(S,A){return A-S}).filter(function(S,A,oe){return oe.indexOf(S)===A}).map(function(S){return L.filter(function(A){return A.priority===S}).sort(function(A,oe){return oe.subPriority-A.subPriority})}).map(function(S){return S[0]}),De=m(t);if(isNaN(De))return new Date(NaN);var ae=Ve(De,ue(De)),ut={};for(P=0;P<dt.length;P++){var ie=dt[P];if(ie.validate&&!ie.validate(ae,ie.value,R))return new Date(NaN);var ve=ie.set(ae,ut,ie.value,R);ve[0]?(ae=ve[0],Fn(ut,ve[1])):ae=ve}return ae}(n,a,new Date,this.options):function ur(n,a){u(1,arguments);var t=a||{},r=null==t.additionalDigits?2:g(t.additionalDigits);if(2!==r&&1!==r&&0!==r)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!=typeof n&&"[object String]"!==Object.prototype.toString.call(n))return new Date(NaN);var o,i=fr(n);if(i.date){var s=gr(i.date,r);o=_r(s.restDateString,s.year)}if(!o||isNaN(o.getTime()))return new Date(NaN);var d,l=o.getTime(),c=0;if(i.time&&(c=vr(i.time),isNaN(c)))return new Date(NaN);if(!i.timezone){var v=new Date(l+c),w=new Date(0);return w.setFullYear(v.getUTCFullYear(),v.getUTCMonth(),v.getUTCDate()),w.setHours(v.getUTCHours(),v.getUTCMinutes(),v.getUTCSeconds(),v.getUTCMilliseconds()),w}return d=Cr(i.timezone),isNaN(d)?new Date(NaN):new Date(l+c+d)}(n,this.options)),Ke(n)?n.getTime():null},format:function(n,a){return function Vr(n,a,t){u(2,arguments);var r=String(a),i=t||{},o=i.locale||Ye,s=o.options&&o.options.firstWeekContainsDate,l=null==s?1:g(s),c=null==i.firstWeekContainsDate?l:g(i.firstWeekContainsDate);if(!(c>=1&&c<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var d=o.options&&o.options.weekStartsOn,v=null==d?0:g(d),w=null==i.weekStartsOn?v:g(i.weekStartsOn);if(!(w>=0&&w<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!o.localize)throw new RangeError("locale must contain localize property");if(!o.formatLong)throw new RangeError("locale must contain formatLong property");var k=m(n);if(!Ke(k))throw new RangeError("Invalid time value");var G=ue(k),R=Ve(k,G),L={firstWeekContainsDate:c,weekStartsOn:w,locale:o,_originalDate:k};return r.match(Dr).map(function(Z){var O=Z[0];return"p"===O||"P"===O?(0,Ie[O])(Z,o.formatLong,L):Z}).join("").match(Pr).map(function(Z){if("''"===Z)return"'";var O=Z[0];if("'"===O)return Er(Z);var x=kr[O];if(x)return!i.useAdditionalWeekYearTokens&&Ge(Z)&&he(Z,a,n),!i.useAdditionalDayOfYearTokens&&Qe(Z)&&he(Z,a,n),x(R,Z,o.localize,L);if(O.match(Yr))throw new RangeError("Format string contains an unescaped latin alphabet character `"+O+"`");return Z}).join("")}(n,a,this.options)},add:function(n,a,t){switch(t){case"millisecond":return ee(n,a);case"second":return function Jr(n,a){u(2,arguments);var t=g(a);return ee(n,1e3*t)}(n,a);case"minute":return function Qr(n,a){u(2,arguments);var t=g(a);return ee(n,6e4*t)}(n,a);case"hour":return function Lr(n,a){u(2,arguments);var t=g(a);return ee(n,36e5*t)}(n,a);case"day":return et(n,a);case"week":return function Wr(n,a){u(2,arguments);var t=g(a);return et(n,7*t)}(n,a);case"month":return Ue(n,a);case"quarter":return function Hr(n,a){u(2,arguments);var t=g(a);return Ue(n,3*t)}(n,a);case"year":return function Rr(n,a){u(2,arguments);var t=g(a);return Ue(n,12*t)}(n,a);default:return n}},diff:function(n,a,t){switch(t){case"millisecond":return fe(n,a);case"second":return function Br(n,a,t){u(2,arguments);var r=fe(n,a)/1e3;return ne(null==t?void 0:t.roundingMethod)(r)}(n,a);case"minute":return function zr(n,a,t){u(2,arguments);var r=fe(n,a)/Oe;return ne(null==t?void 0:t.roundingMethod)(r)}(n,a);case"hour":return function Kr(n,a,t){u(2,arguments);var r=fe(n,a)/Se;return ne(null==t?void 0:t.roundingMethod)(r)}(n,a);case"day":return rt(n,a);case"week":return function ea(n,a,t){u(2,arguments);var r=rt(n,a)/7;return ne(null==t?void 0:t.roundingMethod)(r)}(n,a);case"month":return ot(n,a);case"quarter":return function ra(n,a,t){u(2,arguments);var r=ot(n,a)/3;return ne(null==t?void 0:t.roundingMethod)(r)}(n,a);case"year":return function ia(n,a){u(2,arguments);var t=m(n),r=m(a),i=re(t,r),o=Math.abs(aa(t,r));t.setFullYear(1584),r.setFullYear(1584);var s=re(t,r)===-i,l=i*(o-Number(s));return 0===l?0:l}(n,a);default:return 0}},startOf:function(n,a,t){switch(a){case"second":return function oa(n){u(1,arguments);var a=m(n);return a.setMilliseconds(0),a}(n);case"minute":return function sa(n){u(1,arguments);var a=m(n);return a.setSeconds(0,0),a}(n);case"hour":return function la(n){u(1,arguments);var a=m(n);return a.setMinutes(0,0,0),a}(n);case"day":return qe(n);case"week":return st(n);case"isoWeek":return st(n,{weekStartsOn:+t});case"month":return function ca(n){u(1,arguments);var a=m(n);return a.setDate(1),a.setHours(0,0,0,0),a}(n);case"quarter":return function da(n){u(1,arguments);var a=m(n),t=a.getMonth();return a.setMonth(t-t%3,1),a.setHours(0,0,0,0),a}(n);case"year":return function ua(n){u(1,arguments);var a=m(n),t=new Date(0);return t.setFullYear(a.getFullYear(),0,1),t.setHours(0,0,0,0),t}(n);default:return n}},endOf:function(n,a){switch(a){case"second":return function ha(n){u(1,arguments);var a=m(n);return a.setMilliseconds(999),a}(n);case"minute":return function ma(n){u(1,arguments);var a=m(n);return a.setSeconds(59,999),a}(n);case"hour":return function pa(n){u(1,arguments);var a=m(n);return a.setMinutes(59,59,999),a}(n);case"day":return at(n);case"week":return function fa(n,a){u(1,arguments);var t=a||{},r=t.locale,i=r&&r.options&&r.options.weekStartsOn,o=null==i?0:g(i),s=null==t.weekStartsOn?o:g(t.weekStartsOn);if(!(s>=0&&s<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var l=m(n),c=l.getDay(),d=6+(c<s?-7:0)-(c-s);return l.setDate(l.getDate()+d),l.setHours(23,59,59,999),l}(n);case"month":return it(n);case"quarter":return function ga(n){u(1,arguments);var a=m(n),t=a.getMonth();return a.setMonth(t-t%3+3,0),a.setHours(23,59,59,999),a}(n);case"year":return function _a(n){u(1,arguments);var a=m(n),t=a.getFullYear();return a.setFullYear(t+1,0,0),a.setHours(23,59,59,999),a}(n);default:return n}}});let xa=(()=>{class n{constructor(t,r,i,o){this.geoLocalisationService=t,this.vehiculeService=r,this.datepipe=i,this.ecoconduiteService=o,this.date=new Date,this.typeFilter="jour",this.filter={vehicule_id:null,matricule:null,date_debut:this.datepipe.transform(this.date,"yyyy-MM-dd"),date_fin:this.datepipe.transform(this.date,"yyyy-MM-dd"),typeFilter:"maxSpeed"},this.vehicules=[],this.score={maximale:"",minimal:""},this.myChart=[]}ngOnInit(){var t=this;return(0,D.Z)(function*(){M.kL.register(...M.zX),t.vehicules=(yield t.vehiculeService.getAll().toPromise()).filter(r=>r.eco_conduite),t.vehicules.length>0&&(t.filter.vehicule_id=t.vehicules[0].id,t.filter.matricule=t.vehicules[0].matricule),t.getEvolutionScore(),t.changeType("periode"),t.filterData()})()}changeVehicule(t){this.filter.vehicule_id=t.target.value,this.filter.matricule=[...this.vehicules].filter(r=>r.id==t.target.value)[0].matricule,this.getEvolutionScore(),this.filterData()}filterData(){"jour"==this.typeFilter&&(this.filter.date_fin=this.filter.date_debut),this.geoLocalisationService.getAnalyseVehicule(this.filter).subscribe(t=>{var r=null;"maxSpeed"==this.filter.typeFilter||"speedAverage"==this.filter.typeFilter?r=t[this.filter.typeFilter].map(i=>({x:this.formateDate(i.date_heure),y:i.average})):"fuel"==this.filter.typeFilter?r=t[this.filter.typeFilter].map(i=>({x:this.formateDate(i.date_heure),y:Number(i.montant_carburant)})):"distance"==this.filter.typeFilter?r=t[this.filter.typeFilter].map(i=>({x:this.formateDate(i.date_heure),y:i.distance})):"carbone"==this.filter.typeFilter?r=t[this.filter.typeFilter].map(i=>({x:this.formateDate(i.date_heure),y:Number(i.CO2g)})):"driveTime"==this.filter.typeFilter?r=t[this.filter.typeFilter].map(i=>({x:this.formateDate(i.date_heure),y:this.toSeconds(i.duree),z:i.duree})):"l100"==this.filter.typeFilter&&(r=t[this.filter.typeFilter].map(i=>({x:this.formateDate(i.date_heure),y:Number(i.consommation)}))),this.genererGraphe("chart_vehicule",r,1),"driveTime"==this.filter.typeFilter?f("#maxVal").text(this.secondsToDhms(Math.max(...r.map(i=>i.y)))):f("#maxVal").text(Math.max(...r.map(i=>i.y)).toFixed(2))})}formateDate(t){return"jour"==this.typeFilter?t.toString().padStart(2,"0")+":00":this.datepipe.transform(t,"dd/MM")}getEvolutionScore(){const t={vehicule_id:this.filter.vehicule_id,date_debut:this.datepipe.transform(new Date(this.date.getFullYear(),this.date.getMonth(),1),"yyyy-MM-dd"),date_fin:this.datepipe.transform(this.date,"yyyy-MM-dd")};this.ecoconduiteService.evolutionScoreByVehicule(t).subscribe(r=>{this.genererGraphe("chart_score",r.map(i=>({x:this.datepipe.transform(i.date_operation,"dd/MM"),y:Number(i.score)})),0),this.score.maximale=Math.max(...r.map(i=>i.score)),this.score.minimal=Math.min(...r.map(i=>i.score))})}genererGraphe(t,r,i){this.myChart[i]&&this.myChart[i].destroy();const o={type:"line",data:{datasets:[{data:r,backgroundColor:"rgb(44, 123, 228)"}]},options:{maintainAspectRatio:!1,scales:{x:{grid:{drawOnChartArea:!1}},y:{grid:{drawOnChartArea:!1}}},plugins:{legend:{display:!1}}}};"driveTime"==this.filter.typeFilter&&(o.options={maintainAspectRatio:!1,scales:{x:{grid:{drawOnChartArea:!1}},y:{grid:{drawOnChartArea:!1},ticks:{callback:function(s){var l=Math.floor(s/3600),c=Math.floor(s%3600/60),d=Math.floor(s%60);return l.toString().padStart(2,"0")+":"+c.toString().padStart(2,"0")+":"+d.toString().padStart(2,"0")}}}},plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(s){var l=Math.floor(s.parsed.y/3600),c=Math.floor(s.parsed.y%3600/60),d=Math.floor(s.parsed.y%60);return l.toString().padStart(2,"0")+":"+c.toString().padStart(2,"0")+":"+d.toString().padStart(2,"0")}}}}}),this.myChart[i]=new M.kL(f("#"+t),o)}secondsToDhms(t){var r=Math.floor(t/3600),i=Math.floor(t%3600/60),o=Math.floor(t%60);return r.toString().padStart(2,"0")+":"+i.toString().padStart(2,"0")+":"+o.toString().padStart(2,"0")}toSeconds(t){var r=t.split(":");return 3600*+r[0]+60*+r[1]+ +r[2]}changeType(t){this.typeFilter=t,"jour"==t?this.filter.date_fin=this.filter.date_debut=this.datepipe.transform(this.date,"yyyy-MM-dd"):(this.filter.date_debut=this.datepipe.transform(new Date(this.date.getFullYear(),this.date.getMonth(),1),"yyyy-MM-dd"),this.filter.date_fin=this.datepipe.transform(this.date,"yyyy-MM-dd"))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(F.O),e.Y36(K.t),e.Y36(p.uU),e.Y36(se.d))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-analyse-par-vehicule"]],decls:114,vars:18,consts:[[1,"row"],[1,"col-md-12"],[1,"col-auto"],[1,"text-primary","mb-6","h5"],[1,"dropdown","float-right","row","mb-6"],["type","button","data-bs-toggle","dropdown","data-bs-auto-close","outside","aria-haspopup","true","aria-expanded","false",1,"btn","btn-primary","shadow"],[1,"fa-solid","fa-arrow-down-wide-short"],[1,"dropdown-menu","dropdown-menu-end","dropdown-menu-card"],[1,"card-body"],[1,"list-group","list-group-flush","mt-n4","mb-4"],[1,"list-group-item"],[1,"form-group",2,"width","300px","float","right"],["for","vehicule_id"],["name","vehicule_id",1,"form-select","form-select-sm",3,"ngModel","ngModelChange","change"],["value","null","disabled",""],[3,"value",4,"ngFor","ngForOf"],[1,"form-group"],["id","type_chart","name","typeFilter",1,"form-select","form-select-sm",3,"ngModel","ngModelChange"],["value","","disabled",""],["value","maxSpeed","selected",""],["value","speedAverage"],["value","fuel"],["value","distance"],["value","carbone"],["value","driveTime"],["value","l100"],[1,"col"],[1,"row","align-items-center"],[1,"nav","nav-tabs","nav-tabs-sm","card-header-tabs","mb-3"],["data-toggle","chart","data-target","#salesChart","data-trigger","click","data-action","toggle","data-dataset","0",1,"nav-item",3,"click"],["href","#","data-bs-toggle","tab",1,"nav-link"],["data-toggle","chart","data-target","#salesChart","data-trigger","click","data-action","toggle","data-dataset","2",1,"nav-item",3,"click"],["href","#","data-bs-toggle","tab",1,"nav-link","active"],[1,"input-group","mb-3"],["type","date","class","form-control form-control-sm","name","date_debut",3,"ngModel","ngModelChange",4,"ngIf"],["type","date","class","form-control form-control-sm","name","date_fin",3,"ngModel","ngModelChange",4,"ngIf"],["type","button",1,"btn","w-100","btn-outline-primary",3,"click"],[1,"card","bg"],[1,"card-header"],["id","chart_vehicule"],[1,"card-header-title","txt-card"],[1,"badge","badge-warning","bg-primary"],["id","maxVal"],[1,"col-md-8"],["id","chart_score"],[1,"col-md-4"],[1,"card","pt-2",2,"box-shadow","rgba(60, 64, 67, 0.3) 0px 1px 2px 0px, rgba(60, 64, 67, 0.15) 0px 2px 6px 2px"],[1,"card-header-title"],[1,"list-group","list-group-flush","list-group-activity","my-n3"],[1,"avatar","avatar-sm"],[1,"avatar-title","fs-lg","bg-primary-soft","rounded-circle","text-primary"],[1,"fa-solid","fa-car"],[1,"col","ms-n2"],[1,"mb-1"],[1,"text-muted"],[3,"value"],["type","date","name","date_debut",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["type","date","name","date_fin",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"]],template:function(t,r){1&t&&(e.TgZ(0,"div")(1,"div",0)(2,"div")(3,"div",0)(4,"div",1)(5,"div",2)(6,"small",3),e._uU(7),e.ALo(8,"date"),e.ALo(9,"date"),e.qZA(),e.TgZ(10,"div",4)(11,"button",5),e._UZ(12,"i",6),e._uU(13," Analyser par ... "),e.qZA(),e.TgZ(14,"form",7)(15,"div",8)(16,"div",9)(17,"div",10)(18,"div",2)(19,"div",11)(20,"label",12),e._uU(21,"V\xe9hicules"),e.qZA(),e.TgZ(22,"select",13),e.NdJ("ngModelChange",function(o){return r.filter.vehicule_id=o})("change",function(o){return r.changeVehicule(o)}),e.TgZ(23,"option",14),e._uU(24,"Veuillez choisir ..."),e.qZA(),e.YNc(25,Ca,2,2,"option",15),e.qZA()()()(),e.TgZ(26,"div",10)(27,"div",0)(28,"div",16)(29,"label",12),e._uU(30,"Type de graphe"),e.qZA(),e.TgZ(31,"select",17),e.NdJ("ngModelChange",function(o){return r.filter.typeFilter=o}),e.TgZ(32,"option",18),e._uU(33,"Veuillez choisir ..."),e.qZA(),e.TgZ(34,"option",19),e._uU(35,"Vitesse maximale"),e.qZA(),e.TgZ(36,"option",20),e._uU(37,"Vitesse moyenne"),e.qZA(),e.TgZ(38,"option",21),e._uU(39,"Consommation carburant"),e.qZA(),e.TgZ(40,"option",22),e._uU(41,"Distance parcourue"),e.qZA(),e.TgZ(42,"option",23),e._uU(43,"Emission CO2"),e.qZA(),e.TgZ(44,"option",24),e._uU(45,"Temps de conduite"),e.qZA(),e.TgZ(46,"option",25),e._uU(47,"Consommation l/100km"),e.qZA()()()()(),e.TgZ(48,"div",10)(49,"div",0)(50,"div",26)(51,"div",27)(52,"div",26)(53,"ul",28)(54,"li",29),e.NdJ("click",function(){return r.changeType("jour")}),e.TgZ(55,"a",30),e._uU(56," Jour "),e.qZA()(),e.TgZ(57,"li",31),e.NdJ("click",function(){return r.changeType("periode")}),e.TgZ(58,"a",32),e._uU(59," P\xe9riode "),e.qZA()()(),e.TgZ(60,"div",33),e.YNc(61,ya,1,1,"input",34),e.YNc(62,ba,1,1,"input",34),e.YNc(63,wa,1,1,"input",35),e.qZA()()()()()()(),e.TgZ(64,"button",36),e.NdJ("click",function(){return r.filterData()}),e._uU(65," Appliquer le filtre "),e.qZA()()()()(),e.TgZ(66,"div",37)(67,"div",38),e._UZ(68,"canvas",39),e.qZA(),e.TgZ(69,"div",8)(70,"h4",40),e._uU(71),e.TgZ(72,"span",41),e._uU(73,"Max: "),e.TgZ(74,"span",42),e._uU(75,"_"),e.qZA()()()()()()(),e.TgZ(76,"div",0)(77,"div",43)(78,"div",37)(79,"div",38),e._UZ(80,"canvas",44),e.qZA(),e.TgZ(81,"div",8)(82,"h4",40),e._uU(83," \xc9volution de Score de ce mois "),e.qZA()()()(),e.TgZ(84,"div",45)(85,"div",46)(86,"div",38)(87,"h4",47),e._uU(88," Classement "),e.qZA()(),e.TgZ(89,"div",8)(90,"div",48)(91,"div",10)(92,"div",0)(93,"div",2)(94,"div",49)(95,"div",50),e._UZ(96,"i",51),e.qZA()()(),e.TgZ(97,"div",52)(98,"h5",53),e._uU(99," Score maximale "),e.qZA(),e.TgZ(100,"small",54),e._uU(101),e.qZA()()()()(),e.TgZ(102,"div",48)(103,"div",10)(104,"div",0)(105,"div",2)(106,"div",49)(107,"div",50),e._UZ(108,"i",51),e.qZA()()(),e.TgZ(109,"div",52)(110,"h5",53),e._uU(111," Score minimal "),e.qZA(),e.TgZ(112,"small",54),e._uU(113),e.qZA()()()()()()()()()()()()),2&t&&(e.xp6(7),e.lnq(" ",r.filter.matricule," du:",e.xi3(8,12,r.filter.date_debut,"dd/MM/yyyy")," au:",e.xi3(9,15,r.filter.date_fin,"dd/MM/yyyy")," "),e.xp6(15),e.Q6J("ngModel",r.filter.vehicule_id),e.xp6(3),e.Q6J("ngForOf",r.vehicules),e.xp6(6),e.Q6J("ngModel",r.filter.typeFilter),e.xp6(30),e.Q6J("ngIf","jour"==r.typeFilter),e.xp6(1),e.Q6J("ngIf","periode"==r.typeFilter),e.xp6(1),e.Q6J("ngIf","periode"==r.typeFilter),e.xp6(8),e.hij(" ","speedAverage"==r.filter.typeFilter?"Vitesse moyenne":"fuel"==r.filter.typeFilter?"Consommation carburant":"distance"==r.filter.typeFilter?"Distance parcourue":"carbone"==r.filter.typeFilter?"Emission CO2":"driveTime"==r.filter.typeFilter?"Temps de conduite":"l100"==r.filter.typeFilter?"Consommation l/100km":"maxSpeed"==r.filter.typeFilter?"Vitesse maximale":""," "),e.xp6(30),e.hij("",r.score.maximale,"%"),e.xp6(12),e.hij("",r.score.minimal,"%"))},directives:[h._Y,h.JL,h.F,h.EJ,h.JJ,h.On,h.YN,h.Kr,p.sg,p.O5,h.Fj],pipes:[p.uU],styles:[".card[_ngcontent-%COMP%]{box-shadow:0 .46875rem 2.1875rem #04091408,0 .9375rem 1.40625rem #04091408,0 .25rem .53125rem #0409140d,0 .125rem .1875rem #04091408!important}.card-header[_ngcontent-%COMP%]{display:inline-table}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline-block;vertical-align:top;padding:10px 20px;cursor:pointer;position:relative}canvas#chart_score[_ngcontent-%COMP%]{height:220px!important}.card[_ngcontent-%COMP%]{border:0;margin-bottom:30px;margin-top:30px;border-radius:6px;color:#333;background:#fff;width:100%;position:relative;display:flex;flex-direction:column;min-width:0;word-wrap:break-word}#chart_vehicule[_ngcontent-%COMP%], #chart_score[_ngcontent-%COMP%]{box-shadow:#0000003d 0 3px 8px;margin-top:-37px;background-color:#fff;border-radius:10px;padding:5px;width:100%;height:300px}.card-header[_ngcontent-%COMP%]{height:35px;border-bottom:none;padding-top:5px!important;padding-bottom:5px!important}.bg[_ngcontent-%COMP%]{background-color:#fafbfd;box-shadow:#0e1e251f 0 2px 4px,#0e1e2552 0 2px 16px}.card-header-title[_ngcontent-%COMP%]{font-weight:500}.txt-card[_ngcontent-%COMP%]{color:#515151!important}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:0}.dropdown-menu.show[_ngcontent-%COMP%]{display:block!important}.dropdown[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:.2rem}.dropdown[_ngcontent-%COMP%]   .card-header-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{padding-top:10px!important;padding-bottom:6px!important}.dropdown[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:5px 20px;border-radius:3px}.dropdown-menu[_ngcontent-%COMP%]{display:none!important}"]}),n})();function Ta(n,a){if(1&n&&(e.TgZ(0,"option",67),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.s9C("value",t.id),e.xp6(1),e.hij(" ",t.matricule,"")}}function Ma(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"input",68),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().filter.date_debut=i}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("ngModel",t.filter.date_debut)}}function Za(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"input",68),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().filter.date_debut=i}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("ngModel",t.filter.date_debut)}}function Oa(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"input",69),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().filter.date_fin=i}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("ngModel",t.filter.date_fin)}}const Q=function(n){return{visible:n}};let Sa=(()=>{class n{constructor(t,r,i,o){this.geoLocalisationService=t,this.ecoconduiteService=r,this.vehiculeService=i,this.datePipe=o,this.date=new Date,this.typeFilter="jour",this.filter={vehicule_id:9,matricule:"",date_debut:this.datePipe.transform(this.date,"yyyy-MM-dd"),date_fin:this.datePipe.transform(this.date,"yyyy-MM-dd")},this.vehicules=[],this.infosGlobale={class_energetique:0,distanceParcourue:0,dureeConduite:0,fuelConsomme:0,consommationMoyenne:0,scoreGlobale:0,emissionCo2:0,empreinteCarbone:0}}ngOnInit(){this.getVehicleWithBalise(),this.changeType("periode"),this.getResumeVehicule()}getResumeVehicule(){var t=this;this.geoLocalisationService.getAnalyseVehicule(this.filter).subscribe(function(){var r=(0,D.Z)(function*(i){t.infosGlobale.distanceParcourue=i.distance.reduce((o,s)=>o+s.distance,0),t.infosGlobale.fuelConsomme=i.fuel.reduce((o,s)=>o+s.qte,0),t.infosGlobale.dureeConduite=t.secondsToDhms(i.driveTime.reduce((o,s)=>o+t.toSeconds(s.duree),0)),t.infosGlobale.consommationMoyenne=i.l100.reduce((o,s)=>o+s.consommation,0)/i.l100.length,t.infosGlobale.emissionCo2=i.carbone.reduce((o,s)=>o+s.CO2g,0),t.infosGlobale.empreinteCarbone=i.carbone.reduce((o,s)=>o+s.Cg,0),t.infosGlobale.scoreGlobale=(yield t.ecoconduiteService.scoreByVehicule(t.filter).toPromise()).new_score,t.infosGlobale.class_energetique=t.infosGlobale.emissionCo2/t.infosGlobale.distanceParcourue});return function(i){return r.apply(this,arguments)}}())}toSeconds(t){var r=t.split(":");return 3600*+r[0]+60*+r[1]+ +r[2]}secondsToDhms(t){var r=Math.floor(t/3600),i=Math.floor(t%3600/60),o=Math.floor(t%60);return r.toString().padStart(2,"0")+":"+i.toString().padStart(2,"0")+":"+o.toString().padStart(2,"0")}getVehicleWithBalise(){this.vehiculeService.getAll().subscribe(t=>{this.vehicules=t.filter(r=>r.balise),this.vehicules.length>0&&(this.filter.vehicule_id=this.vehicules[0].id,this.filter.matricule=this.vehicules[0].matricule)})}changeVehicule(t){this.getVehiculeById(t.target.value),this.filter.matricule=[...this.vehicules].filter(r=>r.id==t.target.value)[0].matricule}filterFun(){this.getResumeVehicule()}getVehiculeById(t){this.vehiculeService.getVehiculeById(t).subscribe(r=>this.filter.matricule=r.matricule)}changeType(t){this.typeFilter=t,"jour"==t?this.filter.date_fin=this.filter.date_debut=this.datePipe.transform(this.date,"yyyy-MM-dd"):(this.filter.date_debut=this.datePipe.transform(new Date(this.date.getFullYear(),this.date.getMonth(),1),"yyyy-MM-dd"),this.filter.date_fin=this.datePipe.transform(this.date,"yyyy-MM-dd"))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(F.O),e.Y36(se.d),e.Y36(K.t),e.Y36(p.uU))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-fiche-vehicule"]],decls:147,vars:43,consts:[[1,"row"],[1,"col-md-12"],[1,"col-auto"],[1,"text-primary","mb-6","h5"],[1,"dropdown","float-right"],["type","button","data-bs-toggle","dropdown","data-bs-auto-close","outside","aria-haspopup","true","aria-expanded","false",1,"btn","btn-primary","shadow"],[1,"fa-solid","fa-arrow-down-wide-short"],[1,"dropdown-menu","dropdown-menu-end","dropdown-menu-card",3,"ngSubmit"],["filerForm","ngForm"],[1,"card-body"],[1,"list-group","list-group-flush","mt-n4","mb-4"],[1,"list-group-item"],[1,"col"],[1,"form-group"],["for","vehicule_id"],["id","vehicule_id","name","vehicule_id",1,"form-select","form-select-sm",3,"ngModel","ngModelChange","change"],["value","null","disabled",""],[3,"value",4,"ngFor","ngForOf"],[1,"row","align-items-center"],[1,"nav","nav-tabs","nav-tabs-sm","card-header-tabs"],["data-toggle","chart","data-target","#salesChart","data-trigger","click","data-action","toggle","data-dataset","0",1,"nav-item",3,"click"],["href","#","data-bs-toggle","tab",1,"nav-link","active"],["data-toggle","chart","data-target","#salesChart","data-trigger","click","data-action","toggle","data-dataset","2",1,"nav-item",3,"click"],["href","#","data-bs-toggle","tab",1,"nav-link"],[1,"input-group","mb-3","mt-3"],["type","date","class","form-control form-control-sm","name","date_debut",3,"ngModel","ngModelChange",4,"ngIf"],["type","date","class","form-control form-control-sm","name","date_fin",3,"ngModel","ngModelChange",4,"ngIf"],["type","submit",1,"btn","w-100","btn-outline-primary"],[1,"row",2,"padding","0 10px"],[1,"main-card","mb-3","card"],[1,"no-gutters","row"],[1,"col-md-6","col-xl-4"],[1,"widget-content"],[1,"widget-content-wrapper"],[1,"widget-content-right","ml-0","mr-3"],[1,"widget-numbers","text-success"],[1,"widget-content-left"],[1,"widget-heading"],[1,"widget-numbers","text-warning"],[1,"widget-numbers","text-danger"],[1,"col-md-6"],[1,"card"],[1,"card-header"],[1,"card-header-title"],[1,"small","text-danger"],[1,"float-right"],[1,"energy-class","row"],[1,"col-md-7"],[1,"eca"],[1,"ecb"],[1,"ecc"],[1,"ecd"],[1,"ece"],[1,"ecf"],[1,"ecg"],[1,"col-md-5"],[2,"transform","rotate(180deg)"],[1,"_ecg","invisible",3,"ngClass"],[1,"_ecf","invisible",3,"ngClass"],[1,"_ece","invisible",3,"ngClass"],[1,"_ecd","invisible",3,"ngClass"],[1,"_ecc","invisible",3,"ngClass"],[1,"_ecb","invisible",3,"ngClass"],[1,"_eca","invisible",3,"ngClass"],[1,"col-md-3"],[1,"card","card_height"],[1,"text-center"],[3,"value"],["type","date","name","date_debut",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["type","date","name","date_fin",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"small",3),e._UZ(4,"br"),e._uU(5),e.ALo(6,"date"),e.ALo(7,"date"),e.qZA(),e.TgZ(8,"div",4)(9,"button",5),e._UZ(10,"i",6),e._uU(11," Fiche de ... "),e.qZA(),e.TgZ(12,"form",7,8),e.NdJ("ngSubmit",function(){return r.filterFun()}),e.TgZ(14,"div",9)(15,"div",10)(16,"div",11)(17,"div",0)(18,"div",12)(19,"div",13)(20,"label",14),e._uU(21,"V\xe9hicules"),e.qZA(),e.TgZ(22,"select",15),e.NdJ("ngModelChange",function(o){return r.filter.vehicule_id=o})("change",function(o){return r.changeVehicule(o)}),e.TgZ(23,"option",16),e._uU(24,"Veuillez choisir ..."),e.qZA(),e.YNc(25,Ta,2,2,"option",17),e.qZA()()()()(),e.TgZ(26,"div",11)(27,"div",0)(28,"div",12)(29,"div",18)(30,"div",12)(31,"ul",19)(32,"li",20),e.NdJ("click",function(){return r.changeType("jour")}),e.TgZ(33,"a",21),e._uU(34," Jour "),e.qZA()(),e.TgZ(35,"li",22),e.NdJ("click",function(){return r.changeType("periode")}),e.TgZ(36,"a",23),e._uU(37," P\xe9riode "),e.qZA()()(),e.TgZ(38,"div",24),e.YNc(39,Ma,1,1,"input",25),e.YNc(40,Za,1,1,"input",25),e.YNc(41,Oa,1,1,"input",26),e.qZA()()()()()()(),e.TgZ(42,"button",27),e._uU(43," Appliquer le filtre "),e.qZA()()()()()()(),e.TgZ(44,"div",28)(45,"div",29)(46,"div",30)(47,"div",31)(48,"div",32)(49,"div",33)(50,"div",34)(51,"div",35),e._uU(52),e.qZA()(),e.TgZ(53,"div",36)(54,"div",37),e._uU(55,"Distance parcourue"),e.qZA()()()()(),e.TgZ(56,"div",31)(57,"div",32)(58,"div",33)(59,"div",34)(60,"div",38),e._uU(61),e.qZA()(),e.TgZ(62,"div",36)(63,"div",37),e._uU(64,"Dur\xe9e de conduite"),e.qZA()()()()(),e.TgZ(65,"div",31)(66,"div",32)(67,"div",33)(68,"div",34)(69,"div",39),e._uU(70),e.qZA()(),e.TgZ(71,"div",36)(72,"div",37),e._uU(73,"Fuel consomm\xe9"),e.qZA()()()()()()()(),e.TgZ(74,"div",0)(75,"div",40)(76,"div",41)(77,"div",42)(78,"h4",43),e._uU(79," Class \xe9nerg\xe9tique ("),e.TgZ(80,"strong",44),e._uU(81,"g/CO2/km"),e.qZA(),e._uU(82,") "),e.qZA()(),e.TgZ(83,"div",9)(84,"strong",45),e._uU(85),e.qZA(),e._UZ(86,"br"),e.TgZ(87,"div",46)(88,"div",47),e._UZ(89,"div",48)(90,"div",49)(91,"div",50)(92,"div",51)(93,"div",52)(94,"div",53)(95,"div",54),e.qZA(),e.TgZ(96,"div",55)(97,"div",56),e._UZ(98,"div",57)(99,"div",58)(100,"div",59)(101,"div",60)(102,"div",61)(103,"div",62)(104,"div",63),e.qZA()()()()()(),e.TgZ(105,"div",64)(106,"div",1)(107,"div",65)(108,"div",42)(109,"h4",43),e._uU(110," Consommation moyenne "),e.qZA()(),e.TgZ(111,"div",9)(112,"h3",66),e._uU(113),e.TgZ(114,"small"),e._uU(115,"L/100Km"),e.qZA()()()()(),e.TgZ(116,"div",1)(117,"div",65)(118,"div",42)(119,"h4",43),e._uU(120," Emission Co2 "),e.qZA()(),e.TgZ(121,"div",9)(122,"h3",66),e._uU(123),e.TgZ(124,"small"),e._uU(125,"Kg "),e.qZA()()()()()(),e.TgZ(126,"div",64)(127,"div",1)(128,"div",65)(129,"div",42)(130,"h4",43),e._uU(131," Score globale "),e.qZA()(),e.TgZ(132,"div",9)(133,"h3",66),e._uU(134),e.TgZ(135,"small"),e._uU(136,"%"),e.qZA()()()()(),e.TgZ(137,"div",1)(138,"div",65)(139,"div",42)(140,"h4",43),e._uU(141," Empreinte carbone "),e.qZA()(),e.TgZ(142,"div",9)(143,"h3",66),e._uU(144),e.TgZ(145,"small"),e._uU(146,"Kg"),e.qZA()()()()()()()),2&t&&(e.xp6(5),e.lnq(" ",r.filter.matricule," du: ",e.xi3(6,23,r.filter.date_debut,"dd/MM/yyyy")," au: ",e.xi3(7,26,r.filter.date_fin,"dd/MM/yyyy")," "),e.xp6(17),e.Q6J("ngModel",r.filter.vehicule_id),e.xp6(3),e.Q6J("ngForOf",r.vehicules),e.xp6(14),e.Q6J("ngIf","jour"==r.typeFilter),e.xp6(1),e.Q6J("ngIf","periode"==r.typeFilter),e.xp6(1),e.Q6J("ngIf","periode"==r.typeFilter),e.xp6(11),e.hij("",null==r.infosGlobale.distanceParcourue?null:r.infosGlobale.distanceParcourue.toFixed()," Km "),e.xp6(9),e.Oqu(r.infosGlobale.dureeConduite),e.xp6(9),e.hij("",null==r.infosGlobale.fuelConsomme?null:r.infosGlobale.fuelConsomme.toFixed(2)," L"),e.xp6(15),e.hij(" \xc9missions= ",null==r.infosGlobale.class_energetique?null:r.infosGlobale.class_energetique.toFixed(2)," g/CO2/km"),e.xp6(13),e.Q6J("ngClass",e.VKq(29,Q,r.infosGlobale.class_energetique>250)),e.xp6(1),e.Q6J("ngClass",e.VKq(31,Q,r.infosGlobale.class_energetique>=201&&r.infosGlobale.class_energetique<=250)),e.xp6(1),e.Q6J("ngClass",e.VKq(33,Q,r.infosGlobale.class_energetique>=161&&r.infosGlobale.class_energetique<=200)),e.xp6(1),e.Q6J("ngClass",e.VKq(35,Q,r.infosGlobale.class_energetique>=141&&r.infosGlobale.class_energetique<=160)),e.xp6(1),e.Q6J("ngClass",e.VKq(37,Q,r.infosGlobale.class_energetique>=121&&r.infosGlobale.class_energetique<=140)),e.xp6(1),e.Q6J("ngClass",e.VKq(39,Q,r.infosGlobale.class_energetique>=101&&r.infosGlobale.class_energetique<=120)),e.xp6(1),e.Q6J("ngClass",e.VKq(41,Q,r.infosGlobale.class_energetique<=100)),e.xp6(9),e.hij(" ",r.infosGlobale.consommationMoyenne.toFixed(2)," "),e.xp6(10),e.hij(" ",r.infosGlobale.emissionCo2/1e3==null?null:(r.infosGlobale.emissionCo2/1e3).toFixed(2)," "),e.xp6(11),e.hij(" ",r.infosGlobale.scoreGlobale," "),e.xp6(10),e.hij(" ",r.infosGlobale.empreinteCarbone/1e3==null?null:(r.infosGlobale.empreinteCarbone/1e3).toFixed(2)," "))},directives:[h._Y,h.JL,h.F,h.EJ,h.JJ,h.On,h.YN,h.Kr,p.sg,p.O5,h.Fj,p.mk],pipes:[p.uU],styles:[".widget-content[_ngcontent-%COMP%]{padding:1rem;flex-direction:row;align-items:center}.widget-content[_ngcontent-%COMP%]   .widget-content-wrapper[_ngcontent-%COMP%]{display:flex;flex:1;position:relative;align-items:center}.widget-content[_ngcontent-%COMP%]   .widget-numbers[_ngcontent-%COMP%]{font-weight:700;font-size:1.8rem;display:block}.widget-content[_ngcontent-%COMP%]   .widget-content-left[_ngcontent-%COMP%]   .widget-heading[_ngcontent-%COMP%]{opacity:.8;font-weight:700}.widget-content[_ngcontent-%COMP%]   .widget-content-left[_ngcontent-%COMP%]   .widget-subheading[_ngcontent-%COMP%]{opacity:.5}.mr-3[_ngcontent-%COMP%], .mx-3[_ngcontent-%COMP%]{margin-right:1rem!important}.ml-0[_ngcontent-%COMP%], .mx-0[_ngcontent-%COMP%]{margin-left:0!important}.card-header[_ngcontent-%COMP%]{height:35px;border-bottom:none;padding-top:5px!important;padding-bottom:5px!important}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:0}.dropdown-menu.show[_ngcontent-%COMP%]{display:block!important}.dropdown[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:.2rem}.dropdown[_ngcontent-%COMP%]   .card-header-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{padding-top:10px!important;padding-bottom:6px!important}.dropdown[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:5px 20px;border-radius:3px}.dropdown-menu[_ngcontent-%COMP%]{display:none!important}.dropdown[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{margin-bottom:15px}.card_height[_ngcontent-%COMP%]{height:168px}.card_height[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:12px;font-size:30px;color:#2c7be4}"]}),n})();function Aa(n,a){1&n&&(e.TgZ(0,"span",20),e._uU(1,"\u25cf"),e.qZA())}const Ua=function(n){return{width:n}};function qa(n,a){if(1&n&&(e.TgZ(0,"div",8)(1,"div",9)(2,"div",10)(3,"a",11),e._UZ(4,"img",12),e.qZA()(),e.TgZ(5,"div",13)(6,"h4",14)(7,"a"),e._uU(8),e.qZA()(),e.TgZ(9,"p",15),e.YNc(10,Aa,2,0,"span",16),e._uU(11),e.qZA()(),e.TgZ(12,"div",10)(13,"div",17)(14,"div",10)(15,"div",18)(16,"div",19),e._uU(17),e.qZA()()()()()()()),2&n){const t=a.$implicit,r=a.index;e.xp6(4),e.s9C("src",0==r&&t.score>=70||100==t.score?"assets/img/cup-icon.png":"assets/img/car.jpg",e.LSH),e.xp6(4),e.Oqu(t.matricule),e.xp6(2),e.Q6J("ngIf",t.marque),e.xp6(1),e.hij("",t.marque," "),e.xp6(5),e.s9C("ngClass",t.score<70?"bg-danger":""),e.Q6J("ngStyle",e.VKq(7,Ua,t.score<=20?"30%":t.score+"%")),e.xp6(1),e.hij("",t.score,"%")}}function ka(n,a){if(1&n&&(e.TgZ(0,"div")(1,"p",27),e._uU(2),e.TgZ(3,"small",28),e._uU(4),e.qZA()()()),2&n){const t=a.$implicit;e.xp6(2),e.hij(" ",t.matricule," \xa0 "),e.xp6(2),e.hij(" ",t.marque," ")}}function Pa(n,a){if(1&n&&(e.TgZ(0,"div",22)(1,"div",8)(2,"div",0)(3,"div",10)(4,"div",23)(5,"div",24),e._UZ(6,"i",25),e.qZA()()(),e.TgZ(7,"div",13)(8,"h5",14),e._uU(9," V\xe9hicule(s) polluant "),e.qZA(),e.YNc(10,ka,5,2,"div",26),e.qZA()()()()),2&n){const t=e.oxw(2);e.xp6(10),e.Q6J("ngForOf",t.classement.min)}}function Da(n,a){if(1&n&&(e.TgZ(0,"div")(1,"p",27),e._uU(2),e.TgZ(3,"small",28),e._uU(4),e.qZA()()()),2&n){const t=a.$implicit;e.xp6(2),e.hij(" ",t.matricule," "),e.xp6(2),e.hij(" ",t.marque," ")}}function Fa(n,a){if(1&n&&(e.TgZ(0,"div",22)(1,"div",8)(2,"div",0)(3,"div",10)(4,"div",23)(5,"div",24),e._UZ(6,"i",25),e.qZA()()(),e.TgZ(7,"div",13)(8,"h5",14),e._uU(9," V\xe9hicule Eco "),e.qZA(),e.YNc(10,Da,5,2,"div",26),e.qZA()()()()),2&n){const t=e.oxw(2);e.xp6(10),e.Q6J("ngForOf",t.classement.max)}}function Na(n,a){if(1&n&&(e.TgZ(0,"div",2)(1,"div",3),e.YNc(2,Pa,11,1,"div",21),e.YNc(3,Fa,11,1,"div",21),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.classement.min.length>0),e.xp6(1),e.Q6J("ngIf",t.classement.max.length>0)}}let Ya=(()=>{class n{constructor(t,r,i,o){this.ecoconduiteService=t,this.vehiculeService=r,this.datePipe=i,this.geoLocalisationService=o,this.date=new Date,this.vehicules=[],this.classement={max:"",min:"",maxValeur:0,minValeur:0}}ngOnInit(){var t=this;return(0,D.Z)(function*(){const r=yield t.vehiculeService.getAll().pipe((0,N.U)(i=>i.filter(o=>o.eco_conduite)),(0,ce.w)(i=>(0,le.D)(i.map(t.scoreByVehicule.bind(t))))).toPromise();t.vehicules=[...r].sort((i,o)=>o.score-i.score),t.classement.maxValeur=Math.max(...t.vehicules.map(i=>i.score)),t.classement.minValeur=Math.min(...t.vehicules.map(i=>i.score)),t.classement.maxValeur>70&&(t.classement.max=[...t.vehicules].filter(i=>i.score==t.classement.maxValeur)),t.classement.minValeur<30&&(t.classement.min=[...t.vehicules].filter(i=>i.score==t.classement.maxValeur))})()}scoreByVehicule(t){const r={vehicule_id:t.id,date_debut:this.datePipe.transform(new Date(this.date.getFullYear(),this.date.getMonth(),1),"yyyy-MM-dd"),date_fin:this.datePipe.transform(this.date,"yyyy-MM-dd")};return this.ecoconduiteService.scoreByVehicule(r).pipe((0,N.U)(i=>({matricule:t.matricule,vehicule_id:t.id,score:null==i.new_score?100:i.new_score})))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(se.d),e.Y36(K.t),e.Y36(p.uU),e.Y36(F.O))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-classement-vehicule"]],decls:8,vars:2,consts:[[1,"row"],[1,"col-md-8"],[1,"card"],[1,"card-body"],[1,"list-group","list-group-flush","my-n3"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"col-md-4"],["class","card",4,"ngIf"],[1,"list-group-item"],[1,"row","align-items-center"],[1,"col-auto"],[1,"avatar"],["alt","...",1,"avatar-img","rounded-circle",3,"src"],[1,"col","ms-n2"],[1,"mb-1"],[1,"small","mb-0"],["class","text-success",4,"ngIf"],[1,"row","align-items-center","g-0"],[1,"progress",2,"width","150px","height","11px"],["role","progressbar",1,"progress-bar","progress-bar-striped","bg-success","progress-bar-animated",3,"ngClass","ngStyle"],[1,"text-success"],["class","list-group list-group-flush list-group-activity my-n3",4,"ngIf"],[1,"list-group","list-group-flush","list-group-activity","my-n3"],[1,"avatar","avatar-sm"],[1,"avatar-title","fs-lg","bg-primary-soft","rounded-circle","text-primary"],[1,"fa-solid","fa-car"],[4,"ngFor","ngForOf"],[1,"small","text-gray-700","mb-0"],[1,"text-muted"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),e.YNc(5,qa,18,9,"div",5),e.qZA()()()(),e.TgZ(6,"div",6),e.YNc(7,Na,4,2,"div",7),e.qZA()()),2&t&&(e.xp6(5),e.Q6J("ngForOf",r.vehicules),e.xp6(2),e.Q6J("ngIf",r.classement.min.length>0||r.classement.max.length>0))},directives:[p.sg,p.O5,p.mk,p.PC],styles:[""]}),n})();function Va(n,a){1&n&&e._UZ(0,"app-comparaison-vehicule")}function Ea(n,a){1&n&&e._UZ(0,"app-analyse-par-vehicule")}function Ja(n,a){1&n&&e._UZ(0,"app-fiche-vehicule")}function Ia(n,a){1&n&&e._UZ(0,"app-classement-vehicule")}const ge=function(n){return{active:n}};let Qa=(()=>{class n{constructor(){this.type="analyse-vehicule"}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-globale-vehicule"]],decls:30,vars:16,consts:[[1,"header-body","shadow-sm","p-3","mb-5","bg-white","rounded"],[1,"align-items-end"],[1,"header-pretitle"],[1,"header-title"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"row","align-items-center"],[1,"col"],[1,"nav","nav-tabs","nav-overflow","header-tabs"],[1,"nav-item"],[1,"nav-link","active",3,"ngClass","click"],[1,"nav-link",3,"ngClass","click"],[1,"continents"],[4,"ngIf"]],template:function(t,r){1&t&&(e.TgZ(0,"section")(1,"div",0)(2,"div",1)(3,"h6",2),e._uU(4," V\xe9hicules "),e.qZA(),e.TgZ(5,"h2",3),e._uU(6," Analyse v\xe9hicule "),e.qZA()()(),e.TgZ(7,"div",4)(8,"div",5)(9,"div",6)(10,"div",7)(11,"div",8)(12,"ul",9)(13,"li",10)(14,"button",11),e.NdJ("click",function(){return r.type="analyse-vehicule"}),e._uU(15," Analyse v\xe9hicules "),e.qZA()(),e.TgZ(16,"li",10)(17,"button",12),e.NdJ("click",function(){return r.type="analyse-par-vehicule"}),e._uU(18," Analyse par v\xe9hicule "),e.qZA()(),e.TgZ(19,"li",10)(20,"button",12),e.NdJ("click",function(){return r.type="fiche-vehicule"}),e._uU(21," Fiche v\xe9hicule "),e.qZA()(),e.TgZ(22,"li",10)(23,"button",12),e.NdJ("click",function(){return r.type="classements-vehicule"}),e._uU(24," Classements des v\xe9hicules "),e.qZA()()()()(),e.TgZ(25,"div",13),e.YNc(26,Va,1,0,"app-comparaison-vehicule",14),e.YNc(27,Ea,1,0,"app-analyse-par-vehicule",14),e.YNc(28,Ja,1,0,"app-fiche-vehicule",14),e.YNc(29,Ia,1,0,"app-classement-vehicule",14),e.qZA()()()()()),2&t&&(e.xp6(14),e.Q6J("ngClass",e.VKq(8,ge,"analyse-vehicule"==r.type)),e.xp6(3),e.Q6J("ngClass",e.VKq(10,ge,"analyse-par-vehicule"==r.type)),e.xp6(3),e.Q6J("ngClass",e.VKq(12,ge,"fiche-vehicule"==r.type)),e.xp6(3),e.Q6J("ngClass",e.VKq(14,ge,"classements-vehicule"==r.type)),e.xp6(3),e.Q6J("ngIf","analyse-vehicule"==r.type),e.xp6(1),e.Q6J("ngIf","analyse-par-vehicule"==r.type),e.xp6(1),e.Q6J("ngIf","fiche-vehicule"==r.type),e.xp6(1),e.Q6J("ngIf","classements-vehicule"==r.type))},directives:[p.mk,p.O5,zt,xa,Sa,Ya],styles:[""]}),n})();const V=function(n){return{"text-primary":n}},Ga=[{path:"",children:[{path:"",component:(()=>{class n{constructor(t,r,i,o){this.vehiculeService=t,this.conducteurService=r,this.geoLocalisationService=i,this.datePipe=o,this.show_dropdown_conducteur=!1,this.show_dropdown_vehicule=!1,this.myChart=[],this.date=new Date,this.infosGlobaleVehicule={carbone:0,co2:0,total_fuel_consomme:0,total_fuel_gaspille:0,total_distance_conduite:0,total_temps_total_conduite:"",nb_conducteurs:0},this.list_resume_vehicule=[],this.list_resume_conducteur=[],this.filter={vehicule_id:null,date_debut:this.datePipe.transform(new Date(this.date.getFullYear(),this.date.getMonth(),1),"yyyy-MM-dd"),date_fin:this.datePipe.transform(this.date,"yyyy-MM-dd")},this.vehicules=[],this.filterBy=[]}ngOnInit(){M.kL.register(...M.zX),this.getResumeOfAllehicule("chartVehicule","fuel_consomme"),this.getResumeOfAllConducteur("chartConducteur","acceleration")}getResumeOfAllConducteur(t,r){var i=this;return(0,D.Z)(function*(){i.filterBy[1]=r;var o=null,s=null;const l=i.conducteurService.getConducteurs().pipe((0,N.U)(c=>c.filter(d=>d.vehicule_id)),(0,ce.w)(c=>(0,le.D)(c.map(i.getAnalyseByConducteur.bind(i)))));i.list_resume_conducteur=yield l.toPromise(),"acceleration"==r?(o=i.list_resume_conducteur.map(c=>({x:c.nom_complet,y:c.acceleration})),s="Acceleration brusque"):"freinage"==r?(o=i.list_resume_conducteur.map(c=>({x:c.nom_complet,y:c.freinage})),s="Freinage brusque "):"speedScore"==r?(o=[...i.list_resume_conducteur].map(c=>({x:c.nom_complet,y:c.speedScore})),s="Score d'exc\xe8s de vitesse "):"virrage_serre"==r&&(o=[...i.list_resume_conducteur].map(c=>({x:c.nom_complet,y:c.virrage_serre})),s="Comportement excessif"),i.infosGlobaleVehicule.freinage_extreme=i.list_resume_conducteur.reduce((c,d)=>c+d.freinage,0)/i.list_resume_conducteur.length,i.infosGlobaleVehicule.acceleration_brutale=i.list_resume_conducteur.reduce((c,d)=>c+d.acceleration,0)/i.list_resume_conducteur.length,i.show_dropdown_conducteur=!1,i.createChart(t,s,o,1)})()}claculMoy(t){const r=[...t].filter(i=>0!=i.score);return[...r].length>0?[...r].reduce((i,o)=>i+o.score,0)/[...r].length:100}getAnalyseByConducteur(t){return this.geoLocalisationService.analyseConducteur({vehicule_id:t.vehicule_id,date_debut:this.filter.date_debut,date_fin:this.filter.date_fin}).pipe((0,N.U)(r=>({acceleration:this.claculMoy(r.acceleration),speedScore:this.claculMoy(r.speedScore),freinage:this.claculMoy(r.freinage),virrage_serre:this.claculMoy(r.virrage_serre),nom_complet:t.prenom+" "+t.nom})))}getResumeOfAllehicule(t,r){var i=this;return(0,D.Z)(function*(){i.filterBy[0]=r;var o=null,s=null;const l=i.vehiculeService.getAll().pipe((0,N.U)(c=>c.filter(d=>d.eco_conduite)),(0,ce.w)(c=>(0,le.D)(c.map(i.getInfosForVehicule.bind(i)))));i.list_resume_vehicule=yield l.toPromise(),"fuel_consomme"==r?(s=i.list_resume_vehicule.map(c=>({x:c.matricule,y:c.fuel_consomme})),o="Fuel consomm\xe9"):"fuel_gaspille"==r?(s=i.list_resume_vehicule.map(c=>({x:c.matricule,y:c.fuel_gaspille})),o="Fuel gaspill\xe9"):"distance_conduite"==r?(s=[...i.list_resume_vehicule].map(c=>({x:c.matricule,y:c.distance_conduite})),o="Distance conduite"):"temps_total_conduite"==r&&(s=i.list_resume_vehicule.map(c=>({x:c.matricule,y:c.temps_total_conduite})),o="Temps conduite"),i.createChart(t,o,s,0),i.show_dropdown_vehicule=!1,i.infosGlobaleVehicule.total_distance_conduite=i.list_resume_vehicule.reduce((c,d)=>c+d.distance_conduite,0),i.infosGlobaleVehicule.total_fuel_consomme=i.list_resume_vehicule.reduce((c,d)=>c+d.fuel_consomme,0),i.infosGlobaleVehicule.total_temps_total_conduite=i.secondsToDhms(i.list_resume_vehicule.reduce((c,d)=>c+d.temps_conduite_seconds,0)),i.infosGlobaleVehicule.carbone=i.list_resume_vehicule.reduce((c,d)=>c+d.carbone,0)/1e3,i.infosGlobaleVehicule.co2=i.list_resume_vehicule.reduce((c,d)=>c+d.co2,0)/1e3,i.getNombreConducteurs()})()}getInfosForVehicule(t){return this.filter.vehicule_id=t.id,this.geoLocalisationService.getAnalyseVehicule({vehicule_id:t.id,date_debut:this.filter.date_debut,date_fin:this.filter.date_fin}).pipe((0,N.U)(r=>({fuel_consomme:[...r.fuel].reduce((i,o)=>i+o.qte,0),distance_conduite:[...r.distance].reduce((i,o)=>i+o.distance,0),temps_total_conduite:[...r.driveTime].reduce((i,o)=>i+this.toSeconds(o.duree),0),temps_conduite_seconds:[...r.driveTime].reduce((i,o)=>i+this.toSeconds(o.duree),0),carbone:[...r.carbone].reduce((i,o)=>i+o.Cg,0),co2:[...r.carbone].reduce((i,o)=>i+o.CO2g,0),fuel_gaspille:0,matricule:t.matricule,vehicule_id:t.id})))}toSeconds(t){var r=t.split(":");return 3600*+r[0]+60*+r[1]+ +r[2]}secondsToDhms(t){t=Number(t);let r=Math.floor(t/3600);return(null==r?void 0:r.toFixed(0))+(1==r?" heure ":" heures ")}pad(t,r){for(var i=t+"";i.length<r;)i="0"+i;return i}getNombreConducteurs(){this.conducteurService.getAll(1).subscribe(t=>{this.infosGlobaleVehicule.nb_conducteurs=[...t.records].filter(r=>null!=r.vehicule_id).length+"/"+t.records.length})}createChart(t,r,i,o){this.myChart[o]&&this.myChart[o].destroy();const s={type:"bar",data:{labels:[...i].map(l=>l.x),datasets:[{label:r,data:[...i].map(l=>l.y),backgroundColor:"rgba(54, 162, 235)",borderWidth:1,borderRadius:10,borderSkipped:!1,barPercentage:.4,categoryPercentage:.3}]},options:{indexAxis:"y",maintainAspectRatio:!1,scales:{x:{grid:{drawOnChartArea:!1}},y:{grid:{drawOnChartArea:!1}}}}};"Temps conduite"==r?(s.options={maintainAspectRatio:!1,scales:{x:{grid:{drawOnChartArea:!1}},y:{grid:{drawOnChartArea:!1},ticks:{callback:function(l){var c=Math.floor(l/3600),d=Math.floor(l%3600/60),v=Math.floor(l%60);return c.toString().padStart(2,"0")+":"+d.toString().padStart(2,"0")+":"+v.toString().padStart(2,"0")}}}},plugins:{tooltip:{callbacks:{label:function(l){var c=Math.floor(l.parsed.y/3600),d=Math.floor(l.parsed.y%3600/60),v=Math.floor(l.parsed.y%60);return c.toString().padStart(2,"0")+":"+d.toString().padStart(2,"0")+":"+v.toString().padStart(2,"0")}}}}},s.data.datasets[0].categoryPercentage=.11):(s.options.indexAxis="y",s.data.datasets[0].categoryPercentage=.35),this.myChart[o]=new M.kL(f("#"+t),s)}show_dropdown_v(){this.show_dropdown_vehicule=!this.show_dropdown_vehicule}show_dropdown_c(){this.show_dropdown_conducteur=!this.show_dropdown_conducteur}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(K.t),e.Y36(z.b),e.Y36(F.O),e.Y36(p.uU))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-dashboard"]],decls:221,vars:35,consts:[[1,"page-clients"],[1,"header-body","shadow-sm","p-3","mb-5","bg-white","rounded"],[1,"align-items-end"],[1,"header-pretitle"],[1,"header-title"],[1,"container-fluid"],[1,"row"],[1,"card","card-l"],[1,"card-body"],[1,"row","align-items-center","gx-0"],[1,"col"],[1,"text-uppercase","text-muted","mb-2"],[1,"h3","mb-0"],[1,"col-auto"],[1,"fa-solid","fa-smog","mb-0","icone-car"],[1,"fa-solid","fa-comments-dollar","mb-0","icone-car"],[1,"h5","mb-0","text-danger","opacity-50"],[1,"fa-solid","fa-hand-holding-dollar","mb-0","icone-car"],[1,"fa-solid","fa-leaf","mb-0","icone-car"],[1,"h2","mb-0"],[1,"fa-solid","fa-car","text-muted","mb-0"],[1,"fa-solid","fa-users","text-muted","mb-0"],[1,"text-uppercase","text-muted","mb-2","opacity-50"],[1,"fa-solid","fa-gas-pump","text-muted","mb-0"],[1,"fa-solid","fa-car-burst","text-muted","mb-0"],[1,"fa-solid","fa-hourglass-start","text-muted","mb-0"],[1,"col-md-6","col-sm-12","rounded"],[1,"card"],[1,"card-header"],[1,"card-header-title"],[1,"header-title","pt-5"],[1,"dropdown"],["type","button",1,"btn","btn-sm","btn-white",2,"float","right",3,"click"],[1,"fa-solid","fa-angle-down","text-muted","mt-2","mb-0"],[1,"dropdown-menu","dropdown-menu-end","dropdown-menu-card","dropdown-card-vehicule",3,"ngClass"],[1,"list-group","list-group-flush"],[1,"list-group-item"],[1,"col",3,"ngClass","click"],["id","chartVehicule"],["type","button",1,"btn","btn-sm","btn-white",2,"float","right","margin-top","50px",3,"click"],[1,"card-body",2,"height","314px"],["id","chartConducteur"]],template:function(t,r){1&t&&(e.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"h6",3),e._uU(4," \xc9co conduite "),e.qZA(),e.TgZ(5,"h2",4),e._uU(6," Tableau de bord "),e.qZA()()(),e.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"div",10)(13,"h6",11),e._uU(14," \xe9mission CO2 (Kg) "),e.qZA(),e.TgZ(15,"span",12),e._uU(16),e.qZA()(),e.TgZ(17,"div",13),e._UZ(18,"i",14),e.qZA()()()(),e.TgZ(19,"div",7)(20,"div",8)(21,"div",9)(22,"div",10)(23,"h6",11),e._uU(24," Bilans carbone (Kg) "),e.qZA(),e.TgZ(25,"span",12),e._uU(26),e.qZA()(),e.TgZ(27,"div",13),e._UZ(28,"i",15),e.qZA()()()(),e.TgZ(29,"div",7)(30,"div",8)(31,"div",9)(32,"div",10)(33,"h6",11),e._uU(34," Total Gain (Dh) "),e.qZA(),e.TgZ(35,"span",16),e._uU(36,"Pas de donn\xe9e"),e.qZA()(),e.TgZ(37,"div",13),e._UZ(38,"i",17),e.qZA()()()(),e.TgZ(39,"div",7)(40,"div",8)(41,"div",9)(42,"div",10)(43,"h6",11),e._uU(44," Empreinte carbone (Kg)"),e.qZA(),e.TgZ(45,"span",16),e._uU(46,"Pas de donn\xe9e"),e.qZA()(),e.TgZ(47,"div",13),e._UZ(48,"i",15),e.qZA()()()(),e.TgZ(49,"div",7)(50,"div",8)(51,"div",9)(52,"div",10)(53,"h6",11),e._uU(54," Qualit\xe9 de l'air "),e.qZA(),e.TgZ(55,"span",16),e._uU(56,"Pas de donn\xe9e"),e.qZA()(),e.TgZ(57,"div",13),e._UZ(58,"i",18),e.qZA()()()(),e.TgZ(59,"div",7)(60,"div",8)(61,"div",9)(62,"div",10)(63,"h6",11),e._uU(64," Nombre des v\xe9hicules "),e.qZA(),e.TgZ(65,"span",19),e._uU(66),e.qZA()(),e.TgZ(67,"div",13),e._UZ(68,"i",20),e.qZA()()()(),e.TgZ(69,"div",7)(70,"div",8)(71,"div",9)(72,"div",10)(73,"h6",11),e._uU(74," Nombre des conducteurs"),e.qZA(),e.TgZ(75,"span",19),e._uU(76),e.qZA()(),e.TgZ(77,"div",13),e._UZ(78,"i",21),e.qZA()()()(),e.TgZ(79,"div",7)(80,"div",8)(81,"div",9)(82,"div",10)(83,"h6",22),e._uU(84," Total de fuel consomm\xe9 (L) "),e.qZA(),e.TgZ(85,"span",19),e._uU(86),e.qZA()(),e.TgZ(87,"div",13),e._UZ(88,"i",23),e.qZA()()()(),e.TgZ(89,"div",7)(90,"div",8)(91,"div",9)(92,"div",10)(93,"h6",11),e._uU(94," Total de fuel gaspill\xe9 (L) "),e.qZA(),e.TgZ(95,"span",16),e._uU(96,"Pas de donn\xe9e"),e.qZA()(),e.TgZ(97,"div",13),e._UZ(98,"i",23),e.qZA()()()(),e.TgZ(99,"div",7)(100,"div",8)(101,"div",9)(102,"div",10)(103,"h6",11),e._uU(104," Conduite dangereuse "),e.qZA(),e.TgZ(105,"span",16),e._uU(106,"Pas de donn\xe9e"),e.qZA()(),e.TgZ(107,"div",13),e._UZ(108,"i",24),e.qZA()()()(),e.TgZ(109,"div",7)(110,"div",8)(111,"div",9)(112,"div",10)(113,"h6",11),e._uU(114," Total de distance conduite (km) "),e.qZA(),e.TgZ(115,"span",19),e._uU(116),e.qZA()(),e.TgZ(117,"div",13),e._UZ(118,"i",20),e.qZA()()()(),e.TgZ(119,"div",7)(120,"div",8)(121,"div",9)(122,"div",10)(123,"h6",11),e._uU(124," Temps total de conduite "),e.qZA(),e.TgZ(125,"span",12),e._uU(126),e.qZA()(),e.TgZ(127,"div",13),e._UZ(128,"i",25),e.qZA()()()(),e.TgZ(129,"div",7)(130,"div",8)(131,"div",9)(132,"div",10)(133,"h6",11),e._uU(134," Temps total d'inactivit\xe9 "),e.qZA(),e.TgZ(135,"span",16),e._uU(136,"Pas de donn\xe9e"),e.qZA()(),e.TgZ(137,"div",13),e._UZ(138,"i",25),e.qZA()()()(),e.TgZ(139,"div",7)(140,"div",8)(141,"div",9)(142,"div",10)(143,"h6",11),e._uU(144," Freinage extr\xeame (%)"),e.qZA(),e.TgZ(145,"span",19),e._uU(146),e.qZA()(),e.TgZ(147,"div",13),e._UZ(148,"i",24),e.qZA()()()(),e.TgZ(149,"div",7)(150,"div",8)(151,"div",9)(152,"div",10)(153,"h6",11),e._uU(154," Acc\xe9l\xe9ration brutale (%)"),e.qZA(),e.TgZ(155,"span",19),e._uU(156),e.qZA()(),e.TgZ(157,"div",13),e._UZ(158,"i",24),e.qZA()()()()(),e.TgZ(159,"div",6)(160,"div",26)(161,"div",27)(162,"div",28)(163,"h4",29)(164,"div",10)(165,"h3",30),e._uU(166," Analyse v\xe9hicules "),e.qZA()(),e.TgZ(167,"div",13)(168,"div",31)(169,"button",32),e.NdJ("click",function(){return r.show_dropdown_v()}),e._uU(170," More"),e._UZ(171,"i",33),e.qZA(),e.TgZ(172,"form",34)(173,"div",28)(174,"h4",29),e._uU(175," Analyse v\xe9hicules par : "),e.qZA()(),e.TgZ(176,"div",8)(177,"div",35)(178,"div",36)(179,"ul")(180,"li",37),e.NdJ("click",function(){return r.getResumeOfAllehicule("chartVehicule","fuel_consomme")}),e._uU(181," Total de fuel consomm\xe9 "),e.qZA(),e.TgZ(182,"li",37),e.NdJ("click",function(){return r.getResumeOfAllehicule("chartVehicule","fuel_gaspille")}),e._uU(183," Total de fuel gaspill\xe9 "),e.qZA(),e.TgZ(184,"li",37),e.NdJ("click",function(){return r.getResumeOfAllehicule("chartVehicule","distance_conduite")}),e._uU(185," Distance conduite "),e.qZA(),e.TgZ(186,"li",37),e.NdJ("click",function(){return r.getResumeOfAllehicule("chartVehicule","temps_total_conduite")}),e._uU(187," Temps total de conduite "),e.qZA()()()()()()()()()(),e.TgZ(188,"div",8),e._UZ(189,"canvas",38),e.qZA()()(),e.TgZ(190,"div",26)(191,"div",27)(192,"div",28)(193,"div",10)(194,"h3",4),e._uU(195," Analyse des conducteurs "),e.qZA()(),e.TgZ(196,"div",13)(197,"div",31)(198,"button",39),e.NdJ("click",function(){return r.show_dropdown_c()}),e._uU(199," More "),e._UZ(200,"i",33),e.qZA(),e.TgZ(201,"form",34)(202,"div",28)(203,"h4",29),e._uU(204," Analyse conducteur par : "),e.qZA()(),e.TgZ(205,"div",8)(206,"div",35)(207,"div",36)(208,"ul")(209,"li",37),e.NdJ("click",function(){return r.getResumeOfAllConducteur("chartConducteur","acceleration")}),e._uU(210," Acceleration brusque "),e.qZA(),e.TgZ(211,"li",37),e.NdJ("click",function(){return r.getResumeOfAllConducteur("chartConducteur","freinage")}),e._uU(212," Freinage brusque "),e.qZA(),e.TgZ(213,"li",37),e.NdJ("click",function(){return r.getResumeOfAllConducteur("chartConducteur","speedScore")}),e._uU(214," Score d'exc\xe8s de vitesse "),e.qZA(),e.TgZ(215,"li",37),e.NdJ("click",function(){return r.getResumeOfAllConducteur("chartConducteur","virrage_serre")}),e._uU(216," Comportement excessif "),e.qZA()()()()()()()()(),e.TgZ(217,"div",40),e._UZ(218,"canvas",41),e.qZA()()()(),e._UZ(219,"br")(220,"br"),e.qZA()()),2&t&&(e.xp6(16),e.Oqu(null==r.infosGlobaleVehicule.co2?null:r.infosGlobaleVehicule.co2.toFixed(2)),e.xp6(10),e.Oqu(null==r.infosGlobaleVehicule.carbone?null:r.infosGlobaleVehicule.carbone.toFixed(2)),e.xp6(40),e.Oqu(r.list_resume_vehicule.length),e.xp6(10),e.Oqu(r.infosGlobaleVehicule.nb_conducteurs),e.xp6(10),e.Oqu(null==r.infosGlobaleVehicule.total_fuel_consomme?null:r.infosGlobaleVehicule.total_fuel_consomme.toFixed(2)),e.xp6(30),e.Oqu(r.infosGlobaleVehicule.total_distance_conduite.toFixed(0)),e.xp6(10),e.Oqu(r.infosGlobaleVehicule.total_temps_total_conduite),e.xp6(20),e.Oqu(null==r.infosGlobaleVehicule.freinage_extreme?null:r.infosGlobaleVehicule.freinage_extreme.toFixed(2)),e.xp6(10),e.Oqu(null==r.infosGlobaleVehicule.acceleration_brutale?null:r.infosGlobaleVehicule.acceleration_brutale.toFixed(2)),e.xp6(16),e.Q6J("ngClass",r.show_dropdown_vehicule?"d-block":"d-none"),e.xp6(8),e.Q6J("ngClass",e.VKq(19,V,"fuel_consomme"==r.filterBy[0])),e.xp6(2),e.Q6J("ngClass",e.VKq(21,V,"fuel_gaspille"==r.filterBy[0])),e.xp6(2),e.Q6J("ngClass",e.VKq(23,V,"distance_conduite"==r.filterBy[0])),e.xp6(2),e.Q6J("ngClass",e.VKq(25,V,"temps_total_conduite"==r.filterBy[0])),e.xp6(15),e.Q6J("ngClass",r.show_dropdown_conducteur?"d-block":"d-none"),e.xp6(8),e.Q6J("ngClass",e.VKq(27,V,"acceleration"==r.filterBy[1])),e.xp6(2),e.Q6J("ngClass",e.VKq(29,V,"freinage"==r.filterBy[1])),e.xp6(2),e.Q6J("ngClass",e.VKq(31,V,"speedScore"==r.filterBy[1])),e.xp6(2),e.Q6J("ngClass",e.VKq(33,V,"virrage_serre"==r.filterBy[1])))},directives:[h._Y,h.JL,h.F,p.mk],styles:[".container-fluid[_ngcontent-%COMP%]{width:95%}.card-l[_ngcontent-%COMP%]{width:19%!important;margin-left:1%!important;box-shadow:#0000003d 0 3px 8px!important}.card-header-title[_ngcontent-%COMP%]{margin-left:1%}.header-pretitle[_ngcontent-%COMP%]{letter-spacing:.04em!important}.dropdown-menu-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{max-height:122px!important;height:120px!important}.card-body[_ngcontent-%COMP%]{padding:7px!important}.list-group-item[_ngcontent-%COMP%]{padding:0!important}.list-group-item[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer!important}form.dropdown-menu[_ngcontent-%COMP%]{position:absolute;inset:0px 0px auto auto;margin:0;transform:translateY(31px)}.img-no-data[_ngcontent-%COMP%]{width:300px;display:block;margin:auto}.fa-car[_ngcontent-%COMP%]{font-size:20px}@media (max-width: 1212px){.card-l[_ngcontent-%COMP%]{width:49%!important}}@media (max-width: 560px){.card-l[_ngcontent-%COMP%]{width:100%!important}}#chartVehicule[_ngcontent-%COMP%]{height:300px!important}.icone-car[_ngcontent-%COMP%]{font-size:16px!important;background-color:#44a148;padding:17px;position:absolute;color:#fff!important;margin-left:-47px;margin-top:-41px;border-radius:10px;box-shadow:#32325d40 0 6px 12px -2px,#0000004d 0 3px 7px -3px}"]}),n})(),data:{title:"Dashboard de l'eco-conduite"},canActivate:[Ce.I]},{path:"analyse-vehicule",component:Qa,canActivate:[Ce.I],data:{title:"analyse des v\xe9hicules"}},{path:"analyse-conducteur",component:Yt,canActivate:[Ce.I],data:{title:"analyse des conducteurs"}}]}];let La=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[B.Bz.forChild(Ga)],B.Bz]}),n})(),Wa=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[p.ez,h.u5,B.Bz,be.hy.forRoot()]]}),n})(),Ha=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[p.ez,h.u5,B.Bz,be.hy.forRoot()]]}),n})(),Ra=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[p.uU],imports:[[Ha,Wa,p.ez,La,h.u5]]}),n})()}}]);