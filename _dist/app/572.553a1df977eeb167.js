"use strict";(self.webpackChunkuplogistix=self.webpackChunkuplogistix||[]).push([[572],{4572:(fn,Y,p)=>{p.r(Y),p.d(Y,{VehiculesModule:()=>hn});var u=p(9808),_=p(3072),Z=p(8299),V=p(7921),h=p(4393),C=p(8259),e=p(1223),b=p(4741),f=p(6448),d=p(2340),T=p(520);let te=(()=>{class i{constructor(t){this.http=t}create(t){return this.http.post(d.N.apiURL+"/vehicules/carburants",t)}update(t){return this.http.put(d.N.apiURL+"/vehicules/carburants/"+t.id,t)}delete(t){return this.http.delete(d.N.apiURL+"/vehicules/carburants/"+t)}search(t,n){return this.http.post(d.N.apiURL+"/vehicules/carburants/find/page/"+n,t)}getCarburant(t){return this.http.get(d.N.apiURL+"/vehicules/carburants/"+t)}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(T.eN))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var M=p(9584),H=p(899),l=p(3075);function ne(i,a){if(1&i&&(e.TgZ(0,"div",83),e._uU(1),e._UZ(2,"button",84),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.message," ")}}function ie(i,a){if(1&i&&(e.TgZ(0,"option",85),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.s9C("value",t.id),e.xp6(1),e.hij(" ",t.matricule,"")}}function oe(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"tr")(1,"td",86),e._uU(2),e.qZA(),e.TgZ(3,"td",87),e._uU(4),e.qZA(),e.TgZ(5,"td",88),e._uU(6),e.qZA(),e.TgZ(7,"td",89),e._uU(8),e.qZA(),e.TgZ(9,"td",90),e._uU(10),e.ALo(11,"date"),e.qZA(),e.TgZ(12,"td",91),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.oxw(2).setCarburant(o)}),e.TgZ(13,"button",92),e._UZ(14,"i",93),e.qZA(),e._uU(15," \xa0 "),e.TgZ(16,"button",94),e._UZ(17,"i",95),e.qZA()()()}if(2&i){const t=a.$implicit;e.xp6(2),e.Oqu(t.matricule),e.xp6(2),e.Oqu(t.qte),e.xp6(2),e.Oqu(t.prix),e.xp6(2),e.Oqu(t.total.toFixed(2)),e.xp6(2),e.Oqu(e.xi3(11,5,t.created_at,"dd/MM/yyyy HH:mm"))}}const O=function(i){return{active:i}},E=function(i){return["/vehicules/carburants/page",i]};function se(i,a){if(1&i&&(e.TgZ(0,"li",102)(1,"a",103),e._uU(2),e.qZA()()),2&i){const t=a.index,n=e.oxw(3);e.Q6J("ngClass",e.VKq(3,O,n.carburants.current_page==t+1)),e.xp6(1),e.Q6J("routerLink",e.VKq(5,E,t+1)),e.xp6(1),e.Oqu(t+1)}}const G=function(i){return{_disabled:i}},re=function(){return[]};function ae(i,a){if(1&i&&(e.TgZ(0,"nav",96)(1,"ul",97)(2,"li",98)(3,"a",99),e._uU(4," Pr\xe9c\xe9dent "),e.qZA()(),e.YNc(5,se,3,7,"li",100),e.TgZ(6,"li",98)(7,"a",101),e._uU(8," Suivant "),e.qZA()()()()),2&i){const t=e.oxw(2);e.xp6(3),e.Q6J("routerLink",e.VKq(5,E,t.carburants.current_page-1))("ngClass",e.VKq(7,G,1==t.carburants.current_page)),e.xp6(2),e.Q6J("ngForOf",e.DdM(9,re).constructor(t.carburants.total_pages)),e.xp6(2),e.Q6J("routerLink",e.VKq(10,E,t.carburants.current_page+1))("ngClass",e.VKq(12,G,t.carburants.current_page==t.carburants.total_pages))}}function le(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",69),e.YNc(1,ne,3,1,"div",70),e.TgZ(2,"button",71),e.NdJ("click",function(){return e.CHM(t),e.oxw().clear()}),e._UZ(3,"i",72),e.qZA(),e._UZ(4,"br")(5,"br")(6,"br"),e.TgZ(7,"form",14,15),e.NdJ("ngSubmit",function(){e.CHM(t);const s=e.MAs(8);return e.oxw().searchCarburant(s.value)}),e.TgZ(9,"div",16)(10,"div",22)(11,"label",73),e._uU(12,"V\xe9hicules"),e.qZA(),e.TgZ(13,"select",19),e.NdJ("ngModelChange",function(s){return e.CHM(t),e.oxw().search.vehicule_id=s}),e.TgZ(14,"option",74),e._uU(15,"Tous"),e.qZA(),e.YNc(16,ie,2,2,"option",21),e.qZA()()(),e.TgZ(17,"div",16)(18,"div",22)(19,"label",23),e._uU(20,"Date d\xe9but"),e.qZA(),e.TgZ(21,"input",24),e.NdJ("ngModelChange",function(s){return e.CHM(t),e.oxw().search.date_debut=s}),e.qZA()()(),e.TgZ(22,"div",16)(23,"div",22)(24,"label",25),e._uU(25,"Date fin"),e.qZA(),e.TgZ(26,"div",26)(27,"input",27),e.NdJ("ngModelChange",function(s){return e.CHM(t),e.oxw().search.date_fin=s}),e.qZA(),e.TgZ(28,"div",28)(29,"button",29),e._UZ(30,"i",30),e.qZA()()()()()(),e.TgZ(31,"div",75)(32,"table",76)(33,"thead")(34,"tr")(35,"th"),e._uU(36,"Matricule"),e.qZA(),e.TgZ(37,"th"),e._uU(38,"Quantit\xe9 en l"),e.qZA(),e.TgZ(39,"th"),e._uU(40,"Prix unitaire en Dh"),e.qZA(),e.TgZ(41,"th"),e._uU(42,"Total en Dh"),e.qZA(),e.TgZ(43,"th"),e._uU(44,"Date op\xe9ration"),e.qZA(),e.TgZ(45,"th",77),e._uU(46,"Options"),e.qZA()()(),e.TgZ(47,"tbody",78),e.YNc(48,oe,18,8,"tr",79),e.qZA(),e.TgZ(49,"tfoot")(50,"tr")(51,"td",80)(52,"h3",81),e._uU(53," Co\xfbt total: "),e.TgZ(54,"span"),e._uU(55),e.qZA()()()()()()(),e.YNc(56,ae,9,14,"nav",82),e.qZA()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.message),e.xp6(12),e.Q6J("ngModel",t.search.vehicule_id),e.xp6(3),e.Q6J("ngForOf",t.vehicules),e.xp6(5),e.Q6J("ngModel",t.search.date_debut),e.xp6(6),e.Q6J("ngModel",t.search.date_fin),e.xp6(21),e.Q6J("ngForOf",t.carburants.records),e.xp6(7),e.Oqu(null==t.carburants.total_carburant?null:t.carburants.total_carburant.toFixed(2)),e.xp6(1),e.Q6J("ngIf",t.carburants.total_records&&t.carburants.total_pages>1)}}function ue(i,a){if(1&i&&(e.TgZ(0,"option",85),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.s9C("value",t.id),e.xp6(1),e.hij(" ",t.matricule,"")}}function de(i,a){1&i&&(e.TgZ(0,"strong",54),e._uU(1,"*"),e.qZA())}function ce(i,a){if(1&i&&(e.TgZ(0,"option",85),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.s9C("value",t.id),e.xp6(1),e.hij(" ",t.matricule,"")}}function ge(i,a){1&i&&(e.TgZ(0,"strong",54),e._uU(1,"*"),e.qZA())}function pe(i,a){1&i&&(e.TgZ(0,"strong",54),e._uU(1,"*"),e.qZA())}const J=function(i){return{"d-none":i}};let _e=(()=>{class i{constructor(t,n,s,o,r,g,m){this.securiteClass=t,this.globale=n,this.vehiculeCarburantService=s,this.vehiculeService=o,this.activatedRoute=r,this.datepipe=g,this.geoLocalisationService=m,this.message=null,this.page=null,this.date=new Date,this.total=200,this.type="details",this.carburants=[],this.vehicules=[],this.singleCarburant={id:null,vehicule_id:null,qte:0,prix:0},this.search={vehicule_id:null,date_debut:this.date.getFullYear()+"-"+("0"+(this.date.getMonth()+1)).slice(-2)+"-01",date_fin:this.date.getFullYear()+"-"+("0"+(this.date.getMonth()+1)).slice(-2)+"-"+("0"+(this.date.getDate()+1)).slice(-2)},this.myChart=null}ngOnInit(){h.kL.register(...h.zX),this.activatedRoute.params.subscribe(t=>{this.page=t.page,this.page&&(this.getAllVehicule(),this.searchCarburant(this.search))})}clear(){this.message=null,this.singleCarburant={id:null,vehicule_id:this.search.vehicule_id,qtn:null,prix:null}}getAllVehicule(){this.vehiculeService.getAll().subscribe(t=>this.vehicules=t,t=>{401==t.status&&this.securiteClass.refreshToken()&&this.getAllVehicule()})}setCarburant(t){this.message=null,this.singleCarburant=t,this.search.vehicule_id=t.vehicule_id,this.vehiculeCarburantService.getCarburant(t.id).subscribe(n=>this.singleCarburant=n,n=>{401==n.status&&this.securiteClass.refreshToken()&&this.getAllVehicule()})}update(t){t.id?this.vehiculeCarburantService.update(t).subscribe(n=>{this.searchCarburant(this.search),this.message="Le carburant est modifi\xe9 avec succ\xe8s !",this.globale.closeModal()},n=>{401==n.status&&this.securiteClass.refreshToken()&&this.update(t)}):this.vehiculeCarburantService.create(t).subscribe(n=>{this.searchCarburant(this.search),this.message="Le carburant est ajout\xe9 avec succ\xe8s !",this.globale.closeModal()},n=>{401==n.status&&this.securiteClass.refreshToken()&&this.update(t)})}delete(t){this.vehiculeCarburantService.delete(t).subscribe(n=>{this.searchCarburant(this.search),this.message="Le carburant est supprim\xe9 avec succ\xe8s !",this.globale.closeModal()},n=>{401==n.status&&this.securiteClass.refreshToken()&&this.delete(t)})}searchCarburant(t){this.vehiculeCarburantService.search(t,this.page).subscribe(n=>this.carburants=n,n=>{401==n.status&&this.securiteClass.refreshToken()&&this.searchCarburant(t)})}generateChart(t){this.geoLocalisationService.getAnalyseVehicule(t).subscribe(n=>{this.chartEvolutionCarburant(n.fuel.map(s=>({x:this.datepipe.transform(s.date_heure,"dd-MM-yyyy"),y:s.montant_carburant})))})}chartEvolutionCarburant(t){let n=C("#chart-carburants");this.myChart&&this.myChart.destroy(),this.myChart=new h.kL(n,{type:"line",data:{datasets:[{data:t,label:"chart",backgroundColor:"rgba(44, 123, 228)",borderColor:"rgba(44, 123, 228)"}]},options:{maintainAspectRatio:!1,scales:{x:{grid:{drawOnChartArea:!1}},y:{grid:{drawOnChartArea:!1}}},plugins:{legend:{display:!1}}}})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(b.z),e.Y36(f.N),e.Y36(te),e.Y36(M.t),e.Y36(_.gz),e.Y36(u.uU),e.Y36(H.O))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-carburant"]],decls:109,vars:32,consts:[[1,"header-body","shadow-sm","p-3","mb-5","bg-white","rounded"],[1,"align-items-end"],[1,"header-pretitle"],[1,"header-title"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"row","align-items-center"],[1,"col"],[1,"nav","nav-tabs","nav-overflow","header-tabs"],[1,"nav-item"],[1,"nav-link",3,"ngClass","click"],["class","details",4,"ngIf"],[1,"graphe",3,"ngClass"],[1,"row","form-search",3,"ngSubmit"],["searchForm","ngForm"],[1,"col-md-4"],[1,"form-group","form-group-sm"],["for","vehicule_id"],["name","vehicule_id",1,"form-select",3,"ngModel","ngModelChange"],["value","null","disabled",""],[3,"value",4,"ngFor","ngForOf"],[1,"form-group"],["for","date_debut"],["type","date","name","date_debut",1,"form-control",3,"ngModel","ngModelChange"],["for","date_fin"],[1,"input-group"],["type","date","name","date_fin",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-group-append"],["type","submit",1,"btn","btn-outline-primary",2,"margin-left","12px"],[1,"fas","fa-search"],[1,"text-muted","pt-3","pb-3","bg-white","shadow-sm","row",3,"ngClass"],[1,"text-center"],[1,"row","bg-white","pt-4","shadow",3,"ngClass"],["id","chart-carburants",3,"ngClass"],["id","modal-edit","tabindex","-1","role","dialog","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],["data-list","",1,"modal-card","card"],[1,"card-header"],["id","exampleModalCenterTitle",1,"card-header-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close","pb-0","mp-0"],[1,"card-body"],[3,"ngSubmit"],["carburantForm","ngForm"],[1,"frm-region"],["type","hidden","name","id","value","singleCarburant.id",3,"ngModel","ngModelChange"],["for","titre",1,"form-label"],["class","text-danger",4,"ngIf"],["name","vehicule_id","required","",1,"form-select","form-select-sm",3,"ngModel","ngModelChange"],["for","qtn",1,"form-label"],["type","number","placeholder","Qte","name","qte","required","",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["for","nom",1,"form-label"],["type","number","placeholder","Prix","name","prix","required","",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"text-danger"],["type","submit",1,"btn","btn-success","mb-2","float-right",3,"disabled"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary","float-right",2,"margin-right","5px"],["id","modal-delete","tabindex","-1","role","dialog","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-confirm"],[1,"modal-header","flex-column"],[1,"icon-box"],[1,"material-icons"],[1,"fa-solid","fa-x"],[1,"modal-title","w-100"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"close","btn-close"],[1,"modal-body"],[1,"modal-footer","justify-content-center"],["type","button","data-dismiss","modal","data-bs-dismiss","modal","aria-label","Close",1,"btn","btn-secondary"],["type","button",1,"btn","btn-danger",3,"click"],[1,"details"],["class","alert alert-success","role","alert",4,"ngIf"],["type","button","data-bs-toggle","modal","data-bs-target","#modal-edit",1,"btn","btn-outline-primary",2,"float","right",3,"click"],[1,"fa-solid","fa-plus"],["for","titre"],["value","null"],[1,"table-responsive","row"],[1,"table","table-sm","table-nowrap","card-table"],["width","100"],[1,"list"],[4,"ngFor","ngForOf"],["colspan","6"],[1,"float-right","text-danger","font-weight-normal"],["aria-label","Page navigation","class","pag-tab col-md-12 navigation",4,"ngIf"],["role","alert",1,"alert","alert-success"],["type","button","data-bs-dismiss","alert","aria-label","Close",1,"btn-close","pb-0","mp-0"],[3,"value"],[1,"matricule"],[1,"qte"],[1,"prix"],[1,"total"],[1,"date-operation","text-primary"],[3,"click"],["type","button","ng-show","","data-bs-toggle","modal","data-bs-target","#modal-edit",1,"btn","btn-operation"],[1,"fa-solid","fa-pen"],["type","button","data-bs-toggle","modal","data-bs-target","#modal-delete",1,"btn","btn-operation"],[1,"fa-solid","fa-trash"],["aria-label","Page navigation",1,"pag-tab","col-md-12","navigation"],[1,"pagination"],[1,"page-item"],["href","#!",1,"page-link",3,"routerLink","ngClass"],["class","page-item",3,"ngClass",4,"ngFor","ngForOf"],[1,"page-link",3,"routerLink","ngClass"],[1,"page-item",3,"ngClass"],[1,"page-link",3,"routerLink"]],template:function(t,n){if(1&t){const s=e.EpF();e.TgZ(0,"section")(1,"div",0)(2,"div",1)(3,"h6",2),e._uU(4," Gestion des v\xe9hicules "),e.qZA(),e.TgZ(5,"h2",3),e._uU(6," Historique carburants "),e.qZA()()(),e.TgZ(7,"div",4)(8,"div",5)(9,"div",6)(10,"div",7)(11,"div",8)(12,"ul",9)(13,"li",10)(14,"button",11),e.NdJ("click",function(){return n.type="details"}),e._uU(15," D\xe9tails "),e.qZA()(),e.TgZ(16,"li",10)(17,"button",11),e.NdJ("click",function(){return n.type="graphe"}),e._uU(18," L\u2019\xe9volution "),e.qZA()()()()(),e.YNc(19,le,57,8,"div",12),e.TgZ(20,"div",13)(21,"form",14,15),e.NdJ("ngSubmit",function(){e.CHM(s);const r=e.MAs(22);return n.generateChart(r.value)}),e.TgZ(23,"div",16)(24,"div",17)(25,"label",18),e._uU(26,"V\xe9hicules"),e.qZA(),e.TgZ(27,"select",19),e.NdJ("ngModelChange",function(r){return n.search.vehicule_id=r}),e.TgZ(28,"option",20),e._uU(29,"Veuillez choisir ..."),e.qZA(),e.YNc(30,ue,2,2,"option",21),e.qZA()()(),e.TgZ(31,"div",16)(32,"div",22)(33,"label",23),e._uU(34,"Date d\xe9but"),e.qZA(),e.TgZ(35,"input",24),e.NdJ("ngModelChange",function(r){return n.search.date_debut=r}),e.qZA()()(),e.TgZ(36,"div",16)(37,"div",22)(38,"label",25),e._uU(39,"Date fin"),e.qZA(),e.TgZ(40,"div",26)(41,"input",27),e.NdJ("ngModelChange",function(r){return n.search.date_fin=r}),e.qZA(),e.TgZ(42,"div",28)(43,"button",29),e._UZ(44,"i",30),e.qZA()()()()()(),e.TgZ(45,"div",31)(46,"p",32),e._uU(47,"Veuillez s\xe9lectionner un v\xe9hicule ..."),e.qZA()(),e.TgZ(48,"div",33),e._UZ(49,"canvas",34),e.qZA()()()(),e._UZ(50,"br")(51,"br")(52,"br"),e.TgZ(53,"div",35)(54,"div",36)(55,"div",37)(56,"div",38)(57,"div",39)(58,"h4",40),e._uU(59," Carburant de V\xe9hicule "),e.qZA(),e._UZ(60,"button",41),e.qZA(),e.TgZ(61,"div",42)(62,"form",43,44),e.NdJ("ngSubmit",function(){e.CHM(s);const r=e.MAs(63);return n.update(r.value)}),e.TgZ(64,"div",45)(65,"input",46),e.NdJ("ngModelChange",function(r){return n.singleCarburant.id=r}),e.qZA(),e.TgZ(66,"div",22)(67,"label",47),e._uU(68," V\xe9hicule "),e.YNc(69,de,2,0,"strong",48),e.qZA(),e.TgZ(70,"select",49),e.NdJ("ngModelChange",function(r){return n.singleCarburant.vehicule_id=r}),e.TgZ(71,"option",20),e._uU(72,"Veuillez choisir..."),e.qZA(),e.YNc(73,ce,2,2,"option",21),e.qZA()(),e.TgZ(74,"div",22)(75,"label",50),e._uU(76," Quantit\xe9 en (L) "),e.YNc(77,ge,2,0,"strong",48),e.qZA(),e.TgZ(78,"input",51),e.NdJ("ngModelChange",function(r){return n.singleCarburant.qte=r}),e.qZA()(),e.TgZ(79,"div",22)(80,"label",52),e._uU(81," Prix unitaire en (MAD) "),e.YNc(82,pe,2,0,"strong",48),e.qZA(),e.TgZ(83,"input",53),e.NdJ("ngModelChange",function(r){return n.singleCarburant.prix=r}),e.qZA()()(),e.TgZ(84,"div",6)(85,"small",54),e._uU(86,"*: Ces champs sont obligatoires."),e.qZA(),e.TgZ(87,"button",55),e._uU(88,"Enregister"),e.qZA(),e.TgZ(89,"button",56),e._uU(90,"Annuler"),e.qZA()()()()()()()(),e.TgZ(91,"div",57)(92,"div",58)(93,"div",37)(94,"div",59)(95,"div",60)(96,"i",61),e._UZ(97,"i",62),e.qZA()(),e.TgZ(98,"h4",63),e._uU(99,"\xcates-vous s\xfbr?"),e.qZA(),e._UZ(100,"button",64),e.qZA(),e.TgZ(101,"div",65)(102,"p"),e._uU(103,"Voulez-vous vraiment supprimer ces enregistrements\xa0? Ce processus ne peut pas \xeatre annul\xe9. "),e.qZA()(),e.TgZ(104,"div",66)(105,"button",67),e._uU(106,"Annuler"),e.qZA(),e.TgZ(107,"button",68),e.NdJ("click",function(){return n.delete(n.singleCarburant.id)}),e._uU(108,"Supprimer"),e.qZA()()()()()()()}if(2&t){const s=e.MAs(63);e.xp6(14),e.Q6J("ngClass",e.VKq(20,O,"details"==n.type)),e.xp6(3),e.Q6J("ngClass",e.VKq(22,O,"graphe"==n.type)),e.xp6(2),e.Q6J("ngIf","details"==n.type),e.xp6(1),e.Q6J("ngClass",e.VKq(24,J,"graphe"!=n.type)),e.xp6(7),e.Q6J("ngModel",n.search.vehicule_id),e.xp6(3),e.Q6J("ngForOf",n.vehicules),e.xp6(5),e.Q6J("ngModel",n.search.date_debut),e.xp6(6),e.Q6J("ngModel",n.search.date_fin),e.xp6(4),e.Q6J("ngClass",e.VKq(26,J,n.myChart)),e.xp6(3),e.Q6J("ngClass",e.VKq(28,J,!n.myChart)),e.xp6(1),e.Q6J("ngClass",e.VKq(30,J,!n.myChart)),e.xp6(16),e.Q6J("ngModel",n.singleCarburant.id),e.xp6(4),e.Q6J("ngIf",!n.singleCarburant.vehicule_id),e.xp6(1),e.Q6J("ngModel",n.singleCarburant.vehicule_id),e.xp6(3),e.Q6J("ngForOf",n.vehicules),e.xp6(4),e.Q6J("ngIf",!n.singleCarburant.qte),e.xp6(1),e.Q6J("ngModel",n.singleCarburant.qte),e.xp6(4),e.Q6J("ngIf",!n.singleCarburant.prix),e.xp6(1),e.Q6J("ngModel",n.singleCarburant.prix),e.xp6(4),e.Q6J("disabled",!s.valid)}},directives:[u.mk,u.O5,l._Y,l.JL,l.F,l.EJ,l.JJ,l.On,l.YN,l.Kr,u.sg,l.Fj,_.yS,l.Q7,l.wV],pipes:[u.uU],styles:[".date-operation[_ngcontent-%COMP%]{font-weight:700}tfoot[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:10px 20px}li.nav-item[_ngcontent-%COMP%]{font-size:15px}canvas[_ngcontent-%COMP%]{height:300px!important}"]}),i})(),Q=(()=>{class i{constructor(t){this.http=t}getAll(){return this.http.get(d.N.apiURL+"/vehicules/categories/list")}create(t){return this.http.post(d.N.apiURL+"/vehicules/categories",t)}update(t){return this.http.put(d.N.apiURL+"/vehicules/categories/"+t.id,t)}delete(t){return this.http.delete(d.N.apiURL+"/vehicules/categories/"+t)}getCategorie(t){return this.http.get(d.N.apiURL+"/vehicules/categories/"+t)}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(T.eN))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function me(i,a){if(1&i&&(e.TgZ(0,"div",43),e._uU(1),e._UZ(2,"button",44),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.message," ")}}const he=function(i){return{_active:i}};function ve(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",45)(1,"div",46)(2,"h3",47),e._uU(3),e.qZA(),e.TgZ(4,"div",48)(5,"button",49),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.oxw().singleCategorie.id=o.id}),e._UZ(6,"i",50),e.qZA(),e.TgZ(7,"button",51),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.oxw().getCategorie(o.id)}),e._UZ(8,"i",52),e.qZA()()()()}if(2&i){const t=a.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(2,he,n.singleCategorie.id==t.id)),e.xp6(2),e.Oqu(t.nom)}}function Ze(i,a){1&i&&(e.TgZ(0,"strong",28),e._uU(1,"*"),e.qZA())}let be=(()=>{class i{constructor(t,n,s){this.securiteClass=t,this.globale=n,this.vehiculeCategorieService=s,this.categories=[],this.message=null,this.singleCategorie={id:null,nom:null}}ngOnInit(){this.getAllCategorie(),this.globale.closeModal()}getAllCategorie(){this.vehiculeCategorieService.getAll().subscribe(t=>this.categories=t,t=>{401==t.status&&this.securiteClass.refreshToken()&&this.getAllCategorie()})}getCategorie(t){this.message=null,this.vehiculeCategorieService.getCategorie(t).subscribe(n=>this.singleCategorie=n,n=>{401==n.status&&this.securiteClass.refreshToken()&&this.getAllCategorie()})}update(t){t.id?this.vehiculeCategorieService.update(t).subscribe(n=>{this.getAllCategorie(),this.message="La cat\xe9gorie est modifi\xe9e avec succ\xe8s !",this.globale.closeModal()},n=>{401==n.status&&this.securiteClass.refreshToken()&&this.update(t)}):this.vehiculeCategorieService.create(t).subscribe(n=>{this.getAllCategorie(),this.message="La cat\xe9gorie est ajout\xe9e avec succ\xe8s !",this.globale.closeModal()},n=>{401==n.status&&this.securiteClass.refreshToken()&&this.update(t)})}delete(t){this.vehiculeCategorieService.delete(t).subscribe(n=>{this.getAllCategorie(),this.message="La cat\xe9gorie est supprim\xe9e avec succ\xe8s !",this.globale.closeModal()},n=>{401==n.status&&this.securiteClass.refreshToken()&&this.delete(t)})}clear(){this.message=null,this.singleCategorie={id:null,nom:null}}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(b.z),e.Y36(f.N),e.Y36(Q))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-categorie"]],decls:68,vars:6,consts:[[1,"header-body","shadow-sm","p-3","mb-5","bg-white","rounded"],[1,"align-items-end"],[1,"header-pretitle"],[1,"header-title"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],["type","button","data-bs-toggle","modal","data-bs-target","#modal-edit",1,"btn","btn-outline-primary","mb-2",2,"float","right",3,"click"],[1,"fa-solid","fa-plus"],["class","alert alert-success","role","alert",4,"ngIf"],[1,"categories-list","row"],["class","col-xs-4 col-sm-3 col-md-3",4,"ngFor","ngForOf"],["id","modal-edit","tabindex","-1","role","dialog","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],["data-list","",1,"modal-card","card"],[1,"card-header"],["id","exampleModalCenterTitle",1,"card-header-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close","pb-0","mp-0"],[1,"card-body"],[3,"ngSubmit"],["catForm","ngForm"],[1,"frm-region"],["type","hidden","name","id","value","singleCategorie.id",3,"ngModel","ngModelChange"],[1,"form-group"],["for","nom",1,"form-label"],["class","text-danger",4,"ngIf"],["type","text","placeholder","Nom","name","nom","required","",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"text-danger"],["type","submit",1,"btn","btn-success","mb-2","float-right",3,"disabled"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary","float-right",2,"margin-right","5px"],["id","modal-delete","tabindex","-1","role","dialog","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-confirm"],[1,"modal-header","flex-column"],[1,"icon-box"],[1,"material-icons"],[1,"fa-solid","fa-x"],[1,"modal-title","w-100"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"close","btn-close"],[1,"modal-body"],[1,"modal-footer","justify-content-center"],["type","button","data-dismiss","modal","data-bs-dismiss","modal","aria-label","Close",1,"btn","btn-secondary"],["type","button",1,"btn","btn-danger",3,"click"],["role","alert",1,"alert","alert-success"],["type","button","data-bs-dismiss","alert","aria-label","Close",1,"btn-close","pb-0","mp-0"],[1,"col-xs-4","col-sm-3","col-md-3"],[1,"categorie","row",3,"ngClass"],[1,"col-md-8"],[1,"options","col-md-4"],["type","button","data-bs-toggle","modal","data-bs-target","#modal-delete",1,"btn","btn-danger","btn-delete",3,"click"],[1,"fa-solid","fa-trash"],["type","button","data-bs-toggle","modal","data-bs-target","#modal-edit",1,"btn","btn-success","btn-edit",3,"click"],[1,"fa-solid","fa-pen"]],template:function(t,n){if(1&t){const s=e.EpF();e.TgZ(0,"section")(1,"div",0)(2,"div",1)(3,"h6",2),e._uU(4," Gestion des v\xe9hicules "),e.qZA(),e.TgZ(5,"h2",3),e._uU(6," Cat\xe9gories de v\xe9hicule "),e.qZA()()(),e.TgZ(7,"div",4)(8,"div",5)(9,"div",6)(10,"button",7),e.NdJ("click",function(){return n.clear()}),e._UZ(11,"i",8),e.qZA(),e._UZ(12,"br")(13,"br")(14,"br"),e.TgZ(15,"div",5),e.YNc(16,me,3,1,"div",9),e.qZA(),e.TgZ(17,"div",10),e.YNc(18,ve,9,4,"div",11),e.qZA()(),e._UZ(19,"br")(20,"br")(21,"br"),e.qZA(),e.TgZ(22,"div",12)(23,"div",13)(24,"div",14)(25,"div",15)(26,"div",16)(27,"h4",17),e._uU(28," Categorie vehicule "),e.qZA(),e._UZ(29,"button",18),e.qZA(),e.TgZ(30,"div",19)(31,"form",20,21),e.NdJ("ngSubmit",function(){e.CHM(s);const r=e.MAs(32);return n.update(r.value)}),e.TgZ(33,"div",22)(34,"input",23),e.NdJ("ngModelChange",function(r){return n.singleCategorie.id=r}),e.qZA(),e.TgZ(35,"div",24)(36,"label",25),e._uU(37," Nom "),e.YNc(38,Ze,2,0,"strong",26),e.qZA(),e.TgZ(39,"input",27),e.NdJ("ngModelChange",function(r){return n.singleCategorie.nom=r}),e.qZA()()(),e.TgZ(40,"div",6)(41,"small",28),e._uU(42,"*: Ce champ est obligatoire."),e.qZA(),e.TgZ(43,"button",29),e._uU(44,"Enregister"),e.qZA(),e.TgZ(45,"button",30),e._uU(46,"Annuler"),e.qZA()()()()()()()(),e.TgZ(47,"div",31)(48,"div",32)(49,"div",14)(50,"div",33)(51,"div",34)(52,"i",35),e._UZ(53,"i",36),e.qZA()(),e.TgZ(54,"h4",37),e._uU(55,"\xcates-vous s\xfbr?"),e.qZA(),e._UZ(56,"button",38),e.qZA(),e.TgZ(57,"div",39)(58,"p"),e._uU(59,"Voulez-vous vraiment supprimer ces enregistrements\xa0? Ce processus ne peut pas \xeatre annul\xe9. "),e.qZA(),e._UZ(60,"br"),e.qZA(),e.TgZ(61,"div",40)(62,"button",41),e._uU(63,"Annuler"),e.qZA(),e.TgZ(64,"button",42),e.NdJ("click",function(){return n.delete(n.singleCategorie.id)}),e._uU(65,"Supprimer"),e.qZA()()()()(),e._UZ(66,"br")(67,"br"),e.qZA()()}if(2&t){const s=e.MAs(32);e.xp6(16),e.Q6J("ngIf",n.message),e.xp6(2),e.Q6J("ngForOf",n.categories),e.xp6(16),e.Q6J("ngModel",n.singleCategorie.id),e.xp6(4),e.Q6J("ngIf",!n.singleCategorie.nom),e.xp6(1),e.Q6J("ngModel",n.singleCategorie.nom),e.xp6(4),e.Q6J("disabled",!s.valid)}},directives:[u.O5,u.sg,u.mk,l._Y,l.JL,l.F,l.Fj,l.JJ,l.On,l.Q7],styles:[".categories-list[_ngcontent-%COMP%]   .categorie[_ngcontent-%COMP%]{box-shadow:#32325d40 0 2px 5px -1px,#0000004d 0 1px 3px -1px;padding:12px 11px 9px;height:auto;border-radius:8px;margin-bottom:20px;background-color:#fff;min-height:50px;width:100%;margin-left:0}.btn-edit[_ngcontent-%COMP%], .btn-delete[_ngcontent-%COMP%]{padding:3px 5px!important;float:right!important;margin-left:3px;font-size:13px}.options[_ngcontent-%COMP%]{height:25px}.categorie[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:300!important;margin-bottom:0;margin-top:5px}.options[_ngcontent-%COMP%]{opacity:0}.categorie[_ngcontent-%COMP%]:hover   .options[_ngcontent-%COMP%]{opacity:1!important}.categorie[_ngcontent-%COMP%]:hover{color:#155724!important;background-color:#d4edda!important;border-color:#c3e6cb!important;font-weight:400;box-shadow:#00000059 0 5px 15px}"]}),i})();var c=p(5861),v=p(8407);function fe(i,a){if(1&i&&(e.TgZ(0,"div",40)(1,"div",6)(2,"div",41)(3,"div",42)(4,"div",43)(5,"div",44)(6,"div",16)(7,"h6",45),e._uU(8,"Co\xfbt total du 1 km"),e.qZA(),e.TgZ(9,"span",46),e._uU(10),e.qZA()(),e.TgZ(11,"div",47),e._UZ(12,"i",48),e.qZA()()()()(),e.TgZ(13,"div",41)(14,"div",42)(15,"div",43)(16,"div",44)(17,"div",16)(18,"h6",45),e._uU(19,"Co\xfbt total carburants"),e.qZA(),e.TgZ(20,"span",46),e._uU(21),e.qZA()(),e.TgZ(22,"div",47),e._UZ(23,"i",48),e.qZA()()()()(),e.TgZ(24,"div",41)(25,"div",42)(26,"div",43)(27,"div",44)(28,"div",16)(29,"h6",45),e._uU(30,"Co\xfbt total"),e.qZA(),e.TgZ(31,"span",46),e._uU(32),e.qZA()(),e.TgZ(33,"div",47),e._UZ(34,"i",48),e.qZA()()()()(),e.TgZ(35,"div",41)(36,"div",42)(37,"div",43)(38,"div",44)(39,"div",16)(40,"h6",45),e._uU(41,"Co\xfbt des maintenances"),e.qZA(),e.TgZ(42,"span",46),e._uU(43),e.qZA()(),e.TgZ(44,"div",47),e._UZ(45,"i",48),e.qZA()()()()(),e.TgZ(46,"div",41)(47,"div",42)(48,"div",43)(49,"div",44)(50,"div",16)(51,"h6",45),e._uU(52,"Autres co\xfbts"),e.qZA(),e.TgZ(53,"span",46),e._uU(54),e.qZA()(),e.TgZ(55,"div",47),e._UZ(56,"i",48),e.qZA()()()()(),e.TgZ(57,"div",41)(58,"div",42)(59,"div",43)(60,"div",44)(61,"div",16)(62,"h6",45),e._uU(63,"Distance parcourue par jour"),e.qZA(),e.TgZ(64,"span",46),e._uU(65),e.qZA()(),e.TgZ(66,"div",47),e._UZ(67,"i",48),e.qZA()()()()()()()),2&i){const t=e.oxw();let n,s,o,r,g,m;e.xp6(10),e.hij("",null!==(n=null==t.resume.cout_km?null:t.resume.cout_km.toFixed(2))&&void 0!==n?n:"0.00"," Dhs"),e.xp6(11),e.hij("",null!==(s=null==t.resume.montant_carburant?null:t.resume.montant_carburant.toFixed(2))&&void 0!==s?s:"0.00"," Dhs"),e.xp6(11),e.hij("",null!==(o=null==t.resume.cout_total?null:t.resume.cout_total.toFixed(2))&&void 0!==o?o:"0.00"," Dhs"),e.xp6(11),e.hij("",null!==(r=null==t.resume.cout_maintenance?null:t.resume.cout_maintenance.toFixed(2))&&void 0!==r?r:"0.00"," Dhs"),e.xp6(11),e.hij("",null!==(g=null==t.resume.autre_cout?null:t.resume.autre_cout.toFixed(2))&&void 0!==g?g:"0.00"," Dhs"),e.xp6(11),e.hij("",null!==(m=null==t.resume.km_aujourdhui?null:t.resume.km_aujourdhui.toFixed(2))&&void 0!==m?m:"0.00"," Km")}}function Ce(i,a){if(1&i&&(e.TgZ(0,"div",49)(1,"div",6)(2,"div",50)(3,"div",51)(4,"div",15)(5,"div",16)(6,"h5",52),e._uU(7,"Mise en service"),e.qZA()(),e.TgZ(8,"div",47)(9,"time",53),e._uU(10),e.ALo(11,"date"),e.qZA()()()(),e.TgZ(12,"div",51)(13,"div",15)(14,"div",16)(15,"h5",52),e._uU(16,"Dur\xe9e de vie estim\xe9e en mois"),e.qZA()(),e.TgZ(17,"div",47)(18,"strong",54),e._uU(19),e.qZA()()()()(),e.TgZ(20,"div",50)(21,"div",51)(22,"div",15)(23,"div",16)(24,"h5",52),e._uU(25,"Dur\xe9e de vie estim\xe9e en KM"),e.qZA()(),e.TgZ(26,"div",47)(27,"strong",54),e._uU(28),e.qZA()()()(),e.TgZ(29,"div",51)(30,"div",15)(31,"div",16)(32,"h5",52),e._uU(33,"Date de mise hors service"),e.qZA()(),e.TgZ(34,"div",47)(35,"time",55),e._uU(36),e.ALo(37,"date"),e.qZA()()()()()()()),2&i){const t=e.oxw();e.xp6(10),e.Oqu(e.xi3(11,4,t.singleVehicule.mise_en_circulation,"dd/MM/yyyy")),e.xp6(9),e.Oqu(t.singleVehicule.cycle_vie_km),e.xp6(9),e.Oqu(t.singleVehicule.cycle_vie_mois),e.xp6(8),e.Oqu(e.xi3(37,7,t.singleVehicule.date_hors_service,"dd/MM/yyyy"))}}function qe(i,a){if(1&i&&(e.TgZ(0,"div",56)(1,"div",6)(2,"div",12)(3,"h3",13),e._uU(4,"Dimensions"),e.qZA(),e.TgZ(5,"div",57)(6,"div",51)(7,"div",15)(8,"div",16)(9,"h5",52),e._uU(10,"Longueur"),e.qZA()(),e.TgZ(11,"div",47)(12,"strong",54),e._uU(13),e.qZA()()()(),e.TgZ(14,"div",51)(15,"div",15)(16,"div",16)(17,"h5",52),e._uU(18,"Largeur"),e.qZA()(),e.TgZ(19,"div",47)(20,"strong",54),e._uU(21),e.qZA()()()(),e.TgZ(22,"div",51)(23,"div",15)(24,"div",16)(25,"h5",52),e._uU(26,"Hauteur"),e.qZA()(),e.TgZ(27,"div",47)(28,"strong",54),e._uU(29),e.qZA()()()(),e.TgZ(30,"div",51)(31,"div",15)(32,"div",16)(33,"h5",52),e._uU(34,"Volume interieur"),e.qZA()(),e.TgZ(35,"div",47)(36,"strong",54),e._uU(37),e.qZA()()()()()(),e.TgZ(38,"div",12)(39,"h3",13),e._uU(40,"Poids"),e.qZA(),e.TgZ(41,"div",58)(42,"div",51)(43,"div",15)(44,"div",16)(45,"h5",52),e._uU(46,"Poids \xe0 vide"),e.qZA()(),e.TgZ(47,"div",47)(48,"strong",54),e._uU(49),e.qZA()()()()(),e._UZ(50,"br"),e.TgZ(51,"h3",13),e._uU(52,"Performance"),e.qZA(),e.TgZ(53,"div",58)(54,"div",51)(55,"div",15)(56,"div",16)(57,"h5",52),e._uU(58,"Capacit\xe9 de remorquage"),e.qZA()(),e.TgZ(59,"div",47)(60,"strong",54),e._uU(61),e.qZA()()()(),e.TgZ(62,"div",51)(63,"div",15)(64,"div",16)(65,"h5",52),e._uU(66,"Charge maximale"),e.qZA()(),e.TgZ(67,"div",47)(68,"strong",54),e._uU(69),e.qZA()()()()()()()()),2&i){const t=e.oxw();e.xp6(13),e.hij("",t.singleVehicule.longeur," m"),e.xp6(8),e.hij("",t.singleVehicule.largeur," m"),e.xp6(8),e.hij("",t.singleVehicule.hauteur," m"),e.xp6(8),e.hij("",t.singleVehicule.volume," m\xb3"),e.xp6(12),e.hij("",t.singleVehicule.poids," KG"),e.xp6(12),e.hij("",t.singleVehicule.capacite_remorquage," KG"),e.xp6(8),e.hij("",t.singleVehicule.charge_maximale," KG")}}function Te(i,a){if(1&i&&(e.TgZ(0,"div",59)(1,"div",6)(2,"div",12)(3,"h3",13),e._uU(4,"Moteur et transmission"),e.qZA(),e.TgZ(5,"div",58)(6,"div",51)(7,"div",15)(8,"div",16)(9,"h5",52),e._uU(10,"Technologie moteur"),e.qZA()(),e.TgZ(11,"div",47)(12,"strong",54),e._uU(13),e.qZA()()()(),e.TgZ(14,"div",51)(15,"div",15)(16,"div",16)(17,"h5",52),e._uU(18,"nbre Cylindr\xe9e"),e.qZA()(),e.TgZ(19,"div",47)(20,"strong",54),e._uU(21),e.qZA()()()(),e.TgZ(22,"div",51)(23,"div",15)(24,"div",16)(25,"h5",52),e._uU(26,"Volume Cylindr\xe9e"),e.qZA()(),e.TgZ(27,"div",47)(28,"strong",54),e._uU(29),e.qZA()()()(),e.TgZ(30,"div",51)(31,"div",15)(32,"div",16)(33,"h5",52),e._uU(34,"Puissance fiscale"),e.qZA()(),e.TgZ(35,"div",47)(36,"strong",54),e._uU(37),e.qZA()()()(),e.TgZ(38,"div",51)(39,"div",15)(40,"div",16)(41,"h5",52),e._uU(42,"Vitesse maximale"),e.qZA()(),e.TgZ(43,"div",47)(44,"strong",54),e._uU(45),e.qZA()()()()(),e._UZ(46,"br"),e.qZA(),e.TgZ(47,"div",12)(48,"h3",13),e._uU(49,"Ecologie"),e.qZA(),e.TgZ(50,"div",58)(51,"div",51)(52,"div",15)(53,"div",16)(54,"h5",52),e._uU(55,"Consommation en ville"),e.qZA()(),e.TgZ(56,"div",47)(57,"strong",54),e._uU(58),e.qZA()()()(),e.TgZ(59,"div",51)(60,"div",15)(61,"div",16)(62,"h5",52),e._uU(63,"Consommation en autoroute"),e.qZA()(),e.TgZ(64,"div",47)(65,"strong",54),e._uU(66),e.qZA()()()(),e.TgZ(67,"div",51)(68,"div",15)(69,"div",16)(70,"h5",52),e._uU(71,"Consommation mixte"),e.qZA()(),e.TgZ(72,"div",47)(73,"strong",54),e._uU(74),e.qZA()()()(),e.TgZ(75,"div",51)(76,"div",15)(77,"div",16)(78,"h5",52),e._uU(79,"Emission CO2"),e.qZA()(),e.TgZ(80,"div",47)(81,"strong",54),e._uU(82),e.qZA()()()()()()()()),2&i){const t=e.oxw();e.xp6(13),e.Oqu(t.singleVehicule.technologie_moteur),e.xp6(8),e.Oqu(t.singleVehicule.nbre_cylindre),e.xp6(8),e.Oqu(t.singleVehicule.volume_cylindre),e.xp6(8),e.hij("",t.singleVehicule.puissance_fiscale," cv"),e.xp6(8),e.hij("",t.singleVehicule.limite_vitesse," KM/H"),e.xp6(13),e.Oqu(t.singleVehicule.consommation_ville),e.xp6(8),e.Oqu(t.singleVehicule.consommation_autoroute),e.xp6(8),e.Oqu(t.singleVehicule.consommation_mixte),e.xp6(8),e.Oqu(t.singleVehicule.emission_co2)}}function Me(i,a){if(1&i&&(e.TgZ(0,"div",60)(1,"div",6)(2,"div",12)(3,"div",58)(4,"div",51)(5,"div",15)(6,"div",16)(7,"h5",52),e._uU(8,"Syst\xe8me du freinage"),e.qZA()(),e.TgZ(9,"div",47)(10,"strong",54),e._uU(11),e.qZA()()()(),e.TgZ(12,"div",51)(13,"div",15)(14,"div",16)(15,"h5",52),e._uU(16,"Largeur du pneu"),e.qZA()(),e.TgZ(17,"div",47)(18,"strong",54),e._uU(19),e.qZA()()()(),e.TgZ(20,"div",51)(21,"div",15)(22,"div",16)(23,"h5",52),e._uU(24,"Rapport hauteur/largeur"),e.qZA()(),e.TgZ(25,"div",47)(26,"strong",54),e._uU(27),e.qZA()()()(),e.TgZ(28,"div",51)(29,"div",15)(30,"div",16)(31,"h5",52),e._uU(32,"Indice de charge"),e.qZA()(),e.TgZ(33,"div",47)(34,"strong",54),e._uU(35),e.qZA()()()()(),e._UZ(36,"br"),e.qZA(),e.TgZ(37,"div",12)(38,"div",58)(39,"div",51)(40,"div",15)(41,"div",16)(42,"h5",52),e._uU(43,"Indice de vitesse"),e.qZA()(),e.TgZ(44,"div",47)(45,"strong",54),e._uU(46),e.qZA()()()(),e.TgZ(47,"div",51)(48,"div",15)(49,"div",16)(50,"h5",52),e._uU(51,"Empattement"),e.qZA()(),e.TgZ(52,"div",47)(53,"strong",54),e._uU(54),e.qZA()()()(),e.TgZ(55,"div",51)(56,"div",15)(57,"div",16)(58,"h5",52),e._uU(59,"Diam\xe8tre de la roue avant"),e.qZA()(),e.TgZ(60,"div",47)(61,"strong",54),e._uU(62),e.qZA()()()(),e.TgZ(63,"div",51)(64,"div",15)(65,"div",16)(66,"h5",52),e._uU(67,"Diam\xe8tre de la roue arri\xe8re"),e.qZA()(),e.TgZ(68,"div",47)(69,"strong",54),e._uU(70),e.qZA()()()()()()()()),2&i){const t=e.oxw();e.xp6(11),e.Oqu(t.singleVehicule.systeme_freinage),e.xp6(8),e.Oqu(t.singleVehicule.longeur_pneu),e.xp6(8),e.Oqu(t.singleVehicule.rapport_hauteur_longeur),e.xp6(8),e.Oqu(t.singleVehicule.indice_charge),e.xp6(11),e.Oqu(t.singleVehicule.indice_vitesse),e.xp6(8),e.Oqu(t.singleVehicule.empattement),e.xp6(8),e.Oqu(t.singleVehicule.diametre_roue_avant),e.xp6(8),e.Oqu(t.singleVehicule.diametre_roue_arriere)}}function Ae(i,a){if(1&i&&(e.TgZ(0,"div",61)(1,"div",58)(2,"div",51)(3,"div",15)(4,"div",16)(5,"h5",52),e._uU(6,"Capacit\xe9 du huile (L)"),e.qZA()(),e.TgZ(7,"div",47)(8,"strong",54),e._uU(9),e.qZA()()()(),e.TgZ(10,"div",51)(11,"div",15)(12,"div",16)(13,"h5",52),e._uU(14,"Capacit\xe9 r\xe9servoir carburant"),e.qZA()(),e.TgZ(15,"div",47)(16,"strong",54),e._uU(17),e.qZA()()()()(),e._UZ(18,"br"),e.qZA()),2&i){const t=e.oxw();e.xp6(9),e.Oqu(t.singleVehicule.capacite_huile),e.xp6(8),e.Oqu(t.singleVehicule.volume_reservoir)}}const A=function(i){return{active:i}},xe=function(i){return{"d-none":i}};let Ue=(()=>{class i{constructor(t,n,s,o,r,g){this.securiteClass=t,this.globale=n,this.vehiculeService=s,this.activatedRoute=o,this.geoLocalisationService=r,this.datePipe=g,this.type="details",this.date=new Date,this.markers=[],this.positions=[],this.singleVehicule={id:null,groupe_id:null,marque_id:null,modele_id:null,matricule:null,statut:null,boite_vitesse:null,description:null,puissance_cv:null,mise_en_circulation:null,classe_energitique:null,compteur_initial:null,periode_revision:null,km_revision:null,niveau_reservoir:null,type_contrat:null,cycle_vie_mois:null,cycle_vie_km:null,date_hors_service:null,longeur:null,largeur:null,hauteur:null,volume:null,poids:null,charge_maximale:null,capacite_remorquage:null,technologie_moteur:null,energie:null,nbre_cylindre:null,volume_cylindre:null,puissance_fiscale:null,limite_vitesse:null,consommation_ville:null,consommation_autoroute:null,consommation_mixte:null,emission_co2:null,systeme_freinage:null,longeur_pneu:null,rapport_hauteur_longeur:null,indice_charge:null,indice_vitesse:null,empattement:null,diametre_roue_avant:null,diametre_roue_arriere:null,capacite_huile:null,volume_reservoir:null},this.resume={cout_km:0,montant_carburant:0,cout_total:0,cout_maintenance:0,autre_cout:0,km_aujourdhui:0}}ngOnInit(){this.activatedRoute.params.subscribe(t=>{const{id:n}=t;n&&(this.getVehiculeById(n),h.kL.register(...h.zX),this._test(n),this.getDistanceJour(n))})}getDistanceJour(t){this.geoLocalisationService.getAnalyseVehicule({vehicule_id:t,date_debut:this.datePipe.transform(this.date,"yyyy-MM-dd"),date_fin:this.datePipe.transform(this.date,"yyyy-MM-dd")}).subscribe(n=>this.resume.km_aujourdhui=[...n.distance].reduce((s,o)=>s+o.distance,0))}getVehiculeById(t){var n=this;this.vehiculeService.getVehiculeById(t).subscribe(s=>{this.singleVehicule=s,this.getPositions(t)},function(){var s=(0,c.Z)(function*(o){401==o.status&&(yield n.securiteClass.refreshToken())&&n.getVehiculeById(t)});return function(o){return s.apply(this,arguments)}}())}createChart(t,n,s){this.myChart=C("#"+t),new h.kL(this.myChart,{type:"line",data:{datasets:[{data:s,label:n,backgroundColor:"rgba(54, 162, 235)"}]},options:{scales:{x:{grid:{drawOnChartArea:!1}},y:{grid:{drawOnChartArea:!1}}},plugins:{legend:{display:!1}}}})}initMap(t,n,s){const o=v.DomUtil.get("map");if(null!=o&&o.childElementCount>0&&this.map.remove(),this.positions.length>0){if(this.map=v.map("map",{center:[t,n],zoom:s}),v.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:18,minZoom:2,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(this.map),this.createMarker(this.positions[0]),this.map.eachLayer(g=>{g instanceof v.Marker&&this.markers.push(g)}),this.markers.length>0){const g=v.latLngBounds([this.markers[0].getLatLng()]);this.markers.forEach(m=>{g.extend(m.getLatLng())}),this.map.flyToBounds(g,{padding:v.point(36,36),animate:!0})}}else this.map=v.map("map",{center:[33.9727213,-6.8867775],zoom:5}),v.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:18,minZoom:3,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(this.map);this.mapCorrections()}mapCorrections(){this.map.whenReady(()=>{setTimeout(()=>{this.map.invalidateSize()},500)})}getPositions(t){this.geoLocalisationService.getPositions(t,null).subscribe(n=>{this.positions=n,this.initMap(33.9727213,-6.8867775,5)})}createMarker(t){const n=v.icon({iconUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=",iconSize:[20,30],iconAnchor:[10,30]}),s=v.marker([t.latitude,t.longitude],{icon:n}),o=new Date(t.timestamp);s.bindPopup(`\n      <p style="font-size: 13px">\n        <b>Matricule: </b><br>\n        ${t.matricule}<br><br>\n        <b>Date :</b><br>         \n        ${o.getDate().toString().padStart(2,"0")}/${(o.getMonth()+1).toString().padStart(2,"0")}/${o.getFullYear().toString().padStart(2,"0")} ${o.getHours().toString().padStart(2,"0")}:${o.getMinutes().toString().padStart(2,"0")}:${o.getSeconds().toString().padStart(2,"0")}<br><br>\n        Adresse: <b>${t.adresse?JSON.parse(t.adresse).label:""}</b><br><br>\n        <b>G.P.S : </b><br>\n        Lat/lng : <b>${t.latitude}, ${t.longitude}</b><br>\n        Altitude : <b>${t.altitude} (m)</b><br><br>\n        Vitesse: <b>${t.speed} (km/h)</b><br><br>\n        </p>`),s.openPopup(),s.addTo(this.map)}_test(t){const n=["JAN","FEV","MAR","AVR","MAI","JUN","JUL","AOU","SEP","OCT","NOV","DEC"];this.geoLocalisationService.analyseParVehicule(t).subscribe(s=>{this.resume.cout_km=[...s.coutKM].filter(o=>o.mois==this.date.getMonth()+1)[0].coutKM,this.resume.montant_carburant=s.moisEncours.cout_carburant,this.resume.cout_total=[...s.coutTotal].filter(o=>o.mois==this.date.getMonth()+1)[0].coutTotal,this.resume.cout_maintenance=s.moisEncours.cout_maintenance,this.resume.autre_cout=this.resume.cout_total-(this.resume.montant_carburant+this.resume.cout_maintenance),this.createChart("chartCoutTotalCarburant","Cout total carburants",s.coutFuel.map(o=>({x:n[o.mois-1],y:o.coutFuel}))),this.createChart("chartCoutTotal","Cout total",s.coutTotal.map(o=>({x:n[o.mois-1],y:o.coutTotal})))})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(b.z),e.Y36(f.N),e.Y36(M.t),e.Y36(_.gz),e.Y36(H.O),e.Y36(u.uU))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-dashboard"]],decls:127,vars:35,consts:[[1,"dashboard-v"],[1,"header-body","shadow-sm","p-3","mb-5","bg-white","rounded"],[1,"align-items-end"],[1,"header-pretitle"],[1,"header-title"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"infos-generales"],[1,"col-md-3"],["src","https://up.uplogistix.net/doc/images_vehicule/image_vehicule_par_defaut.png","alt",""],[1,"col-md-9"],[1,"col-md-6"],[1,"text-primary"],[1,"infos-detaillees"],[1,"row","align-items-center"],[1,"col"],[1,"nav","nav-tabs","nav-overflow","header-tabs"],[1,"nav-item"],[1,"nav-link","active",3,"ngClass","click"],[1,"nav-link",3,"ngClass","click"],[1,"contient"],["class","details",4,"ngIf"],["class","cycle_de_vie",4,"ngIf"],["class","specifications",4,"ngIf"],["class","moteur_transmission",4,"ngIf"],["class","roues_pneus",4,"ngIf"],["class","liquides",4,"ngIf"],[1,"autre-infos",3,"ngClass"],[1,"row","padding-top"],[1,"col-md-6","margin-right"],[1,"titre"],["id","chartCoutTotalCarburant"],["id","chartCoutTotal"],[1,"no-data"],["src","assets/img/illustrations/scale.svg","alt","",1,"img-no-data"],[1,"text-muted","text-center"],[1,"map-container"],[1,"map-frame"],["id","map"],[1,"details"],[1,"col-md-4"],[1,"card"],[1,"card-body"],[1,"row","align-items-center","gx-0"],[1,"text-uppercase","text-muted","mb-2"],[1,"h2","mb-0"],[1,"col-auto"],[1,"fa-solid","fa-car","text-muted","mb-0"],[1,"cycle_de_vie"],[1,"list-group","list-group-flush","my-n3","col-md-5"],[1,"list-group-item"],[1,"mb-0"],["datetime","",1,"small","text-muted"],[1,"small"],["date","12-12-2012",1,"small","text-muted"],[1,"specifications"],[1,"list-group","list-group-flush","my-n3",2,"padding","19px 20px !important"],[1,"list-group","list-group-flush","my-n3"],[1,"moteur_transmission"],[1,"roues_pneus"],[1,"liquides"]],template:function(t,n){1&t&&(e.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"h6",3),e._uU(4," Gestion des v\xe9hicules "),e.qZA(),e.TgZ(5,"h2",4),e._uU(6," Tableau de bord du v\xe9hicule "),e.qZA()()(),e.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",6),e._UZ(12,"h3"),e.TgZ(13,"div",9),e._UZ(14,"img",10),e.qZA(),e.TgZ(15,"div",11)(16,"h3"),e._uU(17),e.qZA(),e.TgZ(18,"div",6)(19,"div",12)(20,"ul")(21,"li"),e._uU(22,"Matricule: "),e.TgZ(23,"strong",13),e._uU(24),e.qZA()(),e.TgZ(25,"li"),e._uU(26,"Statut: "),e.TgZ(27,"strong",13),e._uU(28),e.qZA()(),e.TgZ(29,"li"),e._uU(30,"Bo\xeete de vitesse: "),e.TgZ(31,"strong",13),e._uU(32),e.qZA()(),e.TgZ(33,"li"),e._uU(34,"Puissance cv: "),e.TgZ(35,"strong",13),e._uU(36),e.qZA()()()(),e.TgZ(37,"div",12)(38,"ul")(39,"li"),e._uU(40,"Periode revision: "),e.TgZ(41,"strong",13),e._uU(42),e.qZA()(),e.TgZ(43,"li"),e._uU(44,"Volume reservoir: "),e.TgZ(45,"strong",13),e._uU(46),e.qZA()(),e.TgZ(47,"li"),e._uU(48,"Type contrat: "),e.TgZ(49,"strong",13),e._uU(50),e.qZA()()()()()()()(),e.TgZ(51,"div",14)(52,"div",15)(53,"div",16)(54,"ul",17)(55,"li",18)(56,"button",19),e.NdJ("click",function(){return n.type="details"}),e._uU(57," D\xe9tails "),e.qZA()(),e.TgZ(58,"li",18)(59,"button",20),e.NdJ("click",function(){return n.type="cycle_de_vie"}),e._uU(60," Cycle de vie "),e.qZA()(),e.TgZ(61,"li",18)(62,"button",20),e.NdJ("click",function(){return n.type="specifications"}),e._uU(63," Sp\xe9cifications "),e.qZA()(),e.TgZ(64,"li",18)(65,"button",20),e.NdJ("click",function(){return n.type="moteur_transmission"}),e._uU(66," Moteur/transmission "),e.qZA()(),e.TgZ(67,"li",18)(68,"button",20),e.NdJ("click",function(){return n.type="roues_pneus"}),e._uU(69," Roues et pneus "),e.qZA()(),e.TgZ(70,"li",18)(71,"button",20),e.NdJ("click",function(){return n.type="liquides"}),e._uU(72," Liquides "),e.qZA()()()(),e._UZ(73,"br")(74,"br")(75,"br")(76,"br"),e.qZA(),e.TgZ(77,"div",21),e.YNc(78,fe,68,6,"div",22),e.YNc(79,Ce,38,10,"div",23),e.YNc(80,qe,70,7,"div",24),e.YNc(81,Te,83,9,"div",25),e.YNc(82,Me,71,8,"div",26),e.YNc(83,Ae,19,2,"div",27),e.qZA()(),e._UZ(84,"br")(85,"br"),e.TgZ(86,"div",28)(87,"div",29)(88,"div",30)(89,"h3",31),e._uU(90,"Co\xfbt total carburants Dhs"),e.qZA(),e._UZ(91,"canvas",32),e.qZA(),e.TgZ(92,"div",12)(93,"h3",31),e._uU(94,"Co\xfbt total Dhs"),e.qZA(),e._UZ(95,"canvas",33),e.qZA()(),e.TgZ(96,"div",6)(97,"div",30)(98,"h3",31),e._uU(99,"Maintenance prevue"),e.qZA(),e.TgZ(100,"div",34),e._UZ(101,"img",35),e.TgZ(102,"p",36),e._uU(103,"Pas de donn\xe9e ..."),e.qZA()()(),e.TgZ(104,"div",12)(105,"h3",31),e._uU(106,"Rappels"),e.qZA(),e.TgZ(107,"div",34),e._UZ(108,"img",35),e.TgZ(109,"p",36),e._uU(110,"Pas de donn\xe9e ..."),e.qZA()()()(),e.TgZ(111,"div",6)(112,"div",30)(113,"h3",31),e._uU(114,"Alerts"),e.qZA(),e.TgZ(115,"div",34),e._UZ(116,"img",35),e.TgZ(117,"p",36),e._uU(118,"Pas de donn\xe9e ..."),e.qZA()()(),e.TgZ(119,"div",12)(120,"h3",31),e._uU(121,"Derniere position"),e.qZA(),e.TgZ(122,"div",37)(123,"div",38),e._UZ(124,"div",39),e.qZA()()()()(),e._UZ(125,"br")(126,"br"),e.qZA()()()()),2&t&&(e.xp6(17),e.Oqu(n.singleVehicule.marque),e.xp6(7),e.Oqu(n.singleVehicule.matricule),e.xp6(4),e.Oqu(n.singleVehicule.statut),e.xp6(4),e.Oqu(n.singleVehicule.boite_vitesse),e.xp6(4),e.Oqu(n.singleVehicule.puissance_cv),e.xp6(6),e.Oqu(n.singleVehicule.Periode_revision),e.xp6(4),e.Oqu(n.singleVehicule.volume_reservoir),e.xp6(4),e.Oqu(n.singleVehicule.type_contrat),e.xp6(6),e.Q6J("ngClass",e.VKq(21,A,"details"==n.type)),e.xp6(3),e.Q6J("ngClass",e.VKq(23,A,"cycle_de_vie"==n.type)),e.xp6(3),e.Q6J("ngClass",e.VKq(25,A,"specifications"==n.type)),e.xp6(3),e.Q6J("ngClass",e.VKq(27,A,"moteur_transmission"==n.type)),e.xp6(3),e.Q6J("ngClass",e.VKq(29,A,"roues_pneus"==n.type)),e.xp6(3),e.Q6J("ngClass",e.VKq(31,A,"liquides"==n.type)),e.xp6(7),e.Q6J("ngIf","details"==n.type),e.xp6(1),e.Q6J("ngIf","cycle_de_vie"==n.type),e.xp6(1),e.Q6J("ngIf","specifications"==n.type),e.xp6(1),e.Q6J("ngIf","moteur_transmission"==n.type),e.xp6(1),e.Q6J("ngIf","roues_pneus"==n.type),e.xp6(1),e.Q6J("ngIf","liquides"==n.type),e.xp6(3),e.Q6J("ngClass",e.VKq(33,xe,"details"!=n.type)))},directives:[u.mk,u.O5],pipes:[u.uU],styles:[".infos-generales[_ngcontent-%COMP%], .contient[_ngcontent-%COMP%], .autre-infos[_ngcontent-%COMP%]{box-shadow:#32325d40 0 13px 27px -5px,#0000004d 0 8px 16px -8px;padding:15px 20px;border-radius:10px}.infos-generales[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60%;margin:auto;display:block}.cycle_de_vie[_ngcontent-%COMP%]   .list-group[_ngcontent-%COMP%], .specifications[_ngcontent-%COMP%]   .list-group[_ngcontent-%COMP%], .moteur_transmission[_ngcontent-%COMP%]   .list-group[_ngcontent-%COMP%], .roues_pneus[_ngcontent-%COMP%]   .list-group[_ngcontent-%COMP%], .liquides[_ngcontent-%COMP%]   .list-group[_ngcontent-%COMP%]{display:block;margin:auto;box-shadow:#0000003d 0 3px 8px;padding:0 20px!important}.cycle_de_vie[_ngcontent-%COMP%], .specifications[_ngcontent-%COMP%]{margin:20px 10px!important}.specifications[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .moteur_transmission[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px;margin-bottom:22px}.map-container[_ngcontent-%COMP%]{top:0;left:0;height:270px;right:0;bottom:0}.map-frame[_ngcontent-%COMP%], #map[_ngcontent-%COMP%]{height:100%}.img-no-data[_ngcontent-%COMP%]{width:330px;display:block;margin:auto}h3.titre[_ngcontent-%COMP%]{text-align:left;font-weight:700}.autre-infos[_ngcontent-%COMP%]   .col-md-6[_ngcontent-%COMP%]{box-shadow:#0000003d 0 3px 8px;width:49%;padding:15px;margin-bottom:2%;border-radius:6px}.margin-right[_ngcontent-%COMP%]{margin-right:2%}.details[_ngcontent-%COMP%]   i.fa-car[_ngcontent-%COMP%]{font-size:25px}.infos-detaillees[_ngcontent-%COMP%]{margin-top:25px}.autre-infos[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{padding-left:2%;padding-right:2%}.padding-top[_ngcontent-%COMP%]{margin-top:2%}"]}),i})(),w=(()=>{class i{constructor(t){this.http=t}getAll(){return this.http.get(d.N.apiURL+"/vehicules/groupes/list")}create(t){return this.http.post(d.N.apiURL+"/vehicules/groupes",t)}update(t){return this.http.put(d.N.apiURL+"/vehicules/groupes/"+t.id,t)}delete(t){return this.http.delete(d.N.apiURL+"/vehicules/groupes/"+t)}getGroupe(t){return this.http.get(d.N.apiURL+"/vehicules/groupes/"+t)}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(T.eN))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),K=(()=>{class i{constructor(t){this.http=t}getModelesByMarqueId(t){return this.http.get(d.N.apiURL+"/vehicules/marque/"+t+"/modeles")}create(t){return this.http.post(d.N.apiURL+"/vehicules/modeles",t)}update(t){return this.http.put(d.N.apiURL+"/vehicules/modeles/"+t.id,t)}delete(t){return this.http.delete(d.N.apiURL+"/vehicules/modeles/"+t)}getModelesByCategorieAndMarque(t,n){return this.http.get(d.N.apiURL+"/vehicules/categorie/"+t+"/marque/"+n+"/modeles")}getModele(t){return this.http.get(d.N.apiURL+"/vehicules/modeles/"+t)}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(T.eN))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var ye=p(333);let N=(()=>{class i{constructor(t){this.http=t}getAll(){return this.http.get(d.N.apiURL+"/vehicules/marques/list")}getAllByPage(t){return this.http.get(d.N.apiURL+"/vehicules/marques/page/"+t)}uploadLogo(t){return this.http.post(d.N.apiURL+"/vehicules/marques/images",t)}create(t){return this.http.post(d.N.apiURL+"/vehicules/marques",t)}update(t){return this.http.put(d.N.apiURL+"/vehicules/marques/"+t.id,t)}delete(t){return this.http.delete(d.N.apiURL+"/vehicules/marques/"+t)}search(t,n){return this.http.post(d.N.apiURL+"/vehicules/marques/find/page/"+n,t)}getMarquesByCategorieId(t){return this.http.get(d.N.apiURL+"/vehicules/categorie/"+t+"/marques")}getMarque(t){return this.http.get(d.N.apiURL+"/vehicules/marques/"+t)}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(T.eN))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const q=function(i){return{active:i}};function Je(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return s.type="documents",s.message=""}),e._uU(1," Documents du v\xe9hicule "),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("ngClass",e.VKq(1,q,"documents"==t.type))}}function Ne(i,a){if(1&i&&(e.TgZ(0,"div",110),e._uU(1),e._UZ(2,"button",111),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.message," ")}}function ke(i,a){1&i&&(e.TgZ(0,"strong",107),e._uU(1,"*"),e.qZA())}function Ve(i,a){if(1&i&&(e.TgZ(0,"option",112),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.s9C("value",t.id),e.xp6(1),e.hij("",t.nom," ")}}function Oe(i,a){1&i&&(e.TgZ(0,"strong",107),e._uU(1,"*"),e.qZA())}function Ee(i,a){if(1&i&&(e.TgZ(0,"option",112),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.nom,"")}}function Qe(i,a){if(1&i&&(e.TgZ(0,"option",112),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.nom,"")}}function we(i,a){1&i&&(e.TgZ(0,"strong",107),e._uU(1,"*"),e.qZA())}function Se(i,a){if(1&i&&(e.TgZ(0,"option",112),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.nom,"")}}function Fe(i,a){if(1&i&&(e.TgZ(0,"div",23)(1,"label",24),e._uU(2),e.qZA(),e._UZ(3,"input",113),e.ALo(4,"date"),e.qZA()),2&i){const t=a.$implicit,n=a.index;e.xp6(2),e.Oqu(t.vehicule_document),e.xp6(1),e.MGl("name","valeur_",n,""),e.Q6J("ngModel",e.xi3(4,3,t.valeur,"yyyy-MM-dd"))}}function De(i,a){1&i&&(e.TgZ(0,"div",114)(1,"div",115)(2,"h4",116),e._UZ(3,"i",117),e._uU(4," Pas de donn\xe9e "),e.qZA()()())}function Le(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",118)(1,"div",23)(2,"label",24),e._uU(3,"Dur\xe9e de vie estim\xe9e en mois"),e.qZA(),e.TgZ(4,"input",119),e.NdJ("ngModelChange",function(s){return e.CHM(t),e.oxw().singleVehicule.cycle_vie_mois=s}),e.qZA()(),e.TgZ(5,"div",23)(6,"label",24),e._uU(7,"Dur\xe9e de vie estim\xe9e en KM"),e.qZA(),e.TgZ(8,"input",120),e.NdJ("ngModelChange",function(s){return e.CHM(t),e.oxw().singleVehicule.cycle_vie_km=s}),e.qZA()(),e.TgZ(9,"div",23)(10,"label",24),e._uU(11,"Date de mise hors service"),e.qZA(),e.TgZ(12,"input",121),e.NdJ("ngModelChange",function(s){return e.CHM(t),e.oxw().singleVehicule.date_hors_service=s}),e.ALo(13,"date"),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(4),e.Q6J("ngModel",t.singleVehicule.cycle_vie_mois),e.xp6(4),e.Q6J("ngModel",t.singleVehicule.cycle_vie_km),e.xp6(4),e.Q6J("ngModel",e.xi3(13,3,t.singleVehicule.date_hors_service,"yyyy-MM-dd"))}}const x=function(i){return{"d-none":i}};let j=(()=>{class i{constructor(t,n,s,o,r,g,m,vn,Zn,bn){this.securiteClass=t,this.globale=n,this.vehiculeGroupeService=s,this.vehiculeModeleService=o,this.vehiculeService=r,this.vehiculeDocumentService=g,this.vehiculeMarqueService=m,this.vehiculeCategorieService=vn,this.location=Zn,this.activatedRoute=bn,this.clients=[],this.groupes=[],this.marques=[],this.modeles=[],this.categories=[],this.categorie_id=0,this.vehiculeDoc=[],this.message=null,this.type="generale",this.singleVehicule={id:null,groupe_id:null,marque_id:null,modele_id:null,matricule:null,statut:null,boite_vitesse:null,description:null,puissance_cv:null,mise_en_circulation:null,classe_energitique:null,compteur_initial:null,periode_revision:null,km_revision:null,niveau_reservoir:null,type_contrat:null,categorie_id:null,cycle_vie_mois:null,cycle_vie_km:null,date_hors_service:null,longeur:null,largeur:null,hauteur:null,volume:null,poids:null,charge_maximale:null,capacite_remorquage:null,technologie_moteur:null,energie:null,nbre_cylindre:null,volume_cylindre:null,puissance_fiscale:null,limite_vitesse:null,consommation_ville:null,consommation_autoroute:null,consommation_mixte:null,emission_co2:null,systeme_freinage:null,longeur_pneu:null,rapport_hauteur_longeur:null,indice_charge:null,indice_vitesse:null,empattement:null,diametre_roue_avant:null,diametre_roue_arriere:null,capacite_huile:null,volume_reservoir:null}}ngOnInit(){this.activatedRoute.params.subscribe(t=>{const{id:n}=t;n&&this.getVehiculeById(n)}),this.getAllGroupes(),this.getAllMarques(),this.getAllCategorie()}changeCategorie(t){this.getModelesByCategorieAndMarque(t.target.value,this.singleVehicule.marque_id)}getAllMarques(){this.vehiculeMarqueService.getAll().subscribe(t=>this.marques=t,t=>{401==t.status&&this.securiteClass.refreshToken()&&this.getAllMarques()})}getAllCategorie(){this.vehiculeCategorieService.getAll().subscribe(t=>this.categories=t,t=>{401==t.status&&this.securiteClass.refreshToken()&&this.getAllCategorie()})}changeMarque(t){this.getModelesByMarqueId(t.target.value)}getModelesByCategorieAndMarque(t,n){this.vehiculeModeleService.getModelesByCategorieAndMarque(t,n).subscribe(s=>this.modeles=s,s=>{401==s.status&&this.securiteClass.refreshToken()&&this.getModelesByCategorieAndMarque(t,n)})}getVehiculeById(t){this.vehiculeService.getVehiculeById(t).subscribe(n=>{this.singleVehicule=n,this.getDocumentsByVehiculeId(t),this.getModelesByMarqueId(this.singleVehicule.marque_id)},n=>{401==n.status&&this.securiteClass.refreshToken()&&this.getVehiculeById(t)})}getAllGroupes(){this.vehiculeGroupeService.getAll().subscribe(t=>this.groupes=t,t=>{401==t.status&&this.securiteClass.refreshToken()&&this.getAllGroupes()})}getModelesByMarqueId(t){this.vehiculeModeleService.getModelesByMarqueId(t).subscribe(n=>this.modeles=n,n=>{401==n.status&&this.securiteClass.refreshToken()&&this.getModelesByMarqueId(t)})}update(t){t.id?this.vehiculeService.update(t).subscribe(n=>{this.vehiculeDoc.forEach(s=>{this.updateDocumentByVehicule(s)}),this.message="Le vehicule est modifi\xe9 avec succ\xe8s !"},n=>{401==n.status&&this.securiteClass.refreshToken()&&this.update(t)}):this.vehiculeService.create(t).subscribe(n=>{this.message="Le vehicule est ajout\xe9 avec succ\xe8s !",this.singleVehicule.id=n.id,this.getDocumentsByVehiculeId(n.id),this.type="documents"},n=>{401==n.status&&this.securiteClass.refreshToken()&&this.update(t)})}getDocumentsByVehiculeId(t){this.vehiculeDocumentService.getDocumentsByVehiculeId(t).subscribe(n=>this.vehiculeDoc=n,n=>{401==n.status&&this.securiteClass.refreshToken()&&this.getDocumentsByVehiculeId(t)})}updateDocumentByVehicule(t){this.vehiculeDocumentService.updateDocumentsByVehicule(t).subscribe(n=>console.log(n),n=>{401==n.status&&this.securiteClass.refreshToken()&&this.updateDocumentByVehicule(t)})}fermer(){this.location.back()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(b.z),e.Y36(f.N),e.Y36(w),e.Y36(K),e.Y36(M.t),e.Y36(ye.G),e.Y36(N),e.Y36(Q),e.Y36(u.Ye),e.Y36(_.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-edit"]],decls:317,vars:95,consts:[[1,"header-body","shadow-sm","p-3","mb-5","bg-white","rounded"],[1,"align-items-end"],[1,"header-pretitle"],[1,"header-title"],[1,"container"],[1,"row"],[1,"col-12"],[1,"client"],[1,"infos-detaillees","mb-4","shadow","p-3","mb-5","bg-white","rounded"],[1,"row","align-items-center"],[1,"col"],[1,"nav","nav-tabs","nav-overflow","header-tabs"],[1,"nav-item"],[1,"nav-link","active",3,"ngClass","click"],["class","nav-link active",3,"ngClass","click",4,"ngIf"],[1,"nav-link",3,"ngClass","click"],[1,"contient"],["class","alert alert-success","role","alert",4,"ngIf"],[1,"frm-vehicule",3,"ngSubmit"],["vehiculeForm","ngForm"],["type","hidden","name","id",3,"ngModel","ngModelChange"],[1,"fiche_vehicule",3,"ngClass"],[1,"col-md-4","col-sm-12"],[1,"form-group"],[1,"form-label"],["class","text-danger",4,"ngIf"],["type","text","name","matricule","required","",1,"form-control",3,"ngModel","ngModelChange"],["name","categorie_id",1,"form-select",3,"ngModel","ngModelChange","change"],["value","null","disabled",""],[3,"value",4,"ngFor","ngForOf"],["name","type_contrat",1,"form-select",3,"ngModel","ngModelChange"],["value","Propre"],["value","Location LLD"],["value","Leasing"],["name","energie",1,"form-select",3,"ngModel","ngModelChange"],["value","Essence"],["value","Diesel"],["value","GPL/CNG"],["value","Hybride Essence"],["value","Hybride Diesel"],["value","Hybride GPL/CNG"],["value","Electrique"],["type","number","name","compteur_initial","required","",1,"form-control",3,"ngModel","ngModelChange"],["name","groupe_id",1,"form-select",3,"ngModel","ngModelChange"],["name","modele_id",1,"form-select",3,"ngModel","ngModelChange"],["name","mise_en_circulation","type","date",1,"form-control",3,"ngModel"],["name","classe_energitique",1,"form-select",3,"ngModel","ngModelChange"],["value","A"],["value","B"],["value","C"],["value","D"],["value","E"],["value","F"],["value","G"],["type","number","name","niveau_reservoir","required","",1,"form-control",3,"ngModel","ngModelChange"],["name","marque_id",1,"form-select",3,"ngModel","ngModelChange","change"],["name","statut",1,"form-select",3,"ngModel","ngModelChange"],["value","Actif"],["value","Inactif"],["value","En maintenance"],["value","Occup\xe9"],["type","number","name","puissance_cv",1,"form-control",3,"ngModel","ngModelChange"],["name","boite_vitesse",1,"form-select",3,"ngModel","ngModelChange"],["value","Manuel"],["value","Automatique"],["value","S\xe9quentielle"],["rows","3","name","description",1,"form-control",3,"ngModel","ngModelChange"],[1,"documents_vehicule",3,"ngClass"],["class","form-group",4,"ngFor","ngForOf"],["class","card bg-light border",4,"ngIf"],["class","cycle_de_vie",4,"ngIf"],[1,"specifications",3,"ngClass"],[1,"col-md-6"],["type","number","name","longeur",1,"form-control",3,"ngModel","ngModelChange"],["type","number","name","largeur",1,"form-control",3,"ngModel","ngModelChange"],["type","number","name","hauteur",1,"form-control",3,"ngModel","ngModelChange"],["type","number","name","volume",1,"form-control",3,"ngModel","ngModelChange"],["type","number","name","poids",1,"form-control",3,"ngModel","ngModelChange"],["type","number","name","capacite_remorquage",1,"form-control",3,"ngModel","ngModelChange"],["type","number","name","charge_maximale",1,"form-control",3,"ngModel","ngModelChange"],[1,"moteur_transmission",3,"ngClass"],["name","technologie_moteur",1,"form-select",3,"ngModel","ngModelChange"],["value","Injection directe (sans turbo)"],["value","Injection directe (avec turbo)"],["value","Injection indirecte (sans turbo)"],["value","Injection indirecte (avec turbo)"],["type","number","name","nbre_cylindre",1,"form-control",3,"ngModel","ngModelChange"],["type","number","name","volume_cylindre",1,"form-control",3,"ngModel","ngModelChange"],["type","number","name","puissance_fiscale",1,"form-control",3,"ngModel","ngModelChange"],["type","number","name","limite_vitesse",1,"form-control",3,"ngModel","ngModelChange"],["type","number","name","consommation_ville",1,"form-control",3,"ngModel","ngModelChange"],["type","number","name","consommation_autoroute",1,"form-control",3,"ngModel","ngModelChange"],["type","number","name","consommation_mixte",1,"form-control",3,"ngModel","ngModelChange"],["type","number","name","emission_co2",1,"form-control",3,"ngModel","ngModelChange"],[1,"roues_pneus",3,"ngClass"],["type","text","name","systeme_freinage",1,"form-control",3,"ngModel","ngModelChange"],["type","number","name","longeur_pneu",1,"form-control",3,"ngModel","ngModelChange"],["type","number","name","rapport_hauteur_longeur",1,"form-control",3,"ngModel","ngModelChange"],["type","number","name","indice_charge",1,"form-control",3,"ngModel","ngModelChange"],["type","number","name","indice_vitesse",1,"form-control",3,"ngModel","ngModelChange"],["type","number","name","empattement",1,"form-control",3,"ngModel","ngModelChange"],["type","number","name","diametre_roue_avant",1,"form-control",3,"ngModel","ngModelChange"],["type","number","name","diametre_roue_arriere",1,"form-control",3,"ngModel","ngModelChange"],[1,"liquides",3,"ngClass"],["type","number","name","capacite_huile",1,"form-control",3,"ngModel","ngModelChange"],["type","number","name","volume_reservoir",1,"form-control",3,"ngModel","ngModelChange"],[1,"mt-4","mb-4"],[1,"text-danger"],["type","submit",1,"btn","btn-primary","w-10","btn-float",3,"disabled"],["type","button",1,"btn","btn-secondary","w-10","btn-float",3,"click"],["role","alert",1,"alert","alert-success"],["type","button","data-bs-dismiss","alert","aria-label","Close",1,"btn-close","pb-0","mp-0"],[3,"value"],["type","date",1,"form-control",3,"name","ngModel"],[1,"card","bg-light","border"],[1,"card-body"],[1,"mb-2"],[1,"fas","fa-exclamation-triangle"],[1,"cycle_de_vie"],["type","number","name","cycle_vie_mois",1,"form-control",3,"ngModel","ngModelChange"],["type","number","name","cycle_vie_km",1,"form-control",3,"ngModel","ngModelChange"],["type","date","name","date_hors_service",1,"form-control",3,"ngModel","ngModelChange"]],template:function(t,n){if(1&t){const s=e.EpF();e.TgZ(0,"section")(1,"div",0)(2,"div",1)(3,"h6",2),e._uU(4," Gestion des v\xe9hicules "),e.qZA(),e.TgZ(5,"h2",3),e._uU(6),e.qZA()()(),e.TgZ(7,"div",4)(8,"div",5)(9,"div",6)(10,"div",7)(11,"div",8)(12,"div",9)(13,"div",10)(14,"ul",11)(15,"li",12)(16,"button",13),e.NdJ("click",function(){return n.type="generale",n.message=""}),e._uU(17," G\xe9n\xe9rale "),e.qZA()(),e.TgZ(18,"li",12),e.YNc(19,Je,2,3,"button",14),e.qZA(),e.TgZ(20,"li",12)(21,"button",15),e.NdJ("click",function(){return n.type="cycle_de_vie",n.message=""}),e._uU(22," Cycle de vie "),e.qZA()(),e.TgZ(23,"li",12)(24,"button",15),e.NdJ("click",function(){return n.type="specifications",n.message=""}),e._uU(25," Sp\xe9cifications "),e.qZA()(),e.TgZ(26,"li",12)(27,"button",15),e.NdJ("click",function(){return n.type="moteur_transmission",n.message=""}),e._uU(28," Moteur/transmission "),e.qZA()(),e.TgZ(29,"li",12)(30,"button",15),e.NdJ("click",function(){return n.type="roues_pneus",n.message=""}),e._uU(31," Roues et pneus "),e.qZA()(),e.TgZ(32,"li",12)(33,"button",15),e.NdJ("click",function(){return n.type="liquides",n.message=""}),e._uU(34," Liquides "),e.qZA()()()()(),e.TgZ(35,"div",16),e.YNc(36,Ne,3,1,"div",17),e.TgZ(37,"form",18,19),e.NdJ("ngSubmit",function(){e.CHM(s);const r=e.MAs(38);return n.update(r.value)}),e.TgZ(39,"input",20),e.NdJ("ngModelChange",function(r){return n.singleVehicule.id=r}),e.qZA(),e.TgZ(40,"div",21)(41,"div",5)(42,"div",22)(43,"div",23)(44,"label",24),e._uU(45," Matricule "),e.YNc(46,ke,2,0,"strong",25),e.qZA(),e.TgZ(47,"input",26),e.NdJ("ngModelChange",function(r){return n.singleVehicule.matricule=r}),e.qZA()(),e.TgZ(48,"div",23)(49,"label",24),e._uU(50,"Cat\xe9gorie"),e.qZA(),e.TgZ(51,"select",27),e.NdJ("ngModelChange",function(r){return n.singleVehicule.categorie_id=r})("change",function(r){return n.changeCategorie(r)}),e.TgZ(52,"option",28),e._uU(53,"Veuillez choisir..."),e.qZA(),e.YNc(54,Ve,2,2,"option",29),e.qZA()(),e.TgZ(55,"div",23)(56,"label",24),e._uU(57,"Type de contrat"),e.qZA(),e.TgZ(58,"select",30),e.NdJ("ngModelChange",function(r){return n.singleVehicule.type_contrat=r}),e.TgZ(59,"option",28),e._uU(60,"Veuillez choisir..."),e.qZA(),e.TgZ(61,"option",31),e._uU(62,"Propre"),e.qZA(),e.TgZ(63,"option",32),e._uU(64,"Location LLD"),e.qZA(),e.TgZ(65,"option",33),e._uU(66,"Leasing"),e.qZA()()(),e.TgZ(67,"div",23)(68,"label",24),e._uU(69,"\xc9nergie"),e.qZA(),e.TgZ(70,"select",34),e.NdJ("ngModelChange",function(r){return n.singleVehicule.energie=r}),e.TgZ(71,"option",28),e._uU(72,"Veuillez choisir..."),e.qZA(),e.TgZ(73,"option",35),e._uU(74,"Essence"),e.qZA(),e.TgZ(75,"option",36),e._uU(76,"Diesel"),e.qZA(),e.TgZ(77,"option",37),e._uU(78,"GPL/CNG"),e.qZA(),e.TgZ(79,"option",38),e._uU(80,"Hybride Essence"),e.qZA(),e.TgZ(81,"option",39),e._uU(82,"Hybride Diesel"),e.qZA(),e.TgZ(83,"option",40),e._uU(84,"Hybride GPL/CNG"),e.qZA(),e.TgZ(85,"option",41),e._uU(86,"Electrique"),e.qZA()()(),e.TgZ(87,"div",23)(88,"label",24),e._uU(89," Compteur initial (km) "),e.YNc(90,Oe,2,0,"strong",25),e.qZA(),e.TgZ(91,"input",42),e.NdJ("ngModelChange",function(r){return n.singleVehicule.compteur_initial=r}),e.qZA()()(),e.TgZ(92,"div",22)(93,"div",23)(94,"label",24),e._uU(95,"Groupe"),e.qZA(),e.TgZ(96,"select",43),e.NdJ("ngModelChange",function(r){return n.singleVehicule.groupe_id=r}),e.TgZ(97,"option",28),e._uU(98,"Veuillez choisir..."),e.qZA(),e.YNc(99,Ee,2,2,"option",29),e.qZA()(),e.TgZ(100,"div",23)(101,"label",24),e._uU(102,"Mod\xe8le"),e.qZA(),e.TgZ(103,"select",44),e.NdJ("ngModelChange",function(r){return n.singleVehicule.modele_id=r}),e.TgZ(104,"option",28),e._uU(105,"Veuillez choisir..."),e.qZA(),e.YNc(106,Qe,2,2,"option",29),e.qZA()(),e.TgZ(107,"div",23)(108,"label",24),e._uU(109,"Mise en circulation"),e.qZA(),e._UZ(110,"input",45),e.ALo(111,"date"),e.qZA(),e.TgZ(112,"div",23)(113,"label",24),e._uU(114,"Classe \xe9nerg\xe9tique"),e.qZA(),e.TgZ(115,"select",46),e.NdJ("ngModelChange",function(r){return n.singleVehicule.classe_energitique=r}),e.TgZ(116,"option",28),e._uU(117,"Veuillez choisir..."),e.qZA(),e.TgZ(118,"option",47),e._uU(119,"A"),e.qZA(),e.TgZ(120,"option",48),e._uU(121,"B"),e.qZA(),e.TgZ(122,"option",49),e._uU(123,"C"),e.qZA(),e.TgZ(124,"option",50),e._uU(125,"D"),e.qZA(),e.TgZ(126,"option",51),e._uU(127,"E"),e.qZA(),e.TgZ(128,"option",52),e._uU(129,"F"),e.qZA(),e.TgZ(130,"option",53),e._uU(131,"G"),e.qZA()()(),e.TgZ(132,"div",23)(133,"label",24),e._uU(134," Niveau du r\xe9servoir initiale "),e.YNc(135,we,2,0,"strong",25),e.qZA(),e.TgZ(136,"input",54),e.NdJ("ngModelChange",function(r){return n.singleVehicule.niveau_reservoir=r}),e.qZA()()(),e.TgZ(137,"div",22)(138,"div",23)(139,"label",24),e._uU(140,"Marque"),e.qZA(),e.TgZ(141,"select",55),e.NdJ("ngModelChange",function(r){return n.singleVehicule.marque_id=r})("change",function(r){return n.changeMarque(r)}),e.TgZ(142,"option",28),e._uU(143,"Veuillez choisir..."),e.qZA(),e.YNc(144,Se,2,2,"option",29),e.qZA()(),e.TgZ(145,"div",23)(146,"label",24),e._uU(147,"Statut"),e.qZA(),e.TgZ(148,"select",56),e.NdJ("ngModelChange",function(r){return n.singleVehicule.statut=r}),e.TgZ(149,"option",28),e._uU(150,"Veuillez choisir..."),e.qZA(),e.TgZ(151,"option",57),e._uU(152,"Actif"),e.qZA(),e.TgZ(153,"option",58),e._uU(154,"Inactif"),e.qZA(),e.TgZ(155,"option",59),e._uU(156,"En maintenance"),e.qZA(),e.TgZ(157,"option",60),e._uU(158,"Occup\xe9"),e.qZA()()(),e.TgZ(159,"div",23)(160,"label",24),e._uU(161,"Puissance en CV"),e.qZA(),e.TgZ(162,"input",61),e.NdJ("ngModelChange",function(r){return n.singleVehicule.puissance_cv=r}),e.qZA()(),e.TgZ(163,"div",23)(164,"label",24),e._uU(165,"Boite \xe0 vitesse "),e.qZA(),e.TgZ(166,"select",62),e.NdJ("ngModelChange",function(r){return n.singleVehicule.boite_vitesse=r}),e.TgZ(167,"option",28),e._uU(168,"Veuillez choisir..."),e.qZA(),e.TgZ(169,"option",63),e._uU(170,"Manuel"),e.qZA(),e.TgZ(171,"option",64),e._uU(172,"Automatique"),e.qZA(),e.TgZ(173,"option",65),e._uU(174,"S\xe9quentielle"),e.qZA()()()(),e.TgZ(175,"div",23)(176,"label",24),e._uU(177,"Description"),e.qZA(),e.TgZ(178,"textarea",66),e.NdJ("ngModelChange",function(r){return n.singleVehicule.description=r}),e.qZA()()()(),e.TgZ(179,"div",67),e.YNc(180,Fe,5,6,"div",68),e.YNc(181,De,5,0,"div",69),e.qZA(),e.YNc(182,Le,14,6,"div",70),e.TgZ(183,"div",71)(184,"div",5)(185,"div",72)(186,"div",23)(187,"label",24),e._uU(188,"Longueur (m)"),e.qZA(),e.TgZ(189,"input",73),e.NdJ("ngModelChange",function(r){return n.singleVehicule.longeur=r}),e.qZA()(),e.TgZ(190,"div",23)(191,"label",24),e._uU(192,"Largeur (m)"),e.qZA(),e.TgZ(193,"input",74),e.NdJ("ngModelChange",function(r){return n.singleVehicule.largeur=r}),e.qZA()(),e.TgZ(194,"div",23)(195,"label",24),e._uU(196,"Hauteur (m)"),e.qZA(),e.TgZ(197,"input",75),e.NdJ("ngModelChange",function(r){return n.singleVehicule.hauteur=r}),e.qZA()(),e.TgZ(198,"div",23)(199,"label",24),e._uU(200,"Volume interieur (m\xb3)"),e.qZA(),e.TgZ(201,"input",76),e.NdJ("ngModelChange",function(r){return n.singleVehicule.volume=r}),e.qZA()()(),e.TgZ(202,"div",72)(203,"div",23)(204,"label",24),e._uU(205,"Poids \xe0 vide (KG)"),e.qZA(),e.TgZ(206,"input",77),e.NdJ("ngModelChange",function(r){return n.singleVehicule.poids=r}),e.qZA()(),e.TgZ(207,"div",23)(208,"label",24),e._uU(209,"Capacit\xe9 de remorquage (KG)"),e.qZA(),e.TgZ(210,"input",78),e.NdJ("ngModelChange",function(r){return n.singleVehicule.capacite_remorquage=r}),e.qZA()(),e.TgZ(211,"div",23)(212,"label",24),e._uU(213,"Charge maximale (KG)"),e.qZA(),e.TgZ(214,"input",79),e.NdJ("ngModelChange",function(r){return n.singleVehicule.charge_maximale=r}),e.qZA()()()()(),e.TgZ(215,"div",80)(216,"div",5)(217,"div",72)(218,"div",23)(219,"label",24),e._uU(220,"Technologie moteur"),e.qZA(),e.TgZ(221,"select",81),e.NdJ("ngModelChange",function(r){return n.singleVehicule.technologie_moteur=r}),e.TgZ(222,"option",28),e._uU(223,"Veuillez choisir..."),e.qZA(),e.TgZ(224,"option",82),e._uU(225,"Injection directe (sans turbo)"),e.qZA(),e.TgZ(226,"option",83),e._uU(227,"Injection directe (avec turbo)"),e.qZA(),e.TgZ(228,"option",84),e._uU(229,"Injection indirecte (sans turbo)"),e.qZA(),e.TgZ(230,"option",85),e._uU(231,"Injection indirecte (avec turbo)"),e.qZA()()(),e.TgZ(232,"div",23)(233,"label",24),e._uU(234,"Nombre des cylindres"),e.qZA(),e.TgZ(235,"input",86),e.NdJ("ngModelChange",function(r){return n.singleVehicule.nbre_cylindre=r}),e.qZA()(),e.TgZ(236,"div",23)(237,"label",24),e._uU(238,"Volume du cylindre"),e.qZA(),e.TgZ(239,"input",87),e.NdJ("ngModelChange",function(r){return n.singleVehicule.volume_cylindre=r}),e.qZA()(),e.TgZ(240,"div",23)(241,"label",24),e._uU(242,"Puissance fiscale (cv)"),e.qZA(),e.TgZ(243,"input",88),e.NdJ("ngModelChange",function(r){return n.singleVehicule.puissance_fiscale=r}),e.qZA()(),e.TgZ(244,"div",23)(245,"label",24),e._uU(246,"Vitesse maximale (KM/H)"),e.qZA(),e.TgZ(247,"input",89),e.NdJ("ngModelChange",function(r){return n.singleVehicule.limite_vitesse=r}),e.qZA()()(),e.TgZ(248,"div",72)(249,"div",23)(250,"label",24),e._uU(251,"consommation en ville (ex.4,6 l/100 km)"),e.qZA(),e.TgZ(252,"input",90),e.NdJ("ngModelChange",function(r){return n.singleVehicule.consommation_ville=r}),e.qZA()(),e.TgZ(253,"div",23)(254,"label",24),e._uU(255,"Consommation en autoroute (ex.3,6 l/100 km)"),e.qZA(),e.TgZ(256,"input",91),e.NdJ("ngModelChange",function(r){return n.singleVehicule.consommation_autoroute=r}),e.qZA()(),e.TgZ(257,"div",23)(258,"label",24),e._uU(259,"Consommation mixte (ex.2,6 l/100 km)"),e.qZA(),e.TgZ(260,"input",92),e.NdJ("ngModelChange",function(r){return n.singleVehicule.consommation_mixte=r}),e.qZA()(),e.TgZ(261,"div",23)(262,"label",24),e._uU(263,"Emission CO2 (ex.103 g/km)"),e.qZA(),e.TgZ(264,"input",93),e.NdJ("ngModelChange",function(r){return n.singleVehicule.emission_co2=r}),e.qZA()()()()(),e.TgZ(265,"div",94)(266,"div",5)(267,"div",72)(268,"div",23)(269,"label",24),e._uU(270,"Syst\xe8me du freinage"),e.qZA(),e.TgZ(271,"input",95),e.NdJ("ngModelChange",function(r){return n.singleVehicule.systeme_freinage=r}),e.qZA()(),e.TgZ(272,"div",23)(273,"label",24),e._uU(274,"Largeur du pneu en mm"),e.qZA(),e.TgZ(275,"input",96),e.NdJ("ngModelChange",function(r){return n.singleVehicule.longeur_pneu=r}),e.qZA()(),e.TgZ(276,"div",23)(277,"label",24),e._uU(278,"Rapport hauteur/largeur"),e.qZA(),e.TgZ(279,"input",97),e.NdJ("ngModelChange",function(r){return n.singleVehicule.rapport_hauteur_longeur=r}),e.qZA()(),e.TgZ(280,"div",23)(281,"label",24),e._uU(282,"Indice de charge"),e.qZA(),e.TgZ(283,"input",98),e.NdJ("ngModelChange",function(r){return n.singleVehicule.indice_charge=r}),e.qZA()()(),e.TgZ(284,"div",72)(285,"div",23)(286,"label",24),e._uU(287,"Indice de vitesse"),e.qZA(),e.TgZ(288,"input",99),e.NdJ("ngModelChange",function(r){return n.singleVehicule.indice_vitesse=r}),e.qZA()(),e.TgZ(289,"div",23)(290,"label",24),e._uU(291,"Empattement"),e.qZA(),e.TgZ(292,"input",100),e.NdJ("ngModelChange",function(r){return n.singleVehicule.empattement=r}),e.qZA()(),e.TgZ(293,"div",23)(294,"label",24),e._uU(295,"Diam\xe8tre de la roue avant (m)"),e.qZA(),e.TgZ(296,"input",101),e.NdJ("ngModelChange",function(r){return n.singleVehicule.diametre_roue_avant=r}),e.qZA()(),e.TgZ(297,"div",23)(298,"label",24),e._uU(299,"Diam\xe8tre de la roue arri\xe8re (m)"),e.qZA(),e.TgZ(300,"input",102),e.NdJ("ngModelChange",function(r){return n.singleVehicule.diametre_roue_arriere=r}),e.qZA()()()()(),e.TgZ(301,"div",103)(302,"div",23)(303,"label",24),e._uU(304,"Capacit\xe9 du huile (L)"),e.qZA(),e.TgZ(305,"input",104),e.NdJ("ngModelChange",function(r){return n.singleVehicule.capacite_huile=r}),e.qZA()(),e.TgZ(306,"div",23)(307,"label",24),e._uU(308,"Capacit\xe9 du r\xe9servoir carburant (L)"),e.qZA(),e.TgZ(309,"input",105),e.NdJ("ngModelChange",function(r){return n.singleVehicule.volume_reservoir=r}),e.qZA()()(),e._UZ(310,"hr",106),e.TgZ(311,"small",107),e._uU(312,"*: Ce champ est obligatoire."),e.qZA(),e.TgZ(313,"button",108),e._uU(314," Enregistrer "),e.qZA(),e.TgZ(315,"button",109),e.NdJ("click",function(){return n.fermer()}),e._uU(316," Annuler "),e.qZA()()()()()()()()()}if(2&t){const s=e.MAs(38);e.xp6(6),e.hij(" ",n.singleVehicule.id?"Modifie un v\xe9hicule":"Cr\xe9er un nouveau v\xe9hicule"," "),e.xp6(10),e.Q6J("ngClass",e.VKq(71,q,"generale"==n.type)),e.xp6(3),e.Q6J("ngIf",n.singleVehicule.id),e.xp6(2),e.Q6J("ngClass",e.VKq(73,q,"cycle_de_vie"==n.type)),e.xp6(3),e.Q6J("ngClass",e.VKq(75,q,"specifications"==n.type)),e.xp6(3),e.Q6J("ngClass",e.VKq(77,q,"moteur_transmission"==n.type)),e.xp6(3),e.Q6J("ngClass",e.VKq(79,q,"roues_pneus"==n.type)),e.xp6(3),e.Q6J("ngClass",e.VKq(81,q,"liquides"==n.type)),e.xp6(3),e.Q6J("ngIf",n.message),e.xp6(3),e.Q6J("ngModel",n.singleVehicule.id),e.xp6(1),e.Q6J("ngClass",e.VKq(83,x,"generale"!=n.type)),e.xp6(6),e.Q6J("ngIf",!n.singleVehicule.matricule),e.xp6(1),e.Q6J("ngModel",n.singleVehicule.matricule),e.xp6(4),e.Q6J("ngModel",n.singleVehicule.categorie_id),e.xp6(3),e.Q6J("ngForOf",n.categories),e.xp6(4),e.Q6J("ngModel",n.singleVehicule.type_contrat),e.xp6(12),e.Q6J("ngModel",n.singleVehicule.energie),e.xp6(20),e.Q6J("ngIf",!n.singleVehicule.compteur_initial),e.xp6(1),e.Q6J("ngModel",n.singleVehicule.compteur_initial),e.xp6(5),e.Q6J("ngModel",n.singleVehicule.groupe_id),e.xp6(3),e.Q6J("ngForOf",n.groupes),e.xp6(4),e.Q6J("ngModel",n.singleVehicule.modele_id),e.xp6(3),e.Q6J("ngForOf",n.modeles),e.xp6(4),e.Q6J("ngModel",e.xi3(111,68,n.singleVehicule.mise_en_circulation,"yyyy-MM-dd")),e.xp6(5),e.Q6J("ngModel",n.singleVehicule.classe_energitique),e.xp6(20),e.Q6J("ngIf",!n.singleVehicule.niveau_reservoir),e.xp6(1),e.Q6J("ngModel",n.singleVehicule.niveau_reservoir),e.xp6(5),e.Q6J("ngModel",n.singleVehicule.marque_id),e.xp6(3),e.Q6J("ngForOf",n.marques),e.xp6(4),e.Q6J("ngModel",n.singleVehicule.statut),e.xp6(14),e.Q6J("ngModel",n.singleVehicule.puissance_cv),e.xp6(4),e.Q6J("ngModel",n.singleVehicule.boite_vitesse),e.xp6(12),e.Q6J("ngModel",n.singleVehicule.description),e.xp6(1),e.Q6J("ngClass",e.VKq(85,x,"documents"!=n.type)),e.xp6(1),e.Q6J("ngForOf",n.vehiculeDoc),e.xp6(1),e.Q6J("ngIf",0==n.vehiculeDoc.length),e.xp6(1),e.Q6J("ngIf","cycle_de_vie"==n.type),e.xp6(1),e.Q6J("ngClass",e.VKq(87,x,"specifications"!=n.type)),e.xp6(6),e.Q6J("ngModel",n.singleVehicule.longeur),e.xp6(4),e.Q6J("ngModel",n.singleVehicule.largeur),e.xp6(4),e.Q6J("ngModel",n.singleVehicule.hauteur),e.xp6(4),e.Q6J("ngModel",n.singleVehicule.volume),e.xp6(5),e.Q6J("ngModel",n.singleVehicule.poids),e.xp6(4),e.Q6J("ngModel",n.singleVehicule.capacite_remorquage),e.xp6(4),e.Q6J("ngModel",n.singleVehicule.charge_maximale),e.xp6(1),e.Q6J("ngClass",e.VKq(89,x,"moteur_transmission"!=n.type)),e.xp6(6),e.Q6J("ngModel",n.singleVehicule.technologie_moteur),e.xp6(14),e.Q6J("ngModel",n.singleVehicule.nbre_cylindre),e.xp6(4),e.Q6J("ngModel",n.singleVehicule.volume_cylindre),e.xp6(4),e.Q6J("ngModel",n.singleVehicule.puissance_fiscale),e.xp6(4),e.Q6J("ngModel",n.singleVehicule.limite_vitesse),e.xp6(5),e.Q6J("ngModel",n.singleVehicule.consommation_ville),e.xp6(4),e.Q6J("ngModel",n.singleVehicule.consommation_autoroute),e.xp6(4),e.Q6J("ngModel",n.singleVehicule.consommation_mixte),e.xp6(4),e.Q6J("ngModel",n.singleVehicule.emission_co2),e.xp6(1),e.Q6J("ngClass",e.VKq(91,x,"roues_pneus"!=n.type)),e.xp6(6),e.Q6J("ngModel",n.singleVehicule.systeme_freinage),e.xp6(4),e.Q6J("ngModel",n.singleVehicule.longeur_pneu),e.xp6(4),e.Q6J("ngModel",n.singleVehicule.rapport_hauteur_longeur),e.xp6(4),e.Q6J("ngModel",n.singleVehicule.indice_charge),e.xp6(5),e.Q6J("ngModel",n.singleVehicule.indice_vitesse),e.xp6(4),e.Q6J("ngModel",n.singleVehicule.empattement),e.xp6(4),e.Q6J("ngModel",n.singleVehicule.diametre_roue_avant),e.xp6(4),e.Q6J("ngModel",n.singleVehicule.diametre_roue_arriere),e.xp6(1),e.Q6J("ngClass",e.VKq(93,x,"liquides"!=n.type)),e.xp6(4),e.Q6J("ngModel",n.singleVehicule.capacite_huile),e.xp6(4),e.Q6J("ngModel",n.singleVehicule.volume_reservoir),e.xp6(4),e.Q6J("disabled",!s.valid)}},directives:[u.mk,u.O5,l._Y,l.JL,l.F,l.Fj,l.JJ,l.On,l.Q7,l.EJ,l.YN,l.Kr,u.sg,l.wV],pipes:[u.uU],styles:[".header[_ngcontent-%COMP%]{margin-bottom:0!important}form[_ngcontent-%COMP%]{padding:10px 40px!important}.documents_vehicule[_ngcontent-%COMP%]   .border[_ngcontent-%COMP%]{margin-top:50px}.border_red[_ngcontent-%COMP%]{border:1px solid red}"]}),i})();var z=p(8368),Pe=p(7651),Ie=p(513);function Ye(i,a){if(1&i&&(e.TgZ(0,"option",48),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.s9C("value",t.id),e.xp6(1),e.hij("",t.nom," ")}}function He(i,a){if(1&i&&(e.TgZ(0,"option",48),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.s9C("value",t.id),e.xp6(1),e.hij("",t.nom," ")}}function Ge(i,a){1&i&&e._UZ(0,"i",64)}function Ke(i,a){1&i&&e._UZ(0,"i",65)}const je=function(i){return["/vehicules/",i,"edit"]},ze=function(i){return["/vehicules/",i,"dashboard"]};function Re(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"tr")(1,"td",49),e._uU(2),e.qZA(),e.TgZ(3,"td",50),e._uU(4),e.qZA(),e.TgZ(5,"td",51),e._uU(6),e.qZA(),e.TgZ(7,"td",52),e._uU(8),e.qZA(),e.TgZ(9,"td",53),e._uU(10),e.qZA(),e.TgZ(11,"td",54),e._uU(12),e.ALo(13,"date"),e.qZA(),e.TgZ(14,"td",55),e.YNc(15,Ge,1,0,"i",56),e._uU(16,"\xa0 "),e.YNc(17,Ke,1,0,"i",57),e.qZA(),e.TgZ(18,"td",58)(19,"a",59),e._UZ(20,"i",60),e.qZA(),e._uU(21,"\xa0 "),e.TgZ(22,"a",59),e._UZ(23,"i",61),e.qZA(),e.TgZ(24,"button",62),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.oxw().idVehicule=o.id}),e._UZ(25,"i",63),e.qZA(),e._uU(26," \xa0 "),e.qZA()()}if(2&i){const t=a.$implicit;e.xp6(2),e.hij(" ",t.matricule," "),e.xp6(2),e.Oqu(t.statut),e.xp6(2),e.Oqu(t.categorie),e.xp6(2),e.hij(" ",t.groupe," "),e.xp6(2),e.Oqu(null==t.compteur?null:t.compteur.toFixed(2)),e.xp6(2),e.hij(" ",e.xi3(13,10,t.mise_en_circulation,"dd/MM/yyyy")," "),e.xp6(3),e.Q6J("ngIf",t.balise),e.xp6(2),e.Q6J("ngIf",t.eco_conduite),e.xp6(2),e.Q6J("routerLink",e.VKq(13,je,t.id)),e.xp6(3),e.Q6J("routerLink",e.VKq(15,ze,t.id))}}const Be=function(i){return{active:i}},S=function(i){return["/vehicules/page",i]};function $e(i,a){if(1&i&&(e.TgZ(0,"li",72)(1,"a",73),e._uU(2),e.qZA()()),2&i){const t=a.index,n=e.oxw(2);e.Q6J("ngClass",e.VKq(3,Be,n.vehicules.current_page==t+1)),e.xp6(1),e.Q6J("routerLink",e.VKq(5,S,t+1)),e.xp6(1),e.Oqu(t+1)}}const R=function(i){return{_disabled:i}},Xe=function(){return[]};function We(i,a){if(1&i&&(e.TgZ(0,"nav",66)(1,"ul",67)(2,"li",68)(3,"a",69),e._uU(4," Pr\xe9c\xe9dent "),e.qZA()(),e.YNc(5,$e,3,7,"li",70),e.TgZ(6,"li",68)(7,"a",71),e._uU(8," Suivant "),e.qZA()()()()),2&i){const t=e.oxw();e.xp6(3),e.Q6J("routerLink",e.VKq(5,S,t.vehicules.current_page-1))("ngClass",e.VKq(7,R,1==t.vehicules.current_page)),e.xp6(2),e.Q6J("ngForOf",e.DdM(9,Xe).constructor(t.vehicules.total_pages)),e.xp6(2),e.Q6J("routerLink",e.VKq(10,S,t.vehicules.current_page+1))("ngClass",e.VKq(12,R,t.vehicules.current_page==t.vehicules.total_pages))}}const et=function(){return["/vehicules/edit"]};let tt=(()=>{class i{constructor(t,n,s,o,r,g,m){this.vehiculeService=t,this.authService=n,this.activatedRoute=s,this.vehiculeGroupeService=o,this.vehiculeMarqueService=r,this.tokenService=g,this.utilisateurService=m,this.vehicules=[],this.groupes=[],this.marques=[],this.search={matricule:null,groupe_id:"",marque_id:""},this.infosVehicule={total_vehicules:null,nombre_GPS:null,total_GPS_active:null,Total_GPS_inactive:null},this.idVehicule=0,this.message=null}ngOnInit(){this.activatedRoute.params.subscribe(t=>{var n;const{page:s}=t;s&&this.searchVehicule(this.search),this.getAllGroupes(),this.getAllMarques();const o=this.tokenService.payload(null!==(n=this.tokenService.getToken())&&void 0!==n?n:"");this.getInfosVehiculeById(o.id)})}getInfosVehiculeById(t){var n=this;this.utilisateurService.getUtilisateur(t).subscribe(s=>{this.infosVehicule.nombre_GPS=s.balises_active,this.infosVehicule.total_GPS_active=s.balises_active,this.infosVehicule.Total_GPS_inactive=this.vehicules.total_records-s.balises_active},function(){var s=(0,c.Z)(function*(o){401==o.status&&(yield n.refreshToken())&&n.getInfosVehiculeById(t)});return function(o){return s.apply(this,arguments)}}())}closeModal(){C(".modal").hide(),C(".modal-backdrop").remove(),C("body").removeAttr("style")}refreshToken(){var t=this;return(0,c.Z)(function*(){return!!(yield t.authService.refresh())||t.logout()})()}logout(){this.authService.logout()}searchVehicule(t){var n=this;this.vehiculeService.search(t).subscribe(s=>{this.vehicules=s},function(){var s=(0,c.Z)(function*(o){401==o.status&&(yield n.refreshToken())&&n.searchVehicule(t)});return function(o){return s.apply(this,arguments)}}())}getAllGroupes(){var t=this;this.vehiculeGroupeService.getAll().subscribe(n=>this.groupes=n,function(){var n=(0,c.Z)(function*(s){401==s.status&&(yield t.refreshToken())&&t.getAllGroupes()});return function(s){return n.apply(this,arguments)}}())}getAllMarques(){var t=this;this.vehiculeMarqueService.getAll().subscribe(n=>this.marques=n,function(){var n=(0,c.Z)(function*(s){401==s.status&&(yield t.refreshToken())&&t.getAllMarques()});return function(s){return n.apply(this,arguments)}}())}delete(t){var n=this;this.vehiculeService.delete(t).subscribe(s=>{this.searchVehicule(this.search),this.message="Le vehicule est supprim\xe9 avec succ\xe8s !",this.closeModal()},function(){var s=(0,c.Z)(function*(o){401==o.status&&(yield n.refreshToken())&&n.delete(t)});return function(o){return s.apply(this,arguments)}}())}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(M.t),e.Y36(z.e),e.Y36(_.gz),e.Y36(w),e.Y36(N),e.Y36(Pe.B),e.Y36(Ie.y))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-index"]],decls:102,vars:13,consts:[[1,"header-body","shadow-sm","p-3","mb-5","bg-white","rounded"],[1,"align-items-end"],[1,"header-pretitle"],[1,"header-title"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"row","mb-3"],[1,"col-md-10"],[1,"text-muted","info-vehicule"],[1,"badge","rounded-pill","bg-secondary-soft"],[1,"col-md-2"],[1,"btn","btn-outline-primary","btn-ajouter",3,"routerLink"],[1,"fa-solid","fa-plus"],[1,"row","form-search",3,"ngSubmit"],["searchForm","ngForm"],[1,"col-md-4"],[1,"form-group"],["for","matricule"],["type","search","name","matricule","placeholder","Rechercher",1,"form-control",3,"ngModel","ngModelChange"],["name","groupe_id",1,"form-select",3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["for","marque_id"],[1,"input-group"],["name","marque_id",1,"form-select",3,"ngModel","ngModelChange"],[1,"input-group-append"],["type","submit",1,"btn","btn-outline-primary",2,"margin-left","12px"],[1,"fas","fa-search"],[1,"table-responsive"],[1,"table","table-sm","table-nowrap","card-table"],[1,"text-center"],[1,"list"],[4,"ngFor","ngForOf"],["aria-label","Page navigation","class","pag-tab col-md-12",4,"ngIf"],["id","modal-delete","tabindex","-1","role","dialog","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-confirm"],[1,"modal-content"],[1,"modal-header","flex-column"],[1,"icon-box"],[1,"material-icons"],[1,"fa-solid","fa-x"],[1,"modal-title","w-100"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"close","btn-close"],[1,"modal-body"],[1,"modal-footer","justify-content-center"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],["type","button",1,"btn","btn-danger",3,"click"],[3,"value"],[1,"matricule"],[1,"statut"],[1,"categorie"],[1,"groupe"],[1,"compteur-actuel"],[1,"mise_en_circulation"],[1,"type_saisie",2,"font-size","16px"],["class","fa-solid fa-satellite-dish text-primary",4,"ngIf"],["class","fa-solid fa-leaf text-success",4,"ngIf"],["width","100"],[1,"btn","btn-operation",3,"routerLink"],[1,"fa-solid","fa-pen"],[1,"fa-solid","fa-info"],["type","button","data-bs-toggle","modal","data-bs-target","#modal-delete",1,"btn","btn-operation",3,"click"],["_ngcontent-hhv-c59","",1,"fa-solid","fa-trash"],[1,"fa-solid","fa-satellite-dish","text-primary"],[1,"fa-solid","fa-leaf","text-success"],["aria-label","Page navigation",1,"pag-tab","col-md-12"],[1,"pagination"],[1,"page-item"],["href","#!",1,"page-link",3,"routerLink","ngClass"],["class","page-item",3,"ngClass",4,"ngFor","ngForOf"],[1,"page-link",3,"routerLink","ngClass"],[1,"page-item",3,"ngClass"],[1,"page-link",3,"routerLink"]],template:function(t,n){if(1&t){const s=e.EpF();e.TgZ(0,"section")(1,"div",0)(2,"div",1)(3,"h6",2),e._uU(4," Gestion des v\xe9hicules "),e.qZA(),e.TgZ(5,"h2",3),e._uU(6," Listes des v\xe9hicule "),e.qZA()()(),e.TgZ(7,"div",4)(8,"div",5)(9,"div",6)(10,"div",7)(11,"div",8)(12,"strong",9),e._uU(13," Nombre total des v\xe9hicules "),e.TgZ(14,"span",10),e._uU(15),e.qZA()(),e.TgZ(16,"strong",9),e._uU(17," \xc9quip\xe9s en GPS "),e.TgZ(18,"span",10),e._uU(19),e.qZA()(),e.TgZ(20,"strong",9),e._uU(21," \xc9quip\xe9 en GPS et Eco-conduite "),e.TgZ(22,"span",10),e._uU(23),e.qZA()(),e.TgZ(24,"strong",9),e._uU(25," Non \xe9quip\xe9s en GPS "),e.TgZ(26,"span",10),e._uU(27),e.qZA()()(),e.TgZ(28,"div",11)(29,"a",12),e._UZ(30,"i",13),e.qZA()()(),e.TgZ(31,"form",14,15),e.NdJ("ngSubmit",function(){e.CHM(s);const r=e.MAs(32);return n.searchVehicule(r.value)}),e.TgZ(33,"div",16)(34,"div",17)(35,"label",18),e._uU(36,"Matricule"),e.qZA(),e.TgZ(37,"input",19),e.NdJ("ngModelChange",function(r){return n.search.matricule=r}),e.qZA()()(),e.TgZ(38,"div",16)(39,"div",17)(40,"label"),e._uU(41,"Groupe"),e.qZA(),e.TgZ(42,"select",20),e.NdJ("ngModelChange",function(r){return n.search.groupe_id=r}),e.TgZ(43,"option",21),e._uU(44,"Tous"),e.qZA(),e.YNc(45,Ye,2,2,"option",22),e.qZA()()(),e.TgZ(46,"div",16)(47,"div",17)(48,"label",23),e._uU(49,"Marque"),e.qZA(),e.TgZ(50,"div",24)(51,"select",25),e.NdJ("ngModelChange",function(r){return n.search.marque_id=r}),e.TgZ(52,"option",21),e._uU(53,"Tous"),e.qZA(),e.YNc(54,He,2,2,"option",22),e.qZA(),e.TgZ(55,"div",26)(56,"button",27),e._UZ(57,"i",28),e.qZA()()()()()(),e.TgZ(58,"div",5)(59,"div",29)(60,"table",30)(61,"thead")(62,"tr")(63,"th"),e._uU(64,"Matricule"),e.qZA(),e.TgZ(65,"th"),e._uU(66,"Statut"),e.qZA(),e.TgZ(67,"th"),e._uU(68,"Cat\xe9gorie"),e.qZA(),e.TgZ(69,"th"),e._uU(70,"Groupe"),e.qZA(),e.TgZ(71,"th"),e._uU(72,"Compteur actuel"),e.qZA(),e.TgZ(73,"th"),e._uU(74,"Mise en circulation"),e.qZA(),e.TgZ(75,"th"),e._uU(76,"Source"),e.qZA(),e.TgZ(77,"th",31),e._uU(78,"Options"),e.qZA()()(),e.TgZ(79,"tbody",32),e.YNc(80,Re,27,17,"tr",33),e.qZA()()()(),e.YNc(81,We,9,14,"nav",34),e.qZA()()(),e.TgZ(82,"div",35)(83,"div",36)(84,"div",37)(85,"div",38)(86,"div",39)(87,"i",40),e._UZ(88,"i",41),e.qZA()(),e.TgZ(89,"h4",42),e._uU(90,"\xcates-vous s\xfbr?"),e.qZA(),e._UZ(91,"button",43),e.qZA(),e.TgZ(92,"div",44)(93,"p"),e._uU(94,"Voulez-vous vraiment supprimer ces enregistrements\xa0? Ce processus ne peut pas \xeatre annul\xe9."),e.qZA()(),e.TgZ(95,"div",45)(96,"button",46),e._uU(97,"Cancel"),e.qZA(),e.TgZ(98,"button",47),e.NdJ("click",function(){return n.delete(n.idVehicule)}),e._uU(99,"Delete"),e.qZA()()()()(),e._UZ(100,"br")(101,"br"),e.qZA()}2&t&&(e.xp6(15),e.Oqu(n.vehicules.total_records),e.xp6(4),e.Oqu(n.infosVehicule.nombre_GPS),e.xp6(4),e.Oqu(n.infosVehicule.total_GPS_active),e.xp6(4),e.Oqu(n.infosVehicule.Total_GPS_inactive),e.xp6(2),e.Q6J("routerLink",e.DdM(12,et)),e.xp6(8),e.Q6J("ngModel",n.search.matricule),e.xp6(5),e.Q6J("ngModel",n.search.groupe_id),e.xp6(3),e.Q6J("ngForOf",n.groupes),e.xp6(6),e.Q6J("ngModel",n.search.marque_id),e.xp6(3),e.Q6J("ngForOf",n.marques),e.xp6(26),e.Q6J("ngForOf",n.vehicules.records),e.xp6(1),e.Q6J("ngIf",n.vehicules.total_records&&n.vehicules.total_pages>1))},directives:[_.yS,l._Y,l.JL,l.F,l.Fj,l.JJ,l.On,l.EJ,l.YN,l.Kr,u.sg,u.O5,u.mk],pipes:[u.uU],styles:[".card-header[_ngcontent-%COMP%]{background-color:#fff;display:list-item}strong.text-muted[_ngcontent-%COMP%]{font-weight:100;margin-right:30px}@media (max-width: 1200px){.btn-ajouter[_ngcontent-%COMP%]{font-size:12px}}@media (max-width: 760px){strong.info-vehicule[_ngcontent-%COMP%]{width:100%;display:block}label[_ngcontent-%COMP%]{font-size:13px}.form-search[_ngcontent-%COMP%]   .col-md-4[_ngcontent-%COMP%]{height:70px}}"]}),i})();function nt(i,a){if(1&i&&(e.TgZ(0,"div",45),e._uU(1),e._UZ(2,"button",46),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.message," ")}}function it(i,a){if(1&i&&(e.TgZ(0,"small",55),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.description," ")}}function ot(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",47)(1,"div",48)(2,"h3"),e._uU(3),e.qZA(),e.YNc(4,it,2,1,"small",49),e.TgZ(5,"div",50)(6,"button",51),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.oxw().singleGroupe.id=o.id}),e._UZ(7,"i",52),e.qZA(),e.TgZ(8,"button",53),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.oxw().getGroupe(o.id)}),e._UZ(9,"i",54),e.qZA()()()()}if(2&i){const t=a.$implicit;e.xp6(3),e.hij(" ",t.nom," "),e.xp6(1),e.Q6J("ngIf",t.description)}}function st(i,a){1&i&&(e.TgZ(0,"strong",30),e._uU(1,"*"),e.qZA())}let rt=(()=>{class i{constructor(t,n,s){this.securiteClass=t,this.globale=n,this.vehiculeGroupeService=s,this.groupes=[],this.singleGroupe={id:null,nom:null,description:null},this.message=null}ngOnInit(){this.getAllGroupe()}clear(){this.message=null,this.singleGroupe={id:null,nom:null,description:null}}getAllGroupe(){this.vehiculeGroupeService.getAll().subscribe(t=>this.groupes=t,t=>{401==t.status&&this.securiteClass.refreshToken()&&this.getAllGroupe()})}getGroupe(t){this.message=null,this.vehiculeGroupeService.getGroupe(t).subscribe(n=>this.singleGroupe=n,n=>{401==n.status&&this.securiteClass.refreshToken()&&this.getGroupe(t)})}update(t){t.id?this.vehiculeGroupeService.update(t).subscribe(n=>{this.getAllGroupe(),this.message="Le groupe est modifi\xe9 avec succ\xe8s !",this.globale.closeModal()},n=>{401==n.status&&this.securiteClass.refreshToken()&&this.update(t)}):this.vehiculeGroupeService.create(t).subscribe(n=>{this.getAllGroupe(),this.message="Le groupe est ajout\xe9 avec succ\xe8s !",this.globale.closeModal()},n=>{401==n.status&&this.securiteClass.refreshToken()&&this.update(t)})}delete(t){this.vehiculeGroupeService.delete(t).subscribe(n=>{this.getAllGroupe(),this.message="Le groupe est supprim\xe9 avec succ\xe8s !",this.globale.closeModal()},n=>{401==n.status&&this.securiteClass.refreshToken()&&this.delete(t)})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(b.z),e.Y36(f.N),e.Y36(w))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-groupe"]],decls:66,vars:7,consts:[[1,"header-body","shadow-sm","p-3","mb-5","bg-white","rounded"],[1,"align-items-end"],[1,"header-pretitle"],[1,"header-title"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],["type","button","data-bs-toggle","modal","data-bs-target","#modal-edit",1,"btn","btn-outline-primary","mb-2",2,"float","right",3,"click"],[1,"fa-solid","fa-plus"],["class","alert alert-success","role","alert",4,"ngIf"],[1,"groupes-list","row"],["class","col-xs-6 col-sm-6 col-md-6 col-lg-3",4,"ngFor","ngForOf"],["id","modal-edit","tabindex","-1","role","dialog","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],["data-list","",1,"modal-card","card"],[1,"card-header"],["id","exampleModalCenterTitle",1,"card-header-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close","pb-0","mp-0"],[1,"card-body"],[3,"ngSubmit"],["grpForm","ngForm"],[1,"frm-region"],["type","hidden","name","id","value","singleGroupe.id",3,"ngModel","ngModelChange"],[1,"form-group"],["for","nom",1,"form-label"],["class","text-danger",4,"ngIf"],["type","text","placeholder","Nom","name","nom","required","",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["for","description",1,"form-label"],["rows","3","name","adresse","placeholder","Description","name","description",1,"form-control",3,"ngModel","ngModelChange"],[1,"text-danger"],["type","submit",1,"btn","btn-success","mb-2","float-right",3,"disabled"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary","float-right",2,"margin-right","5px"],["id","modal-delete","tabindex","-1","role","dialog","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-confirm"],[1,"modal-header","flex-column"],[1,"icon-box"],[1,"material-icons"],[1,"fa-solid","fa-x"],[1,"modal-title","w-100"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"close","btn-close"],[1,"modal-body"],[1,"modal-footer","justify-content-center"],["type","button","data-dismiss","modal","data-bs-dismiss","modal","aria-label","Close",1,"btn","btn-secondary"],["type","button",1,"btn","btn-danger",3,"click"],["role","alert",1,"alert","alert-success"],["type","button","data-bs-dismiss","alert","aria-label","Close",1,"btn-close","pb-0","mp-0"],[1,"col-xs-6","col-sm-6","col-md-6","col-lg-3"],[1,"groupe","eq-blocks"],["class","text-muted categorie",4,"ngIf"],[1,"operations"],["type","button","data-bs-toggle","modal","data-bs-target","#modal-delete",1,"btn","btn-danger","btn-delete",3,"click"],[1,"fa-solid","fa-trash"],["type","button","data-bs-toggle","modal","data-bs-target","#modal-edit",1,"btn","btn-success","btn-edit",3,"click"],[1,"fa-solid","fa-pen"],[1,"text-muted","categorie"]],template:function(t,n){if(1&t){const s=e.EpF();e.TgZ(0,"section")(1,"div",0)(2,"div",1)(3,"h6",2),e._uU(4," Gestion des v\xe9hicules "),e.qZA(),e.TgZ(5,"h2",3),e._uU(6," Groupes de v\xe9hicules "),e.qZA()()(),e.TgZ(7,"div",4)(8,"div",5)(9,"div",6)(10,"button",7),e.NdJ("click",function(){return n.clear()}),e._UZ(11,"i",8),e.qZA(),e._UZ(12,"br")(13,"br")(14,"br"),e.TgZ(15,"div",5),e.YNc(16,nt,3,1,"div",9),e.qZA(),e.TgZ(17,"div",10),e.YNc(18,ot,10,2,"div",11),e.qZA()()(),e.TgZ(19,"div",12)(20,"div",13)(21,"div",14)(22,"div",15)(23,"div",16)(24,"h4",17),e._uU(25," Groupe de v\xe9hicule "),e.qZA(),e._UZ(26,"button",18),e.qZA(),e.TgZ(27,"div",19)(28,"form",20,21),e.NdJ("ngSubmit",function(){e.CHM(s);const r=e.MAs(29);return n.update(r.value)}),e.TgZ(30,"div",22)(31,"input",23),e.NdJ("ngModelChange",function(r){return n.singleGroupe.id=r}),e.qZA(),e.TgZ(32,"div",24)(33,"label",25),e._uU(34," Type de groupe "),e.YNc(35,st,2,0,"strong",26),e.qZA(),e.TgZ(36,"input",27),e.NdJ("ngModelChange",function(r){return n.singleGroupe.nom=r}),e.qZA()(),e.TgZ(37,"div",24)(38,"label",28),e._uU(39,"Description"),e.qZA(),e.TgZ(40,"textarea",29),e.NdJ("ngModelChange",function(r){return n.singleGroupe.description=r}),e.qZA()()(),e.TgZ(41,"div",6)(42,"small",30),e._uU(43,"*: Ce champ est obligatoire."),e.qZA(),e.TgZ(44,"button",31),e._uU(45,"Enregister"),e.qZA(),e.TgZ(46,"button",32),e._uU(47,"Annuler"),e.qZA()()()()()()()(),e.TgZ(48,"div",33)(49,"div",34)(50,"div",14)(51,"div",35)(52,"div",36)(53,"i",37),e._UZ(54,"i",38),e.qZA()(),e.TgZ(55,"h4",39),e._uU(56,"\xcates-vous s\xfbr?"),e.qZA(),e._UZ(57,"button",40),e.qZA(),e.TgZ(58,"div",41)(59,"p"),e._uU(60,"Voulez-vous vraiment supprimer ces enregistrements\xa0? Ce processus ne peut pas \xeatre annul\xe9. "),e.qZA()(),e.TgZ(61,"div",42)(62,"button",43),e._uU(63,"Annuler"),e.qZA(),e.TgZ(64,"button",44),e.NdJ("click",function(){return n.delete(n.singleGroupe.id)}),e._uU(65,"Supprimer"),e.qZA()()()()()()()}if(2&t){const s=e.MAs(29);e.xp6(16),e.Q6J("ngIf",n.message),e.xp6(2),e.Q6J("ngForOf",n.groupes),e.xp6(13),e.Q6J("ngModel",n.singleGroupe.id),e.xp6(4),e.Q6J("ngIf",!n.singleGroupe.nom),e.xp6(1),e.Q6J("ngModel",n.singleGroupe.nom),e.xp6(4),e.Q6J("ngModel",n.singleGroupe.description),e.xp6(4),e.Q6J("disabled",!s.valid)}},directives:[u.O5,u.sg,l._Y,l.JL,l.F,l.Fj,l.JJ,l.On,l.Q7],styles:[".groupes-list[_ngcontent-%COMP%]   .groupe[_ngcontent-%COMP%]{box-shadow:#32325d40 0 2px 5px -1px,#0000004d 0 1px 3px -1px;padding:20px 30px;height:auto;border-radius:8px;margin-bottom:20px;background-color:#fff;min-height:120px}.btn-edit[_ngcontent-%COMP%], .btn-delete[_ngcontent-%COMP%]{padding:3px 5px!important;float:right!important;margin-left:3px;font-size:15px}.operations[_ngcontent-%COMP%]{height:25px}.groupe[_ngcontent-%COMP%]:hover{color:#155724!important;background-color:#d4edda!important;border-color:#c3e6cb!important;font-weight:400;box-shadow:#00000059 0 5px 15px}.groupe[_ngcontent-%COMP%]:hover   .operations[_ngcontent-%COMP%]{opacity:1}.operations[_ngcontent-%COMP%]{opacity:0}"]}),i})();function at(i,a){if(1&i&&(e.TgZ(0,"div",54),e._uU(1),e._UZ(2,"button",55),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.message," ")}}const lt=function(i){return["/vehicules/marque/",i,"modeles"]};function ut(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",56),e.NdJ("mouseenter",function(){const o=e.CHM(t).$implicit;return e.oxw().onMouseMarque(o.id)}),e.TgZ(1,"div",57),e._uU(2),e.qZA(),e.TgZ(3,"div",58),e._UZ(4,"div",59)(5,"img",60),e.TgZ(6,"div",61)(7,"button",62),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.oxw().getMarque(o.id)}),e._UZ(8,"i",63),e.qZA(),e.TgZ(9,"button",64),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.oxw().singleMarque.id=o.id}),e._UZ(10,"i",65),e.qZA(),e.TgZ(11,"a",66)(12,"button",67),e._UZ(13,"i",68),e.qZA()()()()()}if(2&i){const t=a.$implicit,n=e.oxw();e.MGl("title","La marque ",t.nom,""),e.xp6(2),e.Oqu(t.nom),e.xp6(3),e.s9C("src",t.logo?n.imageURL+t.logo:"assets/img/no-image.png",e.LSH),e.xp6(6),e.Q6J("routerLink",e.VKq(4,lt,t.id))}}const dt=function(i){return{active:i}},F=function(i){return["/vehicules/marques/page",i]};function ct(i,a){if(1&i&&(e.TgZ(0,"li",75)(1,"a",76),e._uU(2),e.qZA()()),2&i){const t=a.index,n=e.oxw(2);e.Q6J("ngClass",e.VKq(3,dt,n.marques.current_page==t+1)),e.xp6(1),e.Q6J("routerLink",e.VKq(5,F,t+1)),e.xp6(1),e.Oqu(t+1)}}const B=function(i){return{_disabled:i}},gt=function(){return[]};function pt(i,a){if(1&i&&(e.TgZ(0,"nav",69)(1,"ul",70)(2,"li",71)(3,"a",72),e._uU(4," Pr\xe9c\xe9dent "),e.qZA()(),e.YNc(5,ct,3,7,"li",73),e.TgZ(6,"li",71)(7,"a",74),e._uU(8," Suivant "),e.qZA()()()()),2&i){const t=e.oxw();e.xp6(3),e.Q6J("routerLink",e.VKq(5,F,t.marques.current_page-1))("ngClass",e.VKq(7,B,1==t.marques.current_page)),e.xp6(2),e.Q6J("ngForOf",e.DdM(9,gt).constructor(t.marques.total_pages)),e.xp6(2),e.Q6J("routerLink",e.VKq(10,F,t.marques.current_page+1))("ngClass",e.VKq(12,B,t.marques.current_page==t.marques.total_pages))}}function _t(i,a){1&i&&(e.TgZ(0,"strong",39),e._uU(1,"*"),e.qZA())}let mt=(()=>{class i{constructor(t,n,s,o,r){this.securiteClass=t,this.globale=n,this.vehiculeMarqueService=s,this.authService=o,this.activatedRoute=r,this.page=null,this.search=null,this.message=null,this.logo=null,this.imageURL="",this.marques=[],this.modeles=[],this.singleMarque={id:null,nom:null,description:null}}ngOnInit(){this.imageURL=d.N.apiURL.replace("api/v1","images/marques/"),this.activatedRoute.params.subscribe(t=>{this.page=t.page,this.page&&this.searchMarque()})}clear(){this.message=null,this.singleMarque={id:null,nom:null,logo:null}}getMarque(t){var n=this;this.message=null,this.logo=null,this.vehiculeMarqueService.getMarque(t).subscribe(s=>this.singleMarque=s,function(){var s=(0,c.Z)(function*(o){401==o.status&&(yield n.securiteClass.refreshToken())&&n.getMarque(t)});return function(o){return s.apply(this,arguments)}}())}uploadFile(t){var n=this;const s=new FormData;s.append("marque_id",t.id),s.append("file",this.logo),this.vehiculeMarqueService.uploadLogo(s).subscribe(o=>this.searchMarque(),function(){var o=(0,c.Z)(function*(r){401==r.status&&(yield n.securiteClass.refreshToken())&&n.uploadFile(t)});return function(r){return o.apply(this,arguments)}}())}update(t){var n=this;t.id?this.vehiculeMarqueService.update(t).subscribe(s=>{this.logo?this.uploadFile(t):this.searchMarque(),this.message="La marque est modifi\xe9e avec succ\xe8s !",this.globale.closeModal()},function(){var s=(0,c.Z)(function*(o){401==o.status&&(yield n.securiteClass.refreshToken())&&n.update(t)});return function(o){return s.apply(this,arguments)}}()):this.vehiculeMarqueService.create(t).subscribe(s=>{t.id=s.id,this.logo?this.uploadFile(t):this.searchMarque(),this.message="La marque est ajout\xe9e avec succ\xe8s !",this.globale.closeModal()},function(){var s=(0,c.Z)(function*(o){401==o.status&&(yield n.securiteClass.refreshToken())&&n.update(t)});return function(o){return s.apply(this,arguments)}}())}delete(t){var n=this;this.vehiculeMarqueService.delete(t).subscribe(s=>{this.searchMarque(),this.message="La marque est supprim\xe9e avec succ\xe8s !",this.globale.closeModal()},function(){var s=(0,c.Z)(function*(o){401==o.status&&(yield n.securiteClass.refreshToken())&&n.delete(t)});return function(o){return s.apply(this,arguments)}}())}onFileChange(t){const n=new FileReader;if(t.target.files&&t.target.files.length){const[s]=t.target.files;n.readAsDataURL(s),n.onload=()=>{this.logo=t.target.files[0]}}}onMouseMarque(t){this.singleMarque.id=t}searchMarque(t){var n=this;t&&(this.page=t),this.vehiculeMarqueService.search({nom:this.search},this.page).subscribe(s=>this.marques=s,function(){var s=(0,c.Z)(function*(o){401==o.status&&(yield n.securiteClass.refreshToken())&&n.searchMarque()});return function(o){return s.apply(this,arguments)}}())}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(b.z),e.Y36(f.N),e.Y36(N),e.Y36(z.e),e.Y36(_.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-marque"]],decls:76,vars:9,consts:[[1,"marque-v"],[1,"header-body","shadow-sm","p-3","mb-5","bg-white","rounded"],[1,"align-items-end"],[1,"header-pretitle"],[1,"header-title"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"col-md-4"],[1,"input-group","input-group-lg","input-group-merge","input-group-reverse"],["type","text","placeholder","Rechercher","name","search",1,"form-control","list-search",3,"ngModel","ngModelChange","keyup"],[1,"input-group-text"],[1,"fas","fa-search"],[1,"col-md-7"],[1,"col-md-1"],["type","button","data-bs-toggle","modal","data-bs-target","#modal-edit",1,"btn","btn-outline-primary","mb-2","btn-ajouter",3,"click"],[1,"fa-solid","fa-plus"],["class","alert alert-success","role","alert",4,"ngIf"],[1,"marques-list","row"],["class","thumbnail marque text-ellipsis",3,"title","mouseenter",4,"ngFor","ngForOf"],["aria-label","Page navigation","class","pag-tab col-md-12",4,"ngIf"],["id","modal-edit","tabindex","-1","role","dialog","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],["data-list","",1,"modal-card","card"],[1,"card-header"],["id","exampleModalCenterTitle",1,"card-header-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close","pb-0","mp-0"],[1,"card-body"],[3,"ngSubmit"],["mrqForm","ngForm"],[1,"frm-region"],["type","hidden","name","id","value","singleMarque.id",3,"ngModel","ngModelChange"],[1,"form-group"],["for","nom",1,"form-label"],["class","text-danger",4,"ngIf"],["type","text","placeholder","Nom","name","nom","required","",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["for","logo",1,"form-label"],["type","file","name","logo",1,"form-control","form-control-sm",3,"ngModel","ngModelChange","change"],[1,"text-danger"],["type","submit",1,"btn","btn-success","mb-2","float-right",3,"disabled"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary","float-right",2,"margin-right","5px"],["id","modal-delete","tabindex","-1","role","dialog","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-confirm"],[1,"modal-header","flex-column"],[1,"icon-box"],[1,"material-icons"],[1,"fa-solid","fa-x"],[1,"modal-title","w-100"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"close","btn-close"],[1,"modal-body"],[1,"modal-footer","justify-content-center"],["type","button","data-dismiss","modal","data-bs-dismiss","modal","aria-label","Close",1,"btn","btn-secondary"],["type","button",1,"btn","btn-danger",3,"click"],["role","alert",1,"alert","alert-success"],["type","button","data-bs-dismiss","alert","aria-label","Close",1,"btn-close","pb-0","mp-0"],[1,"thumbnail","marque","text-ellipsis",3,"title","mouseenter"],[1,"caption"],[1,"photo"],[1,"content-overlay"],["width","130",1,"lazy-container","observer","lazy-fade-in",3,"src"],[1,"opration"],["type","button","data-bs-toggle","modal","data-bs-target","#modal-edit",1,"btn-edit",3,"click"],[1,"fa-solid","fa-pen-to-square"],["type","button","data-bs-toggle","modal","data-bs-target","#modal-delete",1,"btn-delete",3,"click"],[1,"fa-solid","fa-trash"],[3,"routerLink"],["type","button","placement","bottom","ngbTooltip","Tooltip on bottom",1,"btn-info"],[1,"fa-solid","fa-link"],["aria-label","Page navigation",1,"pag-tab","col-md-12"],[1,"pagination"],[1,"page-item"],["href","#!",1,"page-link",3,"routerLink","ngClass"],["class","page-item",3,"ngClass",4,"ngFor","ngForOf"],[1,"page-link",3,"routerLink","ngClass"],[1,"page-item",3,"ngClass"],[1,"page-link",3,"routerLink"]],template:function(t,n){if(1&t){const s=e.EpF();e.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"h6",3),e._uU(4," Gestion des v\xe9hicules "),e.qZA(),e.TgZ(5,"h2",4),e._uU(6," Marques de v\xe9hicule "),e.qZA()()(),e.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",6)(11,"div",8)(12,"div",9)(13,"input",10),e.NdJ("ngModelChange",function(r){return n.search=r})("keyup",function(){return n.searchMarque(1)}),e.qZA(),e.TgZ(14,"div",11),e._UZ(15,"i",12),e.qZA()()(),e._UZ(16,"div",13),e.TgZ(17,"div",14)(18,"button",15),e.NdJ("click",function(){return n.clear()}),e._UZ(19,"i",16),e.qZA()()(),e._UZ(20,"br"),e.TgZ(21,"div",6),e.YNc(22,at,3,1,"div",17),e.qZA(),e.TgZ(23,"div",18),e.YNc(24,ut,14,6,"div",19),e.YNc(25,pt,9,14,"nav",20),e.qZA(),e._UZ(26,"br")(27,"br"),e.qZA()(),e.TgZ(28,"div",21)(29,"div",22)(30,"div",23)(31,"div",24)(32,"div",25)(33,"h4",26),e._uU(34," Marque vehicule "),e.qZA(),e._UZ(35,"button",27),e.qZA(),e.TgZ(36,"div",28)(37,"form",29,30),e.NdJ("ngSubmit",function(){e.CHM(s);const r=e.MAs(38);return n.update(r.value)}),e.TgZ(39,"div",31)(40,"input",32),e.NdJ("ngModelChange",function(r){return n.singleMarque.id=r}),e.qZA(),e.TgZ(41,"div",33)(42,"label",34),e._uU(43," Nom "),e.YNc(44,_t,2,0,"strong",35),e.qZA(),e.TgZ(45,"input",36),e.NdJ("ngModelChange",function(r){return n.singleMarque.nom=r}),e.qZA()(),e.TgZ(46,"div",33)(47,"label",37),e._uU(48,"Logo"),e.qZA(),e.TgZ(49,"input",38),e.NdJ("ngModelChange",function(r){return n.logo=r})("change",function(r){return n.onFileChange(r)}),e.qZA()()(),e.TgZ(50,"div",7)(51,"small",39),e._uU(52,"*: Ce champ est obligatoire."),e.qZA(),e.TgZ(53,"button",40),e._uU(54,"Enregister"),e.qZA(),e.TgZ(55,"button",41),e._uU(56,"Annuler"),e.qZA()()()()()()()(),e.TgZ(57,"div",42)(58,"div",43)(59,"div",23)(60,"div",44)(61,"div",45)(62,"i",46),e._UZ(63,"i",47),e.qZA()(),e.TgZ(64,"h4",48),e._uU(65,"\xcates-vous s\xfbr?"),e.qZA(),e._UZ(66,"button",49),e.qZA(),e.TgZ(67,"div",50)(68,"p"),e._uU(69,"Voulez-vous vraiment supprimer ces enregistrements\xa0? Ce processus ne peut pas \xeatre annul\xe9."),e.qZA(),e._UZ(70,"br"),e.qZA(),e.TgZ(71,"div",51)(72,"button",52),e._uU(73,"Annuler"),e.qZA(),e.TgZ(74,"button",53),e.NdJ("click",function(){return n.delete(n.singleMarque.id)}),e._uU(75,"Supprimer"),e.qZA()()()()()()()}if(2&t){const s=e.MAs(38);e.xp6(13),e.Q6J("ngModel",n.search),e.xp6(9),e.Q6J("ngIf",n.message),e.xp6(2),e.Q6J("ngForOf",n.marques.records),e.xp6(1),e.Q6J("ngIf",n.marques.total_records&&n.marques.total_pages>1),e.xp6(15),e.Q6J("ngModel",n.singleMarque.id),e.xp6(4),e.Q6J("ngIf",!n.singleMarque.nom),e.xp6(1),e.Q6J("ngModel",n.singleMarque.nom),e.xp6(4),e.Q6J("ngModel",n.logo),e.xp6(4),e.Q6J("disabled",!s.valid)}},directives:[l.Fj,l.JJ,l.On,u.O5,u.sg,_.yS,u.mk,l._Y,l.JL,l.F,l.Q7],styles:[".marques-list[_ngcontent-%COMP%]{margin-left:0}.marques-list[_ngcontent-%COMP%]   .marque[_ngcontent-%COMP%]   .caption[_ngcontent-%COMP%]{padding:7px 10px;background-color:#fbfafa;font-size:14px;font-weight:200;color:#2d3538;text-transform:capitalize;text-align:center;display:block}.marques-list[_ngcontent-%COMP%]   .marque[_ngcontent-%COMP%]   .photo[_ngcontent-%COMP%]{color:#fff;text-align:center;height:auto}.marques-list[_ngcontent-%COMP%]   .marque[_ngcontent-%COMP%]{padding:0;background-color:#fff;border-radius:5px;position:relative;border:1px solid rgba(0,0,0,.1);overflow:hidden;display:block;margin-bottom:10px;height:150px;margin-right:10.2px!important;width:166.2px}.btn-edit[_ngcontent-%COMP%], .btn-delete[_ngcontent-%COMP%], .btn-info[_ngcontent-%COMP%]{background-color:transparent;border-color:transparent;font-size:20px;padding:0 2px;color:#fff}.marque[_ngcontent-%COMP%]   .content-overlay[_ngcontent-%COMP%]{background:rgba(0,0,0,.6);position:absolute;height:99%;width:100%;left:0;top:0;bottom:0;right:0;opacity:0;transition:all .4s ease-in-out 0s}.marque[_ngcontent-%COMP%]:hover   .content-overlay[_ngcontent-%COMP%]{opacity:1}.opration[_ngcontent-%COMP%]{position:absolute;text-align:center;padding-left:1em;padding-right:1em;width:100%;top:50%;left:50%;opacity:0;transform:translate(-50%,-50%);transition:all .3s ease-in-out 0s}.marque[_ngcontent-%COMP%]:hover   .opration[_ngcontent-%COMP%]{top:55%;left:50%;opacity:1}.btn-edit[_ngcontent-%COMP%]:hover, .btn-delete[_ngcontent-%COMP%]:hover, .btn-info[_ngcontent-%COMP%]:hover{color:#a40b1d!important}.marque[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:contain;width:auto;height:105px;max-width:100%;max-height:100%}.btn-ajouter[_ngcontent-%COMP%]{float:right;width:auto;margin-right:1%;padding:7px 10px}.list-search[_ngcontent-%COMP%]{padding:1.5px}"]}),i})();function ht(i,a){if(1&i&&(e.TgZ(0,"div",58),e._uU(1),e._UZ(2,"button",59),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.message," ")}}function vt(i,a){1&i&&(e.TgZ(0,"div",60)(1,"div",26)(2,"h4",61),e._UZ(3,"i",62),e._uU(4," Pas de donn\xe9e "),e.qZA()()())}function Zt(i,a){if(1&i&&(e.TgZ(0,"small",73),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.categorie," ")}}function bt(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",65)(1,"div",66)(2,"h3"),e._uU(3),e.qZA(),e.YNc(4,Zt,2,1,"small",67),e.TgZ(5,"div",68)(6,"button",69),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.oxw(2).singleModele.id=o.id}),e._UZ(7,"i",70),e.qZA(),e.TgZ(8,"button",71),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.oxw(2).getModele(o.id)}),e._UZ(9,"i",72),e.qZA()()()()}if(2&i){const t=a.$implicit;e.xp6(3),e.Oqu(t.nom),e.xp6(1),e.Q6J("ngIf",t.categorie)}}function ft(i,a){if(1&i&&(e.TgZ(0,"div",63),e.YNc(1,bt,10,2,"div",64),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.modeles)}}function Ct(i,a){1&i&&(e.TgZ(0,"strong",43),e._uU(1,"*"),e.qZA())}function qt(i,a){1&i&&(e.TgZ(0,"strong",43),e._uU(1,"*"),e.qZA())}function Tt(i,a){if(1&i&&(e.TgZ(0,"option",74),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.s9C("value",t.id),e.xp6(1),e.hij(" ",t.nom," ")}}const Mt=function(){return["/vehicules/marques/page/1"]},At=function(){return["/vehicules/categories"]};let xt=(()=>{class i{constructor(t,n,s,o,r,g){this.securiteClass=t,this.globale=n,this.vehiculeModeleService=s,this.vehiculeMarqueService=o,this.vehiculeCategorieService=r,this.activatedRoute=g,this.message=null,this.modeles=[],this.categories=[],this.marques=[],this.singleModele={id:null,marque_id:null,categorie_id:null,nom:null}}ngOnInit(){this.activatedRoute.params.subscribe(t=>{const{id:n}=t;n&&(this.getAllModeles(n),this.singleModele.marque_id=n)}),this.getAllMarques(),this.getAllCategorie()}getAllModeles(t){this.vehiculeModeleService.getModelesByMarqueId(t).subscribe(n=>this.modeles=n,n=>{401==n.status&&this.securiteClass.refreshToken()&&this.getAllModeles(t)})}getAllMarques(){this.vehiculeMarqueService.getAll().subscribe(t=>this.marques=t,t=>{401==t.status&&this.securiteClass.refreshToken()&&this.getAllMarques()})}getAllCategorie(){this.vehiculeCategorieService.getAll().subscribe(t=>this.categories=t,t=>{401==t.status&&this.securiteClass.refreshToken()&&this.getAllCategorie()})}getModele(t){this.message=null,this.vehiculeModeleService.getModele(t).subscribe(n=>this.singleModele=n,n=>{401==n.status&&this.securiteClass.refreshToken()&&this.getModele(t)})}update(t){t.id?this.vehiculeModeleService.update(t).subscribe(n=>{this.getAllModeles(this.singleModele.marque_id),this.message="Le modele est modifi\xe9 avec succ\xe8s !",this.globale.closeModal()},n=>{401==n.status&&this.securiteClass.refreshToken()&&this.update(t)}):this.vehiculeModeleService.create(t).subscribe(n=>{this.getAllModeles(this.singleModele.marque_id),this.message="Le modele est ajout\xe9 avec succ\xe8s !",this.globale.closeModal()},n=>{401==n.status&&this.securiteClass.refreshToken()&&this.update(t)})}delete(t){this.vehiculeModeleService.delete(t).subscribe(n=>{this.getAllModeles(this.singleModele.marque_id),this.message="Le modele est supprim\xe9 avec succ\xe8s !",this.globale.closeModal()},n=>{401==n.status&&this.securiteClass.refreshToken()&&this.delete(t)})}clear(){this.message=null,this.singleModele={id:null,nom:null,description:null,marque_id:this.singleModele.marque_id,categorie_id:null}}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(b.z),e.Y36(f.N),e.Y36(K),e.Y36(N),e.Y36(Q),e.Y36(_.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-modele"]],decls:89,vars:15,consts:[[1,"modele-v"],[1,"header-body","shadow-sm","p-3","mb-5","bg-white","rounded"],[1,"align-items-end"],[1,"header-pretitle"],[1,"header-title"],[1,"container"],[1,"row"],[1,"row","align-items-center"],[1,"col"],[1,"nav","nav-tabs","nav-overflow","header-tabs"],[1,"nav-item"],[1,"nav-link",3,"routerLink"],[1,"nav-link","active"],[1,"col-md-12"],["type","button","data-bs-toggle","modal","data-bs-target","#modal-edit",1,"btn","btn-outline-primary","mb-2",2,"float","right",3,"click"],[1,"fa-solid","fa-plus"],["class","alert alert-success","role","alert",4,"ngIf"],["class","card bg-light border",4,"ngIf"],["class","modeles-list row",4,"ngIf"],["id","modal-edit","tabindex","-1","role","dialog","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],["data-list","",1,"modal-card","card"],[1,"card-header"],["id","exampleModalCenterTitle",1,"card-header-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close","pb-0","mp-0"],[1,"card-body"],[3,"ngSubmit"],["grpForm","ngForm"],[1,"frm-region"],["type","hidden","name","id","value","singleModele.id",3,"ngModel","ngModelChange"],["type","hidden","name","marque_id","value","singleModele.marque_id",3,"ngModel","ngModelChange"],[1,"form-group"],["for","nom",1,"form-label"],["class","text-danger",4,"ngIf"],["type","text","placeholder","Nom","name","nom","required","",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["for","titre",1,"form-label"],["name","categorie_id","required","",1,"form-select","form-select-sm",3,"ngModel","ngModelChange"],["value","null","disabled",""],[3,"value",4,"ngFor","ngForOf"],[1,"add-cat"],[1,"col-md-2",3,"routerLink"],[1,"fa-solid","fa-question"],[1,"text-danger"],["type","submit",1,"btn","btn-success","mb-2","float-right",3,"disabled"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary","float-right",2,"margin-right","5px"],["id","modal-delete","tabindex","-1","role","dialog","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-confirm"],[1,"modal-header","flex-column"],[1,"icon-box"],[1,"material-icons"],[1,"fa-solid","fa-x"],[1,"modal-title","w-100"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"close","btn-close"],[1,"modal-body"],[1,"modal-footer","justify-content-center"],["type","button","data-dismiss","modal","data-bs-dismiss","modal","aria-label","Close",1,"btn","btn-secondary"],["type","button",1,"btn","btn-danger",3,"click"],["role","alert",1,"alert","alert-success"],["type","button","data-bs-dismiss","alert","aria-label","Close",1,"btn-close","pb-0","mp-0"],[1,"card","bg-light","border"],[1,"mb-2"],[1,"fas","fa-exclamation-triangle"],[1,"modeles-list","row"],["class","col-xs-4 col-sm-3 col-md-3",4,"ngFor","ngForOf"],[1,"col-xs-4","col-sm-3","col-md-3"],[1,"modele"],["class","text-muted categorie",4,"ngIf"],[1,"operations"],["type","button","data-bs-toggle","modal","data-bs-target","#modal-delete",1,"btn","btn-danger","btn-delete",3,"click"],[1,"fa-solid","fa-trash"],["type","button","data-bs-toggle","modal","data-bs-target","#modal-edit",1,"btn","btn-success","btn-edit",3,"click"],[1,"fa-solid","fa-pen"],[1,"text-muted","categorie"],[3,"value"]],template:function(t,n){if(1&t){const s=e.EpF();e.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"h6",3),e._uU(4," Gestion des v\xe9hicules "),e.qZA(),e.TgZ(5,"h2",4),e._uU(6," Gestion des mod\xe8les "),e.qZA()()(),e.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"ul",9)(12,"li",10)(13,"a",11),e._uU(14," Marques "),e.qZA()(),e.TgZ(15,"li",10)(16,"button",12),e._uU(17," Mod\xe8les "),e.qZA()()()(),e._UZ(18,"br")(19,"br")(20,"br")(21,"br"),e.qZA(),e.TgZ(22,"div",13)(23,"button",14),e.NdJ("click",function(){return n.clear()}),e._UZ(24,"i",15),e.qZA(),e._UZ(25,"br")(26,"br")(27,"br"),e.TgZ(28,"div",6),e.YNc(29,ht,3,1,"div",16),e.YNc(30,vt,5,0,"div",17),e.qZA(),e.YNc(31,ft,2,1,"div",18),e.qZA()(),e.TgZ(32,"div",19)(33,"div",20)(34,"div",21)(35,"div",22)(36,"div",23)(37,"h4",24),e._uU(38," Modele vehicule "),e.qZA(),e._UZ(39,"button",25),e.qZA(),e.TgZ(40,"div",26)(41,"form",27,28),e.NdJ("ngSubmit",function(){e.CHM(s);const r=e.MAs(42);return n.update(r.value)}),e.TgZ(43,"div",29)(44,"input",30),e.NdJ("ngModelChange",function(r){return n.singleModele.id=r}),e.qZA(),e.TgZ(45,"input",31),e.NdJ("ngModelChange",function(r){return n.singleModele.marque_id=r}),e.qZA(),e.TgZ(46,"div",32)(47,"label",33),e._uU(48," Nom "),e.YNc(49,Ct,2,0,"strong",34),e.qZA(),e.TgZ(50,"input",35),e.NdJ("ngModelChange",function(r){return n.singleModele.nom=r}),e.qZA()(),e.TgZ(51,"div",32)(52,"label",36),e._uU(53," Categories "),e.YNc(54,qt,2,0,"strong",34),e.qZA(),e.TgZ(55,"select",37),e.NdJ("ngModelChange",function(r){return n.singleModele.categorie_id=r}),e.TgZ(56,"option",38),e._uU(57,"Veuillez choisir..."),e.qZA(),e.YNc(58,Tt,2,2,"option",39),e.qZA(),e.TgZ(59,"small",40)(60,"a",41),e._uU(61," Vous voulez ajouter une cat\xe9gorie "),e._UZ(62,"i",42),e.qZA()()()(),e.TgZ(63,"div",13)(64,"small",43),e._uU(65,"*: Ces champs sont obligatoires."),e.qZA(),e.TgZ(66,"button",44),e._uU(67,"Enregister"),e.qZA(),e.TgZ(68,"button",45),e._uU(69,"Annuler"),e.qZA()()()()()()()(),e.TgZ(70,"div",46)(71,"div",47)(72,"div",21)(73,"div",48)(74,"div",49)(75,"i",50),e._UZ(76,"i",51),e.qZA()(),e.TgZ(77,"h4",52),e._uU(78,"\xcates-vous s\xfbr?"),e.qZA(),e._UZ(79,"button",53),e.qZA(),e.TgZ(80,"div",54)(81,"p"),e._uU(82,"Voulez-vous vraiment supprimer ces enregistrements\xa0? Ce processus ne peut pas \xeatre annul\xe9."),e.qZA(),e._UZ(83,"br"),e.qZA(),e.TgZ(84,"div",55)(85,"button",56),e._uU(86,"Annuler"),e.qZA(),e.TgZ(87,"button",57),e.NdJ("click",function(){return n.delete(n.singleModele.id)}),e._uU(88,"Supprimer"),e.qZA()()()()()()()}if(2&t){const s=e.MAs(42);e.xp6(13),e.Q6J("routerLink",e.DdM(13,Mt)),e.xp6(16),e.Q6J("ngIf",n.message),e.xp6(1),e.Q6J("ngIf",0==n.modeles.length),e.xp6(1),e.Q6J("ngIf",n.modeles.length>0),e.xp6(13),e.Q6J("ngModel",n.singleModele.id),e.xp6(1),e.Q6J("ngModel",n.singleModele.marque_id),e.xp6(4),e.Q6J("ngIf",!n.singleModele.nom),e.xp6(1),e.Q6J("ngModel",n.singleModele.nom),e.xp6(4),e.Q6J("ngIf",!n.singleModele.categorie_id),e.xp6(1),e.Q6J("ngModel",n.singleModele.categorie_id),e.xp6(3),e.Q6J("ngForOf",n.categories),e.xp6(2),e.Q6J("routerLink",e.DdM(14,At)),e.xp6(6),e.Q6J("disabled",!s.valid)}},directives:[_.yS,u.O5,u.sg,l._Y,l.JL,l.F,l.Fj,l.JJ,l.On,l.Q7,l.EJ,l.YN,l.Kr],styles:[".modeles-list[_ngcontent-%COMP%]   .modele[_ngcontent-%COMP%]{box-shadow:#32325d40 0 2px 5px -1px,#0000004d 0 1px 3px -1px;padding:20px 30px;height:auto;border-radius:8px;margin-bottom:20px;background-color:#fff;min-height:120px}.btn-edit[_ngcontent-%COMP%], .btn-delete[_ngcontent-%COMP%]{padding:3px 5px!important;float:right!important;margin-left:3px;font-size:15px}.operations[_ngcontent-%COMP%]{height:25px}.modele[_ngcontent-%COMP%]:hover{color:#155724!important;background-color:#d4edda!important;border-color:#c3e6cb!important;font-weight:400;box-shadow:#00000059 0 5px 15px}.modele[_ngcontent-%COMP%]:hover   .operations[_ngcontent-%COMP%]{opacity:1}.operations[_ngcontent-%COMP%]{opacity:0}"]}),i})(),Ut=(()=>{class i{constructor(t){this.http=t}search(t,n){return this.http.post(d.N.apiURL+"/vehicules/compteurs/find/page/"+t,n)}create(t){return this.http.post(d.N.apiURL+"/vehicules/compteurs",t)}update(t){return this.http.put(d.N.apiURL+"/vehicules/compteurs/"+t.id,t)}delete(t){return this.http.delete(d.N.apiURL+"/vehicules/compteurs/"+t)}getCompteur(t){return this.http.get(d.N.apiURL+"/vehicules/compteurs/"+t)}getGpsCompteur(t,n){return this.http.post(d.N.apiURL+"/vehicules/gps-compteurs/find/page/"+t,n)}getAllCompteurManuel(t){return this.http.post(d.N.apiURL+"/vehicules/compteurs/all",t)}getAllCompteurAutomatique(t){return this.http.post(d.N.apiURL+"/vehicules/gps-compteurs/all",t)}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(T.eN))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function yt(i,a){if(1&i&&(e.TgZ(0,"div",81),e._uU(1),e._UZ(2,"button",82),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.message," ")}}function Jt(i,a){if(1&i&&(e.TgZ(0,"option",83),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.s9C("value",t.id),e.xp6(1),e.hij(" ",t.matricule,"")}}function Nt(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"tr")(1,"td",84),e._uU(2),e.qZA(),e.TgZ(3,"td",85)(4,"strong"),e._uU(5),e.qZA()(),e.TgZ(6,"td",86)(7,"strong"),e._uU(8),e.qZA()(),e.TgZ(9,"td",87)(10,"strong"),e._uU(11),e.qZA()(),e.TgZ(12,"td",88),e._uU(13),e.ALo(14,"date"),e.qZA(),e.TgZ(15,"td")(16,"button",89),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.oxw(2).getCompteur(o.id)}),e._UZ(17,"i",90),e.qZA(),e._uU(18," \xa0 "),e.TgZ(19,"button",91),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.oxw(2).singleCompteur.id=o.id}),e._UZ(20,"i",92),e.qZA()()()}if(2&i){const t=a.$implicit;e.xp6(2),e.Oqu(t.matricule),e.xp6(3),e.Oqu(t.ancien_compteur.toFixed(2)),e.xp6(3),e.Oqu(t.compteur.toFixed(2)),e.xp6(3),e.Oqu(t.distance.toFixed(2)),e.xp6(2),e.hij(" ",e.xi3(14,5,t.date_operation,"dd/MM/yyyy HH:mm")," ")}}const U=function(i){return{"d-none":i}};function kt(i,a){if(1&i&&(e.TgZ(0,"tr")(1,"td",93)(2,"div",94)(3,"p",33),e._uU(4,"Veuillez s\xe9lectionner un v\xe9hicule ..."),e.qZA()()()()),2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("ngClass",e.VKq(1,U,t.mychart))}}function Vt(i,a){if(1&i&&(e.TgZ(0,"tr")(1,"td",95)(2,"h3",96),e._uU(3," Total distance: "),e.TgZ(4,"span"),e._uU(5),e.TgZ(6,"small"),e._uU(7,"Km"),e.qZA()()()()()),2&i){const t=e.oxw(2);e.xp6(5),e.hij("",null==t.total.manuel?null:t.total.manuel.toFixed(2)," ")}}const y=function(i){return{active:i}},D=function(i){return["/vehicules/compteurs/page/",i]};function Ot(i,a){if(1&i&&(e.TgZ(0,"li",103)(1,"a",104),e._uU(2),e.qZA()()),2&i){const t=a.index,n=e.oxw(3);e.Q6J("ngClass",e.VKq(3,y,n.compteurs.current_page==t+1)),e.xp6(1),e.Q6J("routerLink",e.VKq(5,D,t+1)),e.xp6(1),e.Oqu(t+1)}}const k=function(i){return{_disabled:i}},$=function(){return[]};function Et(i,a){if(1&i&&(e.TgZ(0,"nav",97)(1,"ul",98)(2,"li",99)(3,"a",100),e._uU(4," Pr\xe9c\xe9dent "),e.qZA()(),e.YNc(5,Ot,3,7,"li",101),e.TgZ(6,"li",99)(7,"a",102),e._uU(8," Suivant "),e.qZA()()()()),2&i){const t=e.oxw(2);e.xp6(3),e.Q6J("routerLink",e.VKq(5,D,t.compteurs.current_page-1))("ngClass",e.VKq(7,k,1==t.compteurs.current_page)),e.xp6(2),e.Q6J("ngForOf",e.DdM(9,$).constructor(t.compteurs.total_pages)),e.xp6(2),e.Q6J("routerLink",e.VKq(10,D,t.compteurs.current_page+1))("ngClass",e.VKq(12,k,t.compteurs.current_page==t.compteurs.total_pages))}}function Qt(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",70)(1,"div",6)(2,"div",54)(3,"div",6),e.YNc(4,yt,3,1,"div",71),e.qZA(),e.TgZ(5,"button",72),e.NdJ("click",function(){return e.CHM(t),e.oxw().clear()}),e._UZ(6,"i",73),e.qZA(),e._UZ(7,"br")(8,"br")(9,"br"),e.TgZ(10,"form",15,16),e.NdJ("ngSubmit",function(){e.CHM(t);const s=e.MAs(11);return e.oxw().searchCompteurs(s.value)}),e.TgZ(12,"div",17)(13,"div",18)(14,"label",19),e._uU(15,"V\xe9hicules"),e.qZA(),e.TgZ(16,"select",21),e.NdJ("ngModelChange",function(s){return e.CHM(t),e.oxw().search.vehicule_id=s}),e.TgZ(17,"option",22),e._uU(18,"Veuillez choisir ..."),e.qZA(),e.YNc(19,Jt,2,2,"option",23),e.qZA()()(),e.TgZ(20,"div",17)(21,"div",18)(22,"label",24),e._uU(23,"Date d\xe9but"),e.qZA(),e.TgZ(24,"input",25),e.NdJ("ngModelChange",function(s){return e.CHM(t),e.oxw().search.date_debut=s}),e.qZA()()(),e.TgZ(25,"div",17)(26,"div",18)(27,"label",26),e._uU(28,"Date fin"),e.qZA(),e.TgZ(29,"div",27)(30,"input",28),e.NdJ("ngModelChange",function(s){return e.CHM(t),e.oxw().search.date_fin=s}),e.qZA(),e.TgZ(31,"div",29)(32,"button",30),e._UZ(33,"i",31),e.qZA()()()()()(),e.TgZ(34,"div",74)(35,"table",75)(36,"thead")(37,"tr")(38,"th"),e._uU(39,"Matricule"),e.qZA(),e.TgZ(40,"th"),e._uU(41,"Ancien compteur Km"),e.qZA(),e.TgZ(42,"th"),e._uU(43,"Nouveau compteur Km"),e.qZA(),e.TgZ(44,"th"),e._uU(45,"Kilom\xe9trage parcouru Km"),e.qZA(),e.TgZ(46,"th"),e._uU(47,"Date d'op\xe9ration"),e.qZA(),e.TgZ(48,"th",76),e._uU(49,"Options"),e.qZA()()(),e.TgZ(50,"tbody",77),e.YNc(51,Nt,21,8,"tr",78),e.qZA(),e.TgZ(52,"tfoot"),e.YNc(53,kt,5,3,"tr",79),e.YNc(54,Vt,8,1,"tr",79),e.qZA()()()(),e.YNc(55,Et,9,14,"nav",80),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(4),e.Q6J("ngIf",t.message),e.xp6(12),e.Q6J("ngModel",t.search.vehicule_id),e.xp6(3),e.Q6J("ngForOf",t.vehicules_sans_balise),e.xp6(5),e.Q6J("ngModel",t.search.date_debut),e.xp6(6),e.Q6J("ngModel",t.search.date_fin),e.xp6(21),e.Q6J("ngForOf",t.compteurs.records),e.xp6(2),e.Q6J("ngIf",0==t.compteurs.total_records||null==t.compteurs.total_records),e.xp6(1),e.Q6J("ngIf",t.compteurs.total_records>0),e.xp6(1),e.Q6J("ngIf",t.compteurs.total_records&&t.compteurs.total_pages>1)}}function wt(i,a){1&i&&(e.TgZ(0,"strong",55),e._uU(1,"*"),e.qZA())}function St(i,a){if(1&i&&(e.TgZ(0,"option",83),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.s9C("value",t.id),e.xp6(1),e.hij(" ",t.matricule,"")}}function Ft(i,a){if(1&i&&(e.TgZ(0,"tr")(1,"td",84),e._uU(2),e.qZA(),e.TgZ(3,"td",85)(4,"strong"),e._uU(5),e.qZA()(),e.TgZ(6,"td",86)(7,"strong"),e._uU(8),e.qZA(),e._UZ(9,"br"),e.qZA(),e.TgZ(10,"td",106)(11,"strong"),e._uU(12),e.qZA()(),e.TgZ(13,"td"),e._uU(14),e.ALo(15,"date"),e.qZA()()),2&i){const t=a.$implicit;e.xp6(2),e.Oqu(t.matricule),e.xp6(3),e.Oqu(t.ancien_compteur.toFixed(3)),e.xp6(3),e.Oqu(t.nouveau_compteur.toFixed(3)),e.xp6(4),e.Oqu(t.distance.toFixed(3)),e.xp6(2),e.Oqu(e.xi3(15,5,t.date_heure,"dd/MM/yyyy HH:mm"))}}function Dt(i,a){if(1&i&&(e.TgZ(0,"tr")(1,"td",93)(2,"div",94)(3,"p",33),e._uU(4,"Veuillez s\xe9lectionner un v\xe9hicule ..."),e.qZA()()()()),2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("ngClass",e.VKq(1,U,t.mychart))}}function Lt(i,a){if(1&i&&(e.TgZ(0,"tr")(1,"td",95)(2,"h3",96),e._uU(3," Total distance: "),e.TgZ(4,"span"),e._uU(5),e.TgZ(6,"small"),e._uU(7,"Km"),e.qZA()()()()()),2&i){const t=e.oxw(2);e.xp6(5),e.hij("",null==t.total.automatique?null:t.total.automatique.toFixed(2)," ")}}const L=function(i){return["/vehicules/gps-compteurs/find/page",i]};function Pt(i,a){if(1&i&&(e.TgZ(0,"li",103)(1,"a",104),e._uU(2),e.qZA()()),2&i){const t=a.index,n=e.oxw(3);e.Q6J("ngClass",e.VKq(3,y,n.compteurs_gps.current_page==t+1)),e.xp6(1),e.Q6J("routerLink",e.VKq(5,L,t+1)),e.xp6(1),e.Oqu(t+1)}}function It(i,a){if(1&i&&(e.TgZ(0,"nav",97)(1,"ul",98)(2,"li",99)(3,"a",100),e._uU(4," Pr\xe9c\xe9dent "),e.qZA()(),e.YNc(5,Pt,3,7,"li",101),e.TgZ(6,"li",99)(7,"a",102),e._uU(8," Suivant "),e.qZA()()()()),2&i){const t=e.oxw(2);e.xp6(3),e.Q6J("routerLink",e.VKq(5,L,t.compteurs_gps.current_page-1))("ngClass",e.VKq(7,k,1==t.compteurs_gps.current_page)),e.xp6(2),e.Q6J("ngForOf",e.DdM(9,$).constructor(t.compteurs_gps.total_pages)),e.xp6(2),e.Q6J("routerLink",e.VKq(10,L,t.compteurs_gps.current_page+1))("ngClass",e.VKq(12,k,t.compteurs_gps.current_page==t.compteurs.total_pages))}}function Yt(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",105)(1,"form",15,16),e.NdJ("ngSubmit",function(){e.CHM(t);const s=e.MAs(2);return e.oxw().searchCompteursAutomatique(s.value)}),e.TgZ(3,"div",17)(4,"div",18)(5,"label",19),e._uU(6," V\xe9hicules "),e.YNc(7,wt,2,0,"strong",20),e.qZA(),e.TgZ(8,"select",21),e.NdJ("ngModelChange",function(s){return e.CHM(t),e.oxw().search.vehicule_id=s}),e.TgZ(9,"option",22),e._uU(10,"Veuillez choisir ..."),e.qZA(),e.YNc(11,St,2,2,"option",23),e.qZA()()(),e.TgZ(12,"div",17)(13,"div",18)(14,"label",24),e._uU(15,"Date d\xe9but"),e.qZA(),e.TgZ(16,"input",25),e.NdJ("ngModelChange",function(s){return e.CHM(t),e.oxw().search.date_debut=s}),e.qZA()()(),e.TgZ(17,"div",17)(18,"div",18)(19,"label",26),e._uU(20,"Date fin"),e.qZA(),e.TgZ(21,"div",27)(22,"input",28),e.NdJ("ngModelChange",function(s){return e.CHM(t),e.oxw().search.date_fin=s}),e.qZA(),e.TgZ(23,"div",29)(24,"button",30),e._UZ(25,"i",31),e.qZA()()()()()(),e.TgZ(26,"div",74)(27,"table",75)(28,"thead")(29,"tr")(30,"th"),e._uU(31,"Matricule"),e.qZA(),e.TgZ(32,"th"),e._uU(33,"Ancien compteur Km"),e.qZA(),e.TgZ(34,"th"),e._uU(35,"Nouveau compteur Km"),e.qZA(),e.TgZ(36,"th"),e._uU(37,"Kilom\xe9trage parcouru Km"),e.qZA(),e.TgZ(38,"th"),e._uU(39),e.qZA()()(),e.TgZ(40,"tbody",77),e.YNc(41,Ft,16,8,"tr",78),e.qZA(),e.TgZ(42,"tfoot"),e.YNc(43,Dt,5,3,"tr",79),e.YNc(44,Lt,8,1,"tr",79),e.qZA()(),e.YNc(45,It,9,14,"nav",80),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(7),e.Q6J("ngIf",!t.search.vehicule_id),e.xp6(1),e.Q6J("ngModel",t.search.vehicule_id),e.xp6(3),e.Q6J("ngForOf",t.vehicules_avec_balise),e.xp6(5),e.Q6J("ngModel",t.search.date_debut),e.xp6(6),e.Q6J("ngModel",t.search.date_fin),e.xp6(17),e.hij("Date d'op\xe9ration ",t.compteurs_gps.total_records,""),e.xp6(2),e.Q6J("ngForOf",t.compteurs_gps.records),e.xp6(2),e.Q6J("ngIf",0==t.compteurs_gps.total_records||null==t.compteurs_gps.total_records),e.xp6(1),e.Q6J("ngIf",(null==t.compteurs_gps?null:t.compteurs_gps.total_records)>0),e.xp6(1),e.Q6J("ngIf",t.compteurs_gps.total_records&&t.compteurs_gps.total_pages>1)}}function Ht(i,a){1&i&&(e.TgZ(0,"strong",55),e._uU(1,"*"),e.qZA())}function Gt(i,a){if(1&i&&(e.TgZ(0,"option",83),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.s9C("value",t.id),e.xp6(1),e.hij(" ",t.matricule,"")}}function Kt(i,a){1&i&&(e.TgZ(0,"strong",55),e._uU(1,"*"),e.qZA())}function jt(i,a){if(1&i&&(e.TgZ(0,"option",83),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.s9C("value",t.id),e.xp6(1),e.Oqu(t.matricule)}}function zt(i,a){1&i&&(e.TgZ(0,"strong",55),e._uU(1,"*"),e.qZA())}function Rt(i,a){1&i&&(e.TgZ(0,"strong",55),e._uU(1,"*"),e.qZA())}const Bt=function(){return["/vehicules/compteurs/page/",1]},$t=function(){return["/vehicules/gps-compteurs/find/page",1]};let X=(()=>{class i{constructor(t,n,s,o,r,g,m){this.securiteClass=t,this.globale=n,this.activatedRoute=s,this.vehiculeHistoriqueCompteurService=o,this.vehiculeService=r,this.datePipe=g,this.router=m,this.currentDate=new Date,this.total={manuel:0,automatique:0},this.compteurs=[],this.compteurs_gps=[],this.vehicules_sans_balise=[],this.vehicules_avec_balise=[],this.vehicules=[],this.date=new Date,this.page=1,this.type="saisi-manuel",this.singleCompteur={id:null,vehicule_id:null,date_operation:null,compteur:null},this.search={vehicule_id:null,date_debut:this.date.getFullYear()+"-"+("0"+(this.date.getMonth()+1)).slice(-2)+"-01",date_fin:this.date.getFullYear()+"-"+("0"+(this.date.getMonth()+1)).slice(-2)+"-"+("0"+(this.date.getDate()+1)).slice(-2)},this.mychart=null}ngOnInit(){h.kL.register(...h.zX),this.getVehicules(),this.activatedRoute.params.subscribe(t=>{this.page=t.page,this.page&&(-1!=this.router.url.search("/vehicules/gps-compteurs/find/page/")?(this.searchCompteursAutomatique(this.search),this.type="releve-automatique"):(this.searchCompteurs(this.search),this.type="saisi-manuel"))})}clear(){this.singleCompteur={id:null,vehicule_id:null,date_operation:null,compteur:null}}getVehicules(){var t=this;this.vehiculeService.getAll().subscribe(n=>{this.vehicules=n,this.vehicules_avec_balise=n.filter(s=>s.balise),this.vehicules_sans_balise=n.filter(s=>!s.balise)},function(){var n=(0,c.Z)(function*(s){401==s.status&&(yield t.securiteClass.refreshToken())&&t.getVehicules()});return function(s){return n.apply(this,arguments)}}())}searchCompteurs(t){var n=this;t.vehicule_id&&(this.vehiculeHistoriqueCompteurService.search(this.page,t).subscribe(s=>this.compteurs=s,function(){var s=(0,c.Z)(function*(o){401==o.status&&(yield n.securiteClass.refreshToken())&&n.searchCompteurs(t)});return function(o){return s.apply(this,arguments)}}()),this.vehiculeHistoriqueCompteurService.getAllCompteurManuel(t).subscribe(s=>{const o=JSON.parse(JSON.stringify(s));this.total.manuel=o.reduce((r,g)=>r+g.distance,0)}))}searchCompteursAutomatique(t){var n=this;t.vehicule_id&&(this.vehiculeHistoriqueCompteurService.getGpsCompteur(this.page,this.search).subscribe(s=>this.compteurs_gps=s,function(){var s=(0,c.Z)(function*(o){401==o.status&&(yield n.securiteClass.refreshToken())&&n.searchCompteursAutomatique(t)});return function(o){return s.apply(this,arguments)}}()),this.vehiculeHistoriqueCompteurService.getAllCompteurAutomatique(this.search).subscribe(s=>{const o=JSON.parse(JSON.stringify(s));this.total.automatique=o.reduce((r,g)=>r+g.distance,0)}))}getCompteur(t){var n=this;this.message=null,this.vehiculeHistoriqueCompteurService.getCompteur(t).subscribe(s=>this.singleCompteur=s,function(){var s=(0,c.Z)(function*(o){401==o.status&&(yield n.securiteClass.refreshToken())&&n.getCompteur(t)});return function(o){return s.apply(this,arguments)}}())}update(t){var n=this;t.id?this.vehiculeHistoriqueCompteurService.update(t).subscribe(s=>{this.searchCompteurs(null),this.message="Le carburant est modifi\xe9 avec succ\xe8s !",this.globale.closeModal()},function(){var s=(0,c.Z)(function*(o){401==o.status&&(yield n.securiteClass.refreshToken())&&n.update(t)});return function(o){return s.apply(this,arguments)}}()):this.vehiculeHistoriqueCompteurService.create(t).subscribe(s=>{this.searchCompteurs(null),this.message="Le carburant est ajout\xe9 avec succ\xe8s !",this.globale.closeModal()},function(){var s=(0,c.Z)(function*(o){401==o.status&&(yield n.securiteClass.refreshToken())&&n.update(t)});return function(o){return s.apply(this,arguments)}}())}delete(t){var n=this;this.vehiculeHistoriqueCompteurService.delete(t).subscribe(s=>{this.searchCompteurs(null),this.message="Le carburant est supprim\xe9 avec succ\xe8s !",this.globale.closeModal()},function(){var s=(0,c.Z)(function*(o){401==o.status&&(yield n.securiteClass.refreshToken())&&n.delete(t)});return function(o){return s.apply(this,arguments)}}())}generateChart(t){var n=this;[...this.vehicules_avec_balise.filter(s=>s.id==t.vehicule_id)].length>0?this.vehiculeHistoriqueCompteurService.getAllCompteurAutomatique(this.search).subscribe(s=>{const o=JSON.parse(JSON.stringify(s));this.chartEvolutionConpteur([...o].map(r=>({x:this.datePipe.transform(r.date_heure,"dd/MM"),y:r.distance})))},function(){var s=(0,c.Z)(function*(o){401==o.status&&(yield n.securiteClass.refreshToken())&&n.generateChart(t)});return function(o){return s.apply(this,arguments)}}()):this.vehiculeHistoriqueCompteurService.getAllCompteurManuel(this.search).subscribe(s=>{const o=JSON.parse(JSON.stringify(s));this.chartEvolutionConpteur([...o].map(r=>({x:this.datePipe.transform(r.date_operation,"dd/MM"),y:r.distance})))})}chartEvolutionConpteur(t){let n=C("#chart-compteurs");this.mychart&&this.mychart.destroy(),this.mychart=new h.kL(n,{type:"line",data:{datasets:[{data:t,label:"chart",backgroundColor:"rgba(44, 123, 228)",borderColor:"rgba(44, 123, 228)"}]},options:{maintainAspectRatio:!1,scales:{x:{grid:{drawOnChartArea:!1}},y:{grid:{drawOnChartArea:!1}}},plugins:{legend:{display:!1}}}})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(b.z),e.Y36(f.N),e.Y36(_.gz),e.Y36(Ut),e.Y36(M.t),e.Y36(u.uU),e.Y36(_.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-historique-compteur"]],decls:113,vars:41,consts:[[1,"carburant-v"],[1,"header-body","shadow-sm","p-3","mb-5","bg-white","rounded"],[1,"align-items-end"],[1,"header-pretitle"],[1,"header-title"],[1,"container-fluid"],[1,"row"],[1,"col"],[1,"nav","nav-tabs","nav-overflow","header-tabs"],[1,"nav-item"],[3,"routerLink"],[1,"nav-link",3,"ngClass","click"],["class","saisi-manuel mb-5",4,"ngIf"],["class","releve-automatique mb-5",4,"ngIf"],[1,"graphe","mb-5",3,"ngClass"],[1,"row","form-search",3,"ngSubmit"],["searchForm","ngForm"],[1,"col-md-4"],[1,"form-group"],["for","titre"],["class","text-danger",4,"ngIf"],["name","vehicule_id",1,"form-select",3,"ngModel","ngModelChange"],["value","null","disabled",""],[3,"value",4,"ngFor","ngForOf"],["for","date_debut"],["type","date","name","date_debut",1,"form-control",3,"ngModel","ngModelChange"],["for","date_fin"],[1,"input-group"],["type","date","name","date_fin",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-group-append"],["type","submit",1,"btn","btn-outline-primary",2,"margin-left","12px"],[1,"fas","fa-search"],[1,"text-muted","pt-3","pb-3","bg-white","shadow-sm","row",3,"ngClass"],[1,"text-center"],[1,"row","bg-white","pt-4",3,"ngClass"],["id","chart-compteurs"],["id","modal-edit","tabindex","-1","role","dialog","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],["data-list","",1,"modal-card","card"],[1,"card-header"],["id","exampleModalCenterTitle",1,"card-header-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close","pb-0","mp-0"],[1,"card-body"],[3,"ngSubmit"],["compteurForm","ngForm"],[1,"frm-compteur"],["type","hidden","name","id","value","singleCompteur.id",3,"ngModel","ngModelChange"],["for","titre",1,"form-label"],["name","vehicule_id","required","",1,"form-select","form-select-sm",3,"ngModel","ngModelChange"],["for","qtn",1,"form-label"],["type","datetime-local","name","date_operation","required","",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["for","nom",1,"form-label"],["type","number","placeholder","Compteur","name","compteur","required","",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"col-md-12"],[1,"text-danger"],["type","submit",1,"btn","btn-success","mb-2","float-right",3,"disabled"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary","float-right",2,"margin-right","5px"],["id","modal-delete","tabindex","-1","role","dialog","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-confirm"],[1,"modal-header","flex-column"],[1,"icon-box"],[1,"material-icons"],[1,"fa-solid","fa-x"],[1,"modal-title","w-100"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"close","btn-close"],[1,"modal-body"],[1,"modal-footer","justify-content-center"],["type","button","data-dismiss","modal","data-bs-dismiss","modal","aria-label","Close",1,"btn","btn-secondary"],["type","button",1,"btn","btn-danger",3,"click"],[1,"saisi-manuel","mb-5"],["class","alert alert-success","role","alert",4,"ngIf"],["type","button","data-bs-toggle","modal","data-bs-target","#modal-edit",1,"btn","btn-outline-primary","mb-2",2,"float","right",3,"click"],[1,"fa-solid","fa-plus"],[1,"table-responsive","row"],[1,"table","table-sm","table-nowrap","card-table"],["width","100"],[1,"list"],[4,"ngFor","ngForOf"],[4,"ngIf"],["aria-label","Page navigation","class","pag-tab col-md-12 navigation",4,"ngIf"],["role","alert",1,"alert","alert-success"],["type","button","data-bs-dismiss","alert","aria-label","Close",1,"btn-close","pb-0","mp-0","text-white"],[3,"value"],[1,"matricule"],[1,"ancien-compteur"],[1,"nouveau-compteur"],[1,"kilom\xe9trage-parcouru","text-primary","font-weight-bold"],[1,"date-operation"],["type","button","ng-show","","data-bs-toggle","modal","data-bs-target","#modal-edit",1,"btn","btn-operation",3,"click"],[1,"fa-solid","fa-pen"],["type","button","data-bs-toggle","modal","data-bs-target","#modal-delete",1,"btn","btn-operation",3,"click"],["_ngcontent-hhv-c59","",1,"fa-solid","fa-trash"],["colspan","5"],[1,"text-muted","pt-3","pb-3","bg-white",3,"ngClass"],["colspan","6"],[1,"float-right","text-danger","font-weight-normal"],["aria-label","Page navigation",1,"pag-tab","col-md-12","navigation"],[1,"pagination"],[1,"page-item"],["href","#!",1,"page-link",3,"routerLink","ngClass"],["class","page-item",3,"ngClass",4,"ngFor","ngForOf"],[1,"page-link",3,"routerLink","ngClass"],[1,"page-item",3,"ngClass"],[1,"page-link",3,"routerLink"],[1,"releve-automatique","mb-5"],[1,"kilom\xe9trage-parcouru","text-primary"]],template:function(t,n){if(1&t){const s=e.EpF();e.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"h6",3),e._uU(4," Gestion des v\xe9hicules "),e.qZA(),e.TgZ(5,"h2",4),e._uU(6," Historiques de compteur "),e.qZA()()(),e.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"ul",8)(11,"li",9)(12,"a",10)(13,"button",11),e.NdJ("click",function(){return n.type="saisi-manuel"}),e._uU(14,"Saisi manuel"),e.qZA()()(),e.TgZ(15,"li",9)(16,"a",10)(17,"button",11),e.NdJ("click",function(){return n.type="releve-automatique"}),e._uU(18," Relev\xe9 automatique "),e.qZA()()(),e.TgZ(19,"li",9)(20,"button",11),e.NdJ("click",function(){return n.type="graphe"}),e._uU(21,"L\u2019\xe9volution"),e.qZA()()()()(),e.YNc(22,Qt,56,9,"div",12),e.YNc(23,Yt,46,10,"div",13),e.TgZ(24,"div",14)(25,"form",15,16),e.NdJ("ngSubmit",function(){e.CHM(s);const r=e.MAs(26);return n.generateChart(r.value)}),e.TgZ(27,"div",17)(28,"div",18)(29,"label",19),e._uU(30," V\xe9hicules "),e.YNc(31,Ht,2,0,"strong",20),e.qZA(),e.TgZ(32,"select",21),e.NdJ("ngModelChange",function(r){return n.search.vehicule_id=r}),e.TgZ(33,"option",22),e._uU(34,"Veuillez choisir ..."),e.qZA(),e.YNc(35,Gt,2,2,"option",23),e.qZA()()(),e.TgZ(36,"div",17)(37,"div",18)(38,"label",24),e._uU(39,"Date d\xe9but"),e.qZA(),e.TgZ(40,"input",25),e.NdJ("ngModelChange",function(r){return n.search.date_debut=r}),e.qZA()()(),e.TgZ(41,"div",17)(42,"div",18)(43,"label",26),e._uU(44,"Date fin"),e.qZA(),e.TgZ(45,"div",27)(46,"input",28),e.NdJ("ngModelChange",function(r){return n.search.date_fin=r}),e.qZA(),e.TgZ(47,"div",29)(48,"button",30),e._UZ(49,"i",31),e.qZA()()()()()(),e.TgZ(50,"div",32)(51,"p",33),e._uU(52,"Veuillez s\xe9lectionner un v\xe9hicule ..."),e.qZA()(),e.TgZ(53,"div",34),e._UZ(54,"canvas",35),e.qZA()(),e.TgZ(55,"div",36)(56,"div",37)(57,"div",38)(58,"div",39)(59,"div",40)(60,"h4",41),e._uU(61,"Compteur de V\xe9hicule"),e.qZA(),e._UZ(62,"button",42),e.qZA(),e.TgZ(63,"div",43)(64,"form",44,45),e.NdJ("ngSubmit",function(){e.CHM(s);const r=e.MAs(65);return n.update(r.value)}),e.TgZ(66,"div",46)(67,"input",47),e.NdJ("ngModelChange",function(r){return n.singleCompteur.id=r}),e.qZA(),e.TgZ(68,"div",18)(69,"label",48),e._uU(70," V\xe9hicule "),e.YNc(71,Kt,2,0,"strong",20),e.qZA(),e.TgZ(72,"select",49),e.NdJ("ngModelChange",function(r){return n.singleCompteur.vehicule_id=r}),e.TgZ(73,"option",22),e._uU(74,"Veuillez choisir..."),e.qZA(),e.YNc(75,jt,2,2,"option",23),e.qZA()(),e.TgZ(76,"div",18)(77,"label",50),e._uU(78," Date d'operation "),e.YNc(79,zt,2,0,"strong",20),e.qZA(),e.TgZ(80,"input",51),e.NdJ("ngModelChange",function(r){return n.singleCompteur.date_operation=r}),e.ALo(81,"date"),e.qZA()(),e.TgZ(82,"div",18)(83,"label",52),e._uU(84," Compteur Km "),e.YNc(85,Rt,2,0,"strong",20),e.qZA(),e.TgZ(86,"input",53),e.NdJ("ngModelChange",function(r){return n.singleCompteur.compteur=r}),e.qZA()()(),e.TgZ(87,"div",54)(88,"small",55),e._uU(89,"*: Ces champs sont obligatoires."),e.qZA(),e.TgZ(90,"button",56),e._uU(91,"Enregister"),e.qZA(),e.TgZ(92,"button",57),e._uU(93,"Annuler"),e.qZA()()()()()()()(),e.TgZ(94,"div",58)(95,"div",59)(96,"div",38)(97,"div",60)(98,"div",61)(99,"i",62),e._UZ(100,"i",63),e.qZA()(),e.TgZ(101,"h4",64),e._uU(102,"\xcates-vous s\xfbr?"),e.qZA(),e._UZ(103,"button",65),e.qZA(),e.TgZ(104,"div",66)(105,"p"),e._uU(106,"Voulez-vous vraiment supprimer ces enregistrements\xa0? Ce processus ne peut pas \xeatre annul\xe9. "),e.qZA(),e._UZ(107,"br"),e.qZA(),e.TgZ(108,"div",67)(109,"button",68),e._uU(110,"Annuler"),e.qZA(),e.TgZ(111,"button",69),e.NdJ("click",function(){return n.delete(n.singleCompteur.id)}),e._uU(112,"Supprimer"),e.qZA()()()()()()()}if(2&t){const s=e.MAs(65);e.xp6(12),e.Q6J("routerLink",e.DdM(27,Bt)),e.xp6(1),e.Q6J("ngClass",e.VKq(28,y,"saisi-manuel"==n.type)),e.xp6(3),e.Q6J("routerLink",e.DdM(30,$t)),e.xp6(1),e.Q6J("ngClass",e.VKq(31,y,"releve-automatique"==n.type)),e.xp6(3),e.Q6J("ngClass",e.VKq(33,y,"graphe"==n.type)),e.xp6(2),e.Q6J("ngIf","saisi-manuel"==n.type),e.xp6(1),e.Q6J("ngIf","releve-automatique"==n.type),e.xp6(1),e.Q6J("ngClass",e.VKq(35,U,"graphe"!=n.type)),e.xp6(7),e.Q6J("ngIf",!n.search.vehicule_id),e.xp6(1),e.Q6J("ngModel",n.search.vehicule_id),e.xp6(3),e.Q6J("ngForOf",n.vehicules),e.xp6(5),e.Q6J("ngModel",n.search.date_debut),e.xp6(6),e.Q6J("ngModel",n.search.date_fin),e.xp6(4),e.Q6J("ngClass",e.VKq(37,U,n.mychart)),e.xp6(3),e.Q6J("ngClass",e.VKq(39,U,!n.mychart)),e.xp6(14),e.Q6J("ngModel",n.singleCompteur.id),e.xp6(4),e.Q6J("ngIf",!n.singleCompteur.vehicule_id),e.xp6(1),e.Q6J("ngModel",n.singleCompteur.vehicule_id),e.xp6(3),e.Q6J("ngForOf",n.vehicules_sans_balise),e.xp6(4),e.Q6J("ngIf",!n.singleCompteur.date_operation),e.xp6(1),e.Q6J("ngModel",e.xi3(81,24,n.singleCompteur.date_operation,"yyyy-MM-ddTHH:mm")),e.xp6(5),e.Q6J("ngIf",!n.singleCompteur.compteur),e.xp6(1),e.Q6J("ngModel",n.singleCompteur.compteur),e.xp6(4),e.Q6J("disabled",!s.valid)}},directives:[_.yS,u.mk,u.O5,l._Y,l.JL,l.F,l.EJ,l.JJ,l.On,l.YN,l.Kr,u.sg,l.Fj,l.Q7,l.wV],pipes:[u.uU],styles:[".icon_eco[_ngcontent-%COMP%]{font-size:25px;margin-left:24px}.align-items-center[_ngcontent-%COMP%]{width:32%;display:inline-flex;margin-left:2%}canvas[_ngcontent-%COMP%]{height:300px!important}"]}),i})();var Xt=p(9152);function Wt(i,a){if(1&i&&(e.TgZ(0,"div",94),e._uU(1),e._UZ(2,"button",95),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.message," ")}}function en(i,a){if(1&i&&(e.TgZ(0,"option",96),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.s9C("value",t.id),e.xp6(1),e.hij(" ",t.matricule,"")}}function tn(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"tr")(1,"td",97),e._uU(2),e.qZA(),e.TgZ(3,"td",98),e._uU(4),e.qZA(),e.TgZ(5,"td",99),e._uU(6),e.qZA(),e.TgZ(7,"td",100),e._uU(8),e.qZA(),e.TgZ(9,"td",101),e._uU(10),e.ALo(11,"date"),e.qZA(),e.TgZ(12,"td",102),e._uU(13),e.qZA(),e.TgZ(14,"td",103),e._uU(15),e.qZA(),e.TgZ(16,"td")(17,"button",104),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.oxw(2).getDepense(o.id)}),e._UZ(18,"i",105),e.qZA(),e._uU(19," \xa0 "),e.TgZ(20,"button",106),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.oxw(2).singleDepense.id=o.id}),e._UZ(21,"i",107),e.qZA()()()}if(2&i){const t=a.$implicit;e.xp6(2),e.Oqu(t.matricule),e.xp6(2),e.Oqu(t.type_depense),e.xp6(2),e.Oqu(t.designation),e.xp6(2),e.Oqu(t.montant.toFixed(2)),e.xp6(2),e.Oqu(e.xi3(11,7,t.recurrence,"dd/MM/yyyy")),e.xp6(3),e.Oqu(t.fournisseur),e.xp6(2),e.Oqu(t.note)}}const P=function(i){return{active:i}},I=function(i){return["/vehicules/depenses/page",i]};function nn(i,a){if(1&i&&(e.TgZ(0,"li",114)(1,"a",115),e._uU(2),e.qZA()()),2&i){const t=a.index,n=e.oxw(3);e.Q6J("ngClass",e.VKq(3,P,n.depenses.current_page==t+1)),e.xp6(1),e.Q6J("routerLink",e.VKq(5,I,t+1)),e.xp6(1),e.Oqu(t+1)}}const W=function(i){return{_disabled:i}},on=function(){return[]};function sn(i,a){if(1&i&&(e.TgZ(0,"nav",108)(1,"ul",109)(2,"li",110)(3,"a",111),e._uU(4," Pr\xe9c\xe9dent "),e.qZA()(),e.YNc(5,nn,3,7,"li",112),e.TgZ(6,"li",110)(7,"a",113),e._uU(8," Suivant "),e.qZA()()()()),2&i){const t=e.oxw(2);e.xp6(3),e.Q6J("routerLink",e.VKq(5,I,t.depenses.current_page-1))("ngClass",e.VKq(7,W,1==t.depenses.current_page)),e.xp6(2),e.Q6J("ngForOf",e.DdM(9,on).constructor(t.depenses.total_pages)),e.xp6(2),e.Q6J("routerLink",e.VKq(10,I,t.depenses.current_page+1))("ngClass",e.VKq(12,W,t.depenses.current_page==t.depenses.total_pages))}}function rn(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",81),e.YNc(1,Wt,3,1,"div",82),e.TgZ(2,"button",83),e.NdJ("click",function(){return e.CHM(t),e.oxw().clear()}),e._UZ(3,"i",84),e.qZA(),e._UZ(4,"br")(5,"br")(6,"br"),e.TgZ(7,"form",15,16),e.NdJ("ngSubmit",function(){e.CHM(t);const s=e.MAs(8);return e.oxw().searchDepenses(s.value)}),e.TgZ(9,"div",14)(10,"div",17)(11,"label",18),e._uU(12,"V\xe9hicules"),e.qZA(),e.TgZ(13,"select",19),e.NdJ("ngModelChange",function(s){return e.CHM(t),e.oxw().search.vehicule_id=s}),e.TgZ(14,"option",85),e._uU(15,"Tous"),e.qZA(),e.YNc(16,en,2,2,"option",21),e.qZA()()(),e.TgZ(17,"div",14)(18,"div",17)(19,"label",22),e._uU(20,"Date d\xe9but"),e.qZA(),e.TgZ(21,"input",23),e.NdJ("ngModelChange",function(s){return e.CHM(t),e.oxw().search.date_debut=s}),e.qZA()()(),e.TgZ(22,"div",14)(23,"div",17)(24,"label",24),e._uU(25,"Date fin"),e.qZA(),e.TgZ(26,"div",25)(27,"input",26),e.NdJ("ngModelChange",function(s){return e.CHM(t),e.oxw().search.date_fin=s}),e.qZA(),e.TgZ(28,"div",27)(29,"button",28),e._UZ(30,"i",29),e.qZA()()()()()(),e.TgZ(31,"div",86)(32,"table",87)(33,"thead")(34,"tr")(35,"th"),e._uU(36,"Matricule"),e.qZA(),e.TgZ(37,"th"),e._uU(38,"Type"),e.qZA(),e.TgZ(39,"th"),e._uU(40,"Designation"),e.qZA(),e.TgZ(41,"th"),e._uU(42,"Montant"),e.qZA(),e.TgZ(43,"th"),e._uU(44,"Recurrence"),e.qZA(),e.TgZ(45,"th"),e._uU(46,"Fournisseur"),e.qZA(),e.TgZ(47,"th"),e._uU(48,"Note"),e.qZA(),e.TgZ(49,"th",88),e._uU(50,"Options"),e.qZA()()(),e.TgZ(51,"tbody",89),e.YNc(52,tn,22,10,"tr",90),e.qZA(),e.TgZ(53,"tfoot")(54,"tr")(55,"td",91)(56,"h3",92),e._uU(57," Co\xfbt total: "),e.TgZ(58,"span"),e._uU(59),e.TgZ(60,"small"),e._uU(61,"Dh"),e.qZA()()()()()()()(),e.YNc(62,sn,9,14,"nav",93),e.qZA()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.message),e.xp6(12),e.Q6J("ngModel",t.search.vehicule_id),e.xp6(3),e.Q6J("ngForOf",t.vehicules),e.xp6(5),e.Q6J("ngModel",t.search.date_debut),e.xp6(6),e.Q6J("ngModel",t.search.date_fin),e.xp6(25),e.Q6J("ngForOf",t.depenses.records),e.xp6(7),e.hij("",null==t.depenses.total_depenses?null:t.depenses.total_depenses.toFixed(2)," "),e.xp6(3),e.Q6J("ngIf",t.depenses.total_records&&t.depenses.total_pages>1)}}function an(i,a){if(1&i&&(e.TgZ(0,"option",96),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.s9C("value",t.id),e.xp6(1),e.hij(" ",t.matricule,"")}}function ln(i,a){1&i&&(e.TgZ(0,"strong",66),e._uU(1,"*"),e.qZA())}function un(i,a){if(1&i&&(e.TgZ(0,"option",96),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.s9C("value",t.id),e.xp6(1),e.Oqu(t.matricule)}}function dn(i,a){1&i&&(e.TgZ(0,"strong",66),e._uU(1,"*"),e.qZA())}function cn(i,a){1&i&&(e.TgZ(0,"strong",66),e._uU(1,"*"),e.qZA())}function gn(i,a){1&i&&(e.TgZ(0,"strong",66),e._uU(1,"*"),e.qZA())}const ee=function(i){return{"d-none":i}},_n=[{path:"",children:[{path:"page/:page",component:tt,data:{title:"Gestion des vehicules"},canActivate:[Z.I]},{path:"edit",component:j,data:{title:"Gestion des vehicules"},canActivate:[Z.I]},{path:":id/edit",component:j,data:{title:"Gestion des vehicules"},canActivate:[Z.I]},{path:":id/dashboard",component:Ue,data:{title:"Dashboard de vehicule"},canActivate:[Z.I]},{path:"groupes",component:rt,data:{title:"Gestion des groupe vehicule"},canActivate:[Z.I]},{path:"marques/page/:page",component:mt,data:{title:"Gestion des marques vehicule"},canActivate:[V.m]},{path:"categories",component:be,data:{title:"Gestion des categories vehicule"},canActivate:[V.m]},{path:"marque/:id/modeles",component:xt,data:{title:"Gestion des modeles vehicule"},canActivate:[V.m]},{path:"carburants/page/:page",component:_e,data:{title:"Gestion des carburants"},canActivate:[Z.I]},{path:"compteurs/page/:page",component:X,data:{title:"Gestion des carburants (Saisi manuel)"},canActivate:[Z.I]},{path:"gps-compteurs/find/page/:page",component:X,data:{title:"Gestion des carburants (Relev\xe9 automatique)"},canActivate:[Z.I]},{path:"depenses/page/:page",component:(()=>{class i{constructor(t,n,s,o,r){this.securiteClass=t,this.globale=n,this.vehiculeService=s,this.vehiculeDepensesService=o,this.activatedRoute=r,this.message=null,this.page=1,this.date=new Date,this.type="details",this.vehicules=[],this.depenses=[],this.singleDepense={id:null,vehicule_id:null,type_depense:null,designation:null,montant:null,recurrence:"",fournisseur:null,note:null,commentaire:null},this.search={vehicule_id:"",date_debut:this.date.getFullYear()+"-"+("0"+(this.date.getMonth()+1)).slice(-2)+"-01",date_fin:this.date.getFullYear()+"-"+("0"+(this.date.getMonth()+1)).slice(-2)+"-"+("0"+(this.date.getDate()+1)).slice(-2)},this.myChart=null}ngOnInit(){h.kL.register(...h.zX),this.getAllVehicule(),this.activatedRoute.params.subscribe(t=>{this.page=t.page,this.page&&(this.getAllVehicule(),this.searchDepenses(this.search))})}getAllVehicule(){var t=this;this.vehiculeService.getAll().subscribe(n=>this.vehicules=n,function(){var n=(0,c.Z)(function*(s){401==s.status&&(yield t.securiteClass.refreshToken())&&t.getAllVehicule()});return function(s){return n.apply(this,arguments)}}())}clear(){this.singleDepense={id:null,vehicule_id:null,type_depense:null,designation:null,montant:null,recurrence:"",fournisseur:null,note:null,commentaire:null}}update(t){var n=this;t.id?this.vehiculeDepensesService.update(t).subscribe(s=>{this.searchDepenses(this.search),this.message="La d\xe9pense est modifi\xe9e avec succ\xe8s !",this.globale.closeModal()},function(){var s=(0,c.Z)(function*(o){401==o.status&&(yield n.securiteClass.refreshToken())&&n.update(t)});return function(o){return s.apply(this,arguments)}}()):this.vehiculeDepensesService.create(t).subscribe(s=>{this.searchDepenses(this.search),this.message="La d\xe9pense est ajout\xe9e avec succ\xe8s !",this.globale.closeModal()},function(){var s=(0,c.Z)(function*(o){401==o.status&&(yield n.securiteClass.refreshToken())&&n.update(t)});return function(o){return s.apply(this,arguments)}}())}delete(t){var n=this;this.vehiculeDepensesService.delete(t).subscribe(s=>{this.searchDepenses(this.search),this.message="La d\xe9pense est supprim\xe9e avec succ\xe8s !",this.globale.closeModal()},function(){var s=(0,c.Z)(function*(o){401==o.status&&(yield n.securiteClass.refreshToken())&&n.delete(t)});return function(o){return s.apply(this,arguments)}}())}getDepense(t){var n=this;this.vehiculeDepensesService.getDepenses(t).subscribe(s=>this.singleDepense=s,function(){var s=(0,c.Z)(function*(o){401==o.status&&(yield n.securiteClass.refreshToken())&&n.getDepense(t)});return function(o){return s.apply(this,arguments)}}())}searchDepenses(t){var n=this;this.vehiculeDepensesService.search(t,this.page).subscribe(s=>this.depenses=s,function(){var s=(0,c.Z)(function*(o){401==o.status&&(yield n.securiteClass.refreshToken())&&n.searchDepenses(t)});return function(o){return s.apply(this,arguments)}}())}generateChart(t){this.depensesParType()}depensesParType(){this.vehiculeDepensesService.getDepensesParType(this.search).subscribe(t=>{this.chartDepenses(t)})}chartDepenses(t){let n=C("#chart-depenses");this.myChart&&this.myChart.destroy(),this.myChart=new h.kL(n,{type:"doughnut",data:{labels:[...t].map(s=>s.type_depense),datasets:[{label:"# Total consommation",data:[...t].map(s=>s.cout),backgroundColor:["rgb(3, 32, 76)","rgb(3, 92, 150)","rgb(100, 151, 178)","rgb(179, 206, 225)"],hoverOffset:20}]},options:{maintainAspectRatio:!1,plugins:{legend:{position:"left"}}}})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(b.z),e.Y36(f.N),e.Y36(M.t),e.Y36(Xt.w),e.Y36(_.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-depenses"]],decls:139,vars:35,consts:[[1,"header-body","shadow-sm","p-3","mb-5","bg-white","rounded"],[1,"align-items-end"],[1,"header-pretitle"],[1,"header-title"],[1,"container-fluid","mb-5"],[1,"row"],[1,"col-md-12"],[1,"row","align-items-center"],[1,"col"],[1,"nav","nav-tabs","nav-overflow","header-tabs"],[1,"nav-item"],[1,"nav-link",3,"ngClass","click"],["class","details mb-5",4,"ngIf"],[1,"graphe","mb-5",3,"ngClass"],[1,"col-md-4"],[1,"row","form-search",3,"ngSubmit"],["searchForm","ngForm"],[1,"form-group"],["for","titre"],["name","vehicule_id",1,"form-select",3,"ngModel","ngModelChange"],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["for","date_debut"],["type","date","name","date_debut",1,"form-control",3,"ngModel","ngModelChange"],["for","date_fin"],[1,"input-group"],["type","date","name","date_fin",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-group-append"],["type","submit",1,"btn","btn-outline-primary",2,"margin-left","12px"],[1,"fas","fa-search"],[1,"col-md-8","graphe-depenses"],[1,"card",3,"ngClass"],[1,"card-body"],["id","chart-depenses"],["id","modal-edit","tabindex","-1","role","dialog","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],["data-list","",1,"modal-card","card"],[1,"card-header"],["id","exampleModalCenterTitle",1,"card-header-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close","pb-0","mp-0"],[3,"ngSubmit"],["depenseForm","ngForm"],[1,"col-md-6"],["type","hidden","name","id","value","singleDepense.id",3,"ngModel","ngModelChange"],["for","titre",1,"form-label"],["class","text-danger",4,"ngIf"],["name","vehicule_id","required","",1,"form-select","form-select-sm",3,"ngModel","ngModelChange"],["value","null","disabled",""],["for","qtn",1,"form-label"],["type","text","placeholder","Designation","name","designation","required","",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["for","recurrence",1,"form-label"],["type","date","placeholder","Recurrence","name","recurrence",1,"form-control","form-control-sm",3,"ngModel"],["for","note",1,"form-label"],["type","text","placeholder","Note","name","note",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["for","type_depense",1,"form-label"],["name","type_depense","required","",1,"form-select","form-select-sm",3,"ngModel","ngModelChange"],["value","Maintenance"],["value","Administration"],["value","Contre-\xe0-vention"],["value","Autre"],["for","montant",1,"form-label"],["type","number","placeholder","Montant","name","montant","required","",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["type","text","placeholder","Fournisseur","name","fournisseur",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["for","commentaire"],["rows","3","name","commentaire",1,"form-control",3,"ngModel","ngModelChange"],[1,"text-danger"],["type","submit",1,"btn","btn-success","mb-2","float-right",3,"disabled"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary","float-right",2,"margin-right","5px"],["id","modal-delete","tabindex","-1","role","dialog","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-confirm"],[1,"modal-header","flex-column"],[1,"icon-box"],[1,"material-icons"],[1,"fa-solid","fa-x"],[1,"modal-title","w-100"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"close","btn-close"],[1,"modal-body"],[1,"modal-footer","justify-content-center"],["type","button","data-dismiss","modal","data-bs-dismiss","modal","aria-label","Close",1,"btn","btn-secondary"],["type","button",1,"btn","btn-danger",3,"click"],[1,"details","mb-5"],["class","alert alert-success","role","alert",4,"ngIf"],["type","button","data-bs-toggle","modal","data-bs-target","#modal-edit",1,"btn","btn-outline-primary","mb-2",2,"float","right",3,"click"],[1,"fa-solid","fa-plus"],["value",""],[1,"table-responsive","row"],[1,"table","table-sm","table-nowrap","card-table"],["width","100"],[1,"list"],[4,"ngFor","ngForOf"],["colspan","8"],[1,"float-right","text-danger","font-weight-normal","mt-3"],["aria-label","Page navigation","class","pag-tab col-md-12 navigation",4,"ngIf"],["role","alert",1,"alert","alert-success"],["type","button","data-bs-dismiss","alert","aria-label","Close",1,"btn-close","pb-0","mp-0"],[3,"value"],[1,"matricule"],[1,"type_depense"],[1,"designation"],[1,"montant"],[1,"recurrence","text-primary"],[1,"fournisseur"],[1,"note"],["type","button","ng-show","","data-bs-toggle","modal","data-bs-target","#modal-edit",1,"btn","btn-operation",3,"click"],[1,"fa-solid","fa-pen"],["type","button","data-bs-toggle","modal","data-bs-target","#modal-delete",1,"btn","btn-operation",3,"click"],["_ngcontent-hhv-c59","",1,"fa-solid","fa-trash"],["aria-label","Page navigation",1,"pag-tab","col-md-12","navigation"],[1,"pagination"],[1,"page-item"],["href","#!",1,"page-link",3,"routerLink","ngClass"],["class","page-item",3,"ngClass",4,"ngFor","ngForOf"],[1,"page-link",3,"routerLink","ngClass"],[1,"page-item",3,"ngClass"],[1,"page-link",3,"routerLink"]],template:function(t,n){if(1&t){const s=e.EpF();e.TgZ(0,"section")(1,"div",0)(2,"div",1)(3,"h6",2),e._uU(4," Gestion des v\xe9hicules "),e.qZA(),e.TgZ(5,"h2",3),e._uU(6,"Gestion des d\xe9penses"),e.qZA()()(),e.TgZ(7,"div",4)(8,"div",5)(9,"div",6)(10,"div",7)(11,"div",8)(12,"ul",9)(13,"li",10)(14,"button",11),e.NdJ("click",function(){return n.type="details"}),e._uU(15," D\xe9tails "),e.qZA()(),e.TgZ(16,"li",10)(17,"button",11),e.NdJ("click",function(){return n.type="graphe"}),e._uU(18," L\u2019\xe9volution "),e.qZA()()()()(),e.YNc(19,rn,63,8,"div",12),e.TgZ(20,"div",13)(21,"div",5)(22,"div",14)(23,"form",15,16),e.NdJ("ngSubmit",function(){e.CHM(s);const r=e.MAs(24);return n.generateChart(r.value)}),e.TgZ(25,"div",17)(26,"label",18),e._uU(27,"V\xe9hicules"),e.qZA(),e.TgZ(28,"select",19),e.NdJ("ngModelChange",function(r){return n.search.vehicule_id=r}),e.TgZ(29,"option",20),e._uU(30,"Veuillez choisir ..."),e.qZA(),e.YNc(31,an,2,2,"option",21),e.qZA()(),e.TgZ(32,"div",17)(33,"label",22),e._uU(34,"Date d\xe9but"),e.qZA(),e.TgZ(35,"input",23),e.NdJ("ngModelChange",function(r){return n.search.date_debut=r}),e.qZA()(),e.TgZ(36,"div",17)(37,"label",24),e._uU(38,"Date fin"),e.qZA(),e.TgZ(39,"div",25)(40,"input",26),e.NdJ("ngModelChange",function(r){return n.search.date_fin=r}),e.qZA(),e.TgZ(41,"div",27)(42,"button",28),e._UZ(43,"i",29),e.qZA()()()()()(),e.TgZ(44,"div",30)(45,"div",31)(46,"div",32),e._UZ(47,"canvas",33),e.qZA()()()()(),e.TgZ(48,"div",34)(49,"div",35)(50,"div",36)(51,"div",37)(52,"div",38)(53,"h4",39),e._uU(54," D\xe9pense "),e.qZA(),e._UZ(55,"button",40),e.qZA(),e.TgZ(56,"div",32)(57,"form",41,42),e.NdJ("ngSubmit",function(){e.CHM(s);const r=e.MAs(58);return n.update(r.value)}),e.TgZ(59,"div",5)(60,"div",43)(61,"input",44),e.NdJ("ngModelChange",function(r){return n.singleDepense.id=r}),e.qZA(),e.TgZ(62,"div",17)(63,"label",45),e._uU(64," V\xe9hicule "),e.YNc(65,ln,2,0,"strong",46),e.qZA(),e.TgZ(66,"select",47),e.NdJ("ngModelChange",function(r){return n.singleDepense.vehicule_id=r}),e.TgZ(67,"option",48),e._uU(68,"Veuillez choisir..."),e.qZA(),e.YNc(69,un,2,2,"option",21),e.qZA()(),e.TgZ(70,"div",17)(71,"label",49),e._uU(72," Designation "),e.YNc(73,dn,2,0,"strong",46),e.qZA(),e.TgZ(74,"input",50),e.NdJ("ngModelChange",function(r){return n.singleDepense.designation=r}),e.qZA()(),e.TgZ(75,"div",17)(76,"label",51),e._uU(77,"Recurrence"),e.qZA(),e._UZ(78,"input",52),e.ALo(79,"date"),e.qZA(),e.TgZ(80,"div",17)(81,"label",53),e._uU(82,"Note"),e.qZA(),e.TgZ(83,"input",54),e.NdJ("ngModelChange",function(r){return n.singleDepense.note=r}),e.qZA()()(),e.TgZ(84,"div",43)(85,"div",17)(86,"label",55),e._uU(87," Type de depense "),e.YNc(88,cn,2,0,"strong",46),e.qZA(),e.TgZ(89,"select",56),e.NdJ("ngModelChange",function(r){return n.singleDepense.type_depense=r}),e.TgZ(90,"option",48),e._uU(91,"Veuillez choisir ..."),e.qZA(),e.TgZ(92,"option",57),e._uU(93,"Maintenance"),e.qZA(),e.TgZ(94,"option",58),e._uU(95,"Administration"),e.qZA(),e.TgZ(96,"option",59),e._uU(97,"Contre-\xe0-vention"),e.qZA(),e.TgZ(98,"option",60),e._uU(99,"Autres"),e.qZA()()(),e.TgZ(100,"div",17)(101,"label",61),e._uU(102," Montant "),e.YNc(103,gn,2,0,"strong",46),e.qZA(),e.TgZ(104,"input",62),e.NdJ("ngModelChange",function(r){return n.singleDepense.montant=r}),e.qZA()(),e.TgZ(105,"div",17)(106,"label",55),e._uU(107,"Fournisseur"),e.qZA(),e.TgZ(108,"input",63),e.NdJ("ngModelChange",function(r){return n.singleDepense.fournisseur=r}),e.qZA()()(),e.TgZ(109,"div",17)(110,"label",64),e._uU(111,"Commentaire"),e.qZA(),e.TgZ(112,"textarea",65),e.NdJ("ngModelChange",function(r){return n.singleDepense.commentaire=r}),e.qZA()()(),e.TgZ(113,"div",6)(114,"small",66),e._uU(115,"*: Ces champs sont obligatoires."),e.qZA(),e.TgZ(116,"button",67),e._uU(117,"Enregister"),e.qZA(),e.TgZ(118,"button",68),e._uU(119,"Annuler"),e.qZA()()()()()()()(),e.TgZ(120,"div",69)(121,"div",70)(122,"div",36)(123,"div",71)(124,"div",72)(125,"i",73),e._UZ(126,"i",74),e.qZA()(),e.TgZ(127,"h4",75),e._uU(128,"\xcates-vous s\xfbr?"),e.qZA(),e._UZ(129,"button",76),e.qZA(),e.TgZ(130,"div",77)(131,"p"),e._uU(132,"Voulez-vous vraiment supprimer ces enregistrements\xa0? Ce processus ne peut pas \xeatre annul\xe9. "),e.qZA(),e._UZ(133,"br"),e.qZA(),e.TgZ(134,"div",78)(135,"button",79),e._uU(136,"Annuler"),e.qZA(),e.TgZ(137,"button",80),e.NdJ("click",function(){return n.delete(n.singleDepense.id)}),e._uU(138,"Supprimer"),e.qZA()()()()()()()()()}if(2&t){const s=e.MAs(58);e.xp6(14),e.Q6J("ngClass",e.VKq(27,P,"details"==n.type)),e.xp6(3),e.Q6J("ngClass",e.VKq(29,P,"graphe"==n.type)),e.xp6(2),e.Q6J("ngIf","details"==n.type),e.xp6(1),e.Q6J("ngClass",e.VKq(31,ee,"graphe"!=n.type)),e.xp6(8),e.Q6J("ngModel",n.search.vehicule_id),e.xp6(3),e.Q6J("ngForOf",n.vehicules),e.xp6(4),e.Q6J("ngModel",n.search.date_debut),e.xp6(5),e.Q6J("ngModel",n.search.date_fin),e.xp6(5),e.Q6J("ngClass",e.VKq(33,ee,!n.myChart)),e.xp6(16),e.Q6J("ngModel",n.singleDepense.id),e.xp6(4),e.Q6J("ngIf",!n.singleDepense.vehicule_id),e.xp6(1),e.Q6J("ngModel",n.singleDepense.vehicule_id),e.xp6(3),e.Q6J("ngForOf",n.vehicules),e.xp6(4),e.Q6J("ngIf",!n.singleDepense.designation),e.xp6(1),e.Q6J("ngModel",n.singleDepense.designation),e.xp6(4),e.Q6J("ngModel",e.xi3(79,24,n.singleDepense.recurrence,"yyyy-MM-dd")),e.xp6(5),e.Q6J("ngModel",n.singleDepense.note),e.xp6(5),e.Q6J("ngIf",!n.singleDepense.type_depense),e.xp6(1),e.Q6J("ngModel",n.singleDepense.type_depense),e.xp6(14),e.Q6J("ngIf",!n.singleDepense.montant),e.xp6(1),e.Q6J("ngModel",n.singleDepense.montant),e.xp6(4),e.Q6J("ngModel",n.singleDepense.fournisseur),e.xp6(4),e.Q6J("ngModel",n.singleDepense.commentaire),e.xp6(4),e.Q6J("disabled",!s.valid)}},directives:[u.mk,u.O5,l._Y,l.JL,l.F,l.EJ,l.JJ,l.On,l.YN,l.Kr,u.sg,l.Fj,_.yS,l.Q7,l.wV],pipes:[u.uU],styles:[".modal-dialog[_ngcontent-%COMP%]{max-width:700px}canvas[_ngcontent-%COMP%]{height:234px!important}.card-body[_ngcontent-%COMP%]{padding:1rem;box-shadow:#959da533 0 8px 24px}.form-search[_ngcontent-%COMP%]{border:1px solid #e3ebf6}@media (max-width: 767px){.graphe-depenses[_ngcontent-%COMP%]{margin-top:10px;padding:0}}"]}),i})(),data:{title:"Gestion des depenses"},canActivate:[Z.I]}]}];let mn=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[_.Bz.forChild(_n)],_.Bz]}),i})(),hn=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[u.uU],imports:[[u.ez,mn,l.u5]]}),i})()}}]);