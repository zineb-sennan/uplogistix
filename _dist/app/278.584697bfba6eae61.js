"use strict";(self.webpackChunkuplogistix=self.webpackChunkuplogistix||[]).push([[278],{4278:(S,m,r)=>{r.r(m),r.d(m,{BalisesModule:()=>N});var c=r(9808),h=r(3072),Z=r(8299),f=r(7921),u=r(5861),e=r(1223),g=r(2340),v=r(520);let p=(()=>{class l{constructor(t){this.http=t}getAll(){return this.http.get(g.N.apiURL+"/balises")}create(t){return this.http.post(g.N.apiURL+"/balises",t)}update(t){return this.http.put(g.N.apiURL+"/balises/"+t.id,t)}delete(t){return this.http.delete(g.N.apiURL+"/balises/"+t)}getBalise(t){return this.http.get(g.N.apiURL+"/balises/"+t)}}return l.\u0275fac=function(t){return new(t||l)(e.LFG(v.eN))},l.\u0275prov=e.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})();var A=r(3735),_=r(4741),b=r(6448),d=r(3075);function T(l,o){if(1&l&&(e.TgZ(0,"div",70),e._uU(1),e._UZ(2,"button",71),e.qZA()),2&l){const t=e.oxw();e.xp6(1),e.hij(" ",t.message," ")}}function C(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"tr")(1,"td",72),e._uU(2),e.qZA(),e.TgZ(3,"td",73),e._uU(4),e.qZA(),e.TgZ(5,"td",74),e._uU(6),e.qZA(),e.TgZ(7,"td",75),e._uU(8),e.qZA(),e.TgZ(9,"td",76),e._uU(10),e.qZA(),e.TgZ(11,"td",77),e._uU(12),e.qZA(),e.TgZ(13,"td",78),e._uU(14),e.qZA(),e.TgZ(15,"td",79),e._uU(16),e.ALo(17,"date"),e.qZA(),e.TgZ(18,"td",80),e._uU(19),e.ALo(20,"date"),e.qZA(),e.TgZ(21,"td",81),e._UZ(22,"img",82),e.qZA(),e.TgZ(23,"td",83)(24,"button",84),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().getBalise(a.id)}),e._UZ(25,"i",85),e.qZA(),e.TgZ(26,"button",86),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().singleBalise.id=a.id}),e._UZ(27,"i",87),e.qZA()()()}if(2&l){const t=o.$implicit;e.xp6(2),e.hij(" ",t.imei," "),e.xp6(2),e.hij(" ",t.matricule,""),e.xp6(2),e.hij(" ",t.client," "),e.xp6(2),e.hij(" ",t.marque," "),e.xp6(2),e.hij(" ",t.modele," "),e.xp6(2),e.hij(" ",t.sn,""),e.xp6(2),e.hij(" ",t.firmware," "),e.xp6(2),e.hij(" ",e.xi3(17,10,t.date_achat,"dd/MM/yyyy")," "),e.xp6(3),e.hij(" ",e.xi3(20,13,t.date_mise_service,"dd/MM/yyyy"),""),e.xp6(3),e.s9C("src",t.eco_conduite?"assets/img/icones/eco.png":"assets/img/icones/not-eco.png",e.LSH)}}function M(l,o){1&l&&(e.TgZ(0,"strong",55),e._uU(1,"*"),e.qZA())}function q(l,o){if(1&l&&(e.TgZ(0,"option",88),e._uU(1),e.qZA()),2&l){const t=o.$implicit;e.Q6J("value",t.id),e.xp6(1),e.AsE("",t.prenom," ",t.nom,"")}}function U(l,o){if(1&l&&(e.TgZ(0,"option",88),e._uU(1),e.qZA()),2&l){const t=o.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.matricule," ")}}function B(l,o){if(1&l&&(e.TgZ(0,"tr")(1,"td",12),e._uU(2),e.qZA(),e.TgZ(3,"td",13),e._uU(4),e.qZA(),e.TgZ(5,"td",14),e._uU(6),e.qZA(),e.TgZ(7,"td",15),e._uU(8),e.qZA(),e.TgZ(9,"td",16),e._uU(10),e.ALo(11,"date"),e.qZA()()),2&l){const t=o.$implicit;e.xp6(2),e.hij(" ",t.imei," "),e.xp6(2),e.hij(" ",t.marque," "),e.xp6(2),e.hij(" ",t.modele," "),e.xp6(2),e.hij(" ",t.matricule,""),e.xp6(2),e.hij(" ",e.xi3(11,5,t.date_mise_service,"dd/MM/yyyy"),"")}}const J=[{path:"",children:[{path:"",component:(()=>{class l{constructor(t,i,n,a){this.baliseService=t,this.clientService=i,this.securiteClass=n,this.globale=a,this.message=null,this.balises=[],this.vehicules=[],this.clients=[],this.singleBalise={id:null,imei:null,marque:null,modele:null,sn:null,firmware:null,date_achat:null,date_mise_service:null,eco_conduite:!1,vehicule_id:null,client_id:null}}ngOnInit(){this.getAllBalise(),this.getAllClients()}getAllClients(){var t=this;this.clientService.getAllClients().subscribe(i=>this.clients=i,function(){var i=(0,u.Z)(function*(n){401==n.status&&(yield t.securiteClass.refreshToken())&&t.getAllClients()});return function(n){return i.apply(this,arguments)}}())}changeClient(t){this.getVehiculesByClientWithoutGPS(t.target.value)}getAllBalise(){var t=this;this.baliseService.getAll().subscribe(i=>this.balises=i,function(){var i=(0,u.Z)(function*(n){401==n.status&&(yield t.securiteClass.refreshToken())&&t.getAllBalise()});return function(n){return i.apply(this,arguments)}}())}getBalise(t){var i=this;this.message=null,this.baliseService.getBalise(t).subscribe(n=>{this.singleBalise=n,this.singleBalise._client_id=n.client_id,n.client_id&&this.getVehiculesByClientWithoutGPS(n.client_id)},function(){var n=(0,u.Z)(function*(a){401==a.status&&(yield i.securiteClass.refreshToken())&&i.getBalise(t)});return function(a){return n.apply(this,arguments)}}())}update(t){var i=this;t.id?this.baliseService.update(t).subscribe(n=>{this.getAllBalise(),this.message="La balise est modifi\xe9e avec succ\xe8s !",this.globale.closeModal()},function(){var n=(0,u.Z)(function*(a){401==a.status&&(yield i.securiteClass.refreshToken())&&i.update(t)});return function(a){return n.apply(this,arguments)}}()):this.baliseService.create(t).subscribe(n=>{this.getAllBalise(),this.message="La balise est ajout\xe9e avec succ\xe8s !",this.globale.closeModal()},function(){var n=(0,u.Z)(function*(a){401==a.status&&(yield i.securiteClass.refreshToken())&&i.update(t)});return function(a){return n.apply(this,arguments)}}())}delete(t){var i=this;this.baliseService.delete(t).subscribe(n=>{this.getAllBalise(),this.message="La balise est supprim\xe9e avec succ\xe8s !",this.globale.closeModal()},function(){var n=(0,u.Z)(function*(a){401==a.status&&(yield i.securiteClass.refreshToken())&&i.delete(t)});return function(a){return n.apply(this,arguments)}}())}clear(){this.vehicules=[],this.message=null,this.singleBalise={id:null,imei:null,marque:null,modele:null,sn:null,firmware:null,date_achat:null,date_mise_service:null,eco_conduite:!1,vehicule_id:null,client_id:null}}getVehiculesByClientWithoutGPS(t){var i=this;this.clientService.getVehiculesByClientWithoutGPS(t).subscribe(n=>{this.vehicules=n,this.singleBalise._client_id==t&&this.vehicules.push({id:this.singleBalise.vehicule_id,matricule:this.singleBalise.matricule,marque:this.singleBalise.marque})},function(){var n=(0,u.Z)(function*(a){401==a.status&&(yield i.securiteClass.refreshToken())&&i.delete(t)});return function(a){return n.apply(this,arguments)}}())}}return l.\u0275fac=function(t){return new(t||l)(e.Y36(p),e.Y36(A.y),e.Y36(_.z),e.Y36(b.N))},l.\u0275cmp=e.Xpm({type:l,selectors:[["app-globale"]],decls:150,vars:23,consts:[[1,"page-balise"],[1,"header-body","shadow-sm","p-3","mb-5","bg-white","rounded"],[1,"align-items-end"],[1,"header-pretitle"],[1,"header-title"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],["type","button","data-bs-toggle","modal","data-bs-target","#modal-edit",1,"btn","btn-outline-primary","mb-2","btn-ajouter",3,"click"],[1,"fa-solid","fa-plus"],["class","alert alert-success","role","alert",4,"ngIf"],[1,"table-responsive","row"],[1,"table","table-sm","table-nowrap","card-table"],[1,"list"],[4,"ngFor","ngForOf"],["id","modal-edit","tabindex","-1","role","dialog","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],["data-list","",1,"modal-card","card"],[1,"card-header"],["id","exampleModalCenterTitle",1,"card-header-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close","pb-0","mp-0"],[1,"card-body"],[3,"ngSubmit"],["baliseForm","ngForm"],["type","hidden","name","id","value","singleBalise.id",3,"ngModel","ngModelChange"],[1,"titre","col-md-12","mb-3"],[1,"col-md-6"],[1,"form-group"],["for","imei",1,"form-label"],["class","text-danger",4,"ngIf"],["type","text","placeholder","imei","name","imei",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["for","marque",1,"form-label"],["type","text","placeholder","Marque","name","marque",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["for","modele",1,"form-label"],["type","text","placeholder","Mod\xe8le","name","modele",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["for","sn",1,"form-label"],["type","text","placeholder","S.N","name","sn",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["for","firmware",1,"form-label"],["type","text","placeholder","Firmware","name","firmware",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["for","date_achat",1,"form-label"],["type","date","placeholder","date_achat","name","date_achat",1,"form-control","form-control-sm",3,"ngModel"],["for","date_mise_service",1,"form-label"],["type","date","name","date_mise_service",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"form-check"],["type","checkbox","name","eco_conduite",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],[1,"fa-solid","fa-question"],[1,"titre","col-md-12","mb-3","mt-3"],[1,"form-group","col-md-6"],["for","pays_id",1,"form-label"],["name","client_id",1,"form-select","form-select-sm",3,"ngModel","ngModelChange","change"],["value","null","disabled",""],[3,"value",4,"ngFor","ngForOf"],["name","vehicule_id",1,"form-select","form-select-sm",3,"ngModel","ngModelChange"],[1,"text-danger"],["type","submit",1,"btn","btn-success","float-right",3,"disabled"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary","float-right",2,"margin-right","5px"],["id","modal-delete","tabindex","-1","role","dialog","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-confirm"],[1,"modal-header","flex-column"],[1,"icon-box"],[1,"material-icons"],[1,"fa-solid","fa-x"],[1,"modal-title","w-100"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"close","btn-close"],[1,"modal-body"],[1,"modal-footer","justify-content-center"],["type","button","data-dismiss","modal","data-bs-dismiss","modal","aria-label","Close",1,"btn","btn-secondary"],["type","button",1,"btn","btn-danger",3,"click"],["role","alert",1,"alert","alert-success"],["type","button","data-bs-dismiss","alert","aria-label","Close",1,"btn-close","pb-0","mp-0"],[1,"imei"],[1,"matricule"],[1,"client"],[1,"marque"],[1,"modele"],[1,"sn"],[1,"firmware"],[1,"date_achat"],[1,"date_mise_service"],[1,"eco_conduite"],["width","30",3,"src"],["width","75"],["type","button","data-bs-toggle","modal","data-bs-target","#modal-edit",1,"btn","btn-operation",3,"click"],[1,"fa-solid","fa-pen"],["type","button","data-bs-toggle","modal","data-bs-target","#modal-delete",1,"btn","btn-operation",3,"click"],[1,"fa-solid","fa-trash"],[3,"value"]],template:function(t,i){if(1&t){const n=e.EpF();e.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"h6",3),e._uU(4," Balises "),e.qZA(),e.TgZ(5,"h2",4),e._uU(6," Liste des balises "),e.qZA()()(),e.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"button",8),e.NdJ("click",function(){return i.clear()}),e._UZ(11,"i",9),e.qZA(),e._UZ(12,"br")(13,"br")(14,"br"),e.YNc(15,T,3,1,"div",10),e.TgZ(16,"div",11)(17,"table",12)(18,"thead")(19,"tr")(20,"th"),e._uU(21,"IMEI"),e.qZA(),e.TgZ(22,"th"),e._uU(23,"Matricule"),e.qZA(),e.TgZ(24,"th"),e._uU(25,"Client"),e.qZA(),e.TgZ(26,"th"),e._uU(27,"Marque"),e.qZA(),e.TgZ(28,"th"),e._uU(29,"Mod\xe8le"),e.qZA(),e.TgZ(30,"th"),e._uU(31,"S.N"),e.qZA(),e.TgZ(32,"th"),e._uU(33,"Firmware"),e.qZA(),e.TgZ(34,"th"),e._uU(35,"Date d'achat"),e.qZA(),e.TgZ(36,"th"),e._uU(37,"Date de mise en service"),e.qZA(),e.TgZ(38,"th"),e._uU(39,"Eco-conduite"),e.qZA(),e.TgZ(40,"th"),e._uU(41,"Options"),e.qZA()()(),e.TgZ(42,"tbody",13),e.YNc(43,C,28,16,"tr",14),e.qZA()()()()()(),e.TgZ(44,"div",15)(45,"div",16)(46,"div",17)(47,"div",18)(48,"div",19)(49,"h4",20),e._uU(50," Balise "),e.qZA(),e._UZ(51,"button",21),e.qZA(),e.TgZ(52,"div",22)(53,"form",23,24),e.NdJ("ngSubmit",function(){e.CHM(n);const s=e.MAs(54);return i.update(s.value)}),e.TgZ(55,"div",6)(56,"input",25),e.NdJ("ngModelChange",function(s){return i.singleBalise.id=s}),e.qZA(),e.TgZ(57,"div",26)(58,"h6",3),e._uU(59,"Balise"),e.qZA(),e.TgZ(60,"h3",4),e._uU(61,"Informations"),e.qZA(),e._UZ(62,"hr"),e.qZA(),e.TgZ(63,"div",27)(64,"div",28)(65,"label",29),e._uU(66," imei "),e.YNc(67,M,2,0,"strong",30),e.qZA(),e.TgZ(68,"input",31),e.NdJ("ngModelChange",function(s){return i.singleBalise.imei=s}),e.qZA()(),e.TgZ(69,"div",28)(70,"label",32),e._uU(71,"Marque"),e.qZA(),e.TgZ(72,"input",33),e.NdJ("ngModelChange",function(s){return i.singleBalise.marque=s}),e.qZA()(),e.TgZ(73,"div",28)(74,"label",34),e._uU(75,"Mod\xe8le"),e.qZA(),e.TgZ(76,"input",35),e.NdJ("ngModelChange",function(s){return i.singleBalise.modele=s}),e.qZA()(),e.TgZ(77,"div",28)(78,"label",36),e._uU(79,"S.N"),e.qZA(),e.TgZ(80,"input",37),e.NdJ("ngModelChange",function(s){return i.singleBalise.sn=s}),e.qZA()()(),e.TgZ(81,"div",27)(82,"div",28)(83,"label",38),e._uU(84,"Firmware"),e.qZA(),e.TgZ(85,"input",39),e.NdJ("ngModelChange",function(s){return i.singleBalise.firmware=s}),e.qZA()(),e.TgZ(86,"div",28)(87,"label",40),e._uU(88,"Date d\u2019achat"),e.qZA(),e._UZ(89,"input",41),e.ALo(90,"date"),e.qZA(),e.TgZ(91,"div",28)(92,"label",42),e._uU(93,"Date de la mise en service"),e.qZA(),e.TgZ(94,"input",43),e.NdJ("ngModelChange",function(s){return i.singleBalise.date_mise_service=s}),e.ALo(95,"date"),e.qZA()(),e.TgZ(96,"div",44)(97,"input",45),e.NdJ("ngModelChange",function(s){return i.singleBalise.eco_conduite=s}),e.qZA(),e.TgZ(98,"label",46),e._uU(99," Eco Conduite "),e._UZ(100,"i",47),e.qZA()()(),e.TgZ(101,"div",48)(102,"h6",3),e._uU(103,"Balise"),e.qZA(),e.TgZ(104,"h3",4),e._uU(105,"Affectation"),e.qZA(),e._UZ(106,"hr"),e.qZA(),e.TgZ(107,"div",6)(108,"div",49)(109,"label",50),e._uU(110,"Clients"),e.qZA(),e.TgZ(111,"select",51),e.NdJ("ngModelChange",function(s){return i.singleBalise.client_id=s})("change",function(s){return i.changeClient(s)}),e.TgZ(112,"option",52),e._uU(113,"Veuillez choisir..."),e.qZA(),e.YNc(114,q,2,3,"option",53),e.qZA()(),e.TgZ(115,"div",49)(116,"label",50),e._uU(117,"V\xe9hicles"),e.qZA(),e.TgZ(118,"select",54),e.NdJ("ngModelChange",function(s){return i.singleBalise.vehicule_id=s}),e.TgZ(119,"option",52),e._uU(120,"Veuillez choisir..."),e.qZA(),e.YNc(121,U,2,2,"option",53),e.qZA()()(),e.TgZ(122,"div",7)(123,"small",55),e._uU(124,"*: Ce champ est obligatoire."),e.qZA(),e.TgZ(125,"button",56),e._uU(126,"Enregister"),e.qZA(),e.TgZ(127,"button",57),e._uU(128,"Annuler"),e.qZA()()()()()()()()(),e.TgZ(129,"div",58)(130,"div",59)(131,"div",17)(132,"div",60)(133,"div",61)(134,"i",62),e._UZ(135,"i",63),e.qZA()(),e.TgZ(136,"h4",64),e._uU(137,"\xcates-vous s\xfbr?"),e.qZA(),e._UZ(138,"button",65),e.qZA(),e.TgZ(139,"div",66)(140,"p"),e._uU(141,"Voulez-vous vraiment supprimer ce conducteur "),e._UZ(142,"i",47),e.qZA()(),e.TgZ(143,"div",67)(144,"button",68),e._uU(145,"Annuler"),e.qZA(),e.TgZ(146,"button",69),e.NdJ("click",function(){return i.delete(i.singleBalise.id)}),e._uU(147,"supprimer"),e.qZA()()()()(),e._UZ(148,"br")(149,"br"),e.qZA()}if(2&t){const n=e.MAs(54);e.xp6(15),e.Q6J("ngIf",i.message),e.xp6(28),e.Q6J("ngForOf",i.balises),e.xp6(13),e.Q6J("ngModel",i.singleBalise.id),e.xp6(11),e.Q6J("ngIf",!i.singleBalise.imei),e.xp6(1),e.Q6J("ngModel",i.singleBalise.imei),e.xp6(4),e.Q6J("ngModel",i.singleBalise.marque),e.xp6(4),e.Q6J("ngModel",i.singleBalise.modele),e.xp6(4),e.Q6J("ngModel",i.singleBalise.sn),e.xp6(5),e.Q6J("ngModel",i.singleBalise.firmware),e.xp6(4),e.Q6J("ngModel",e.xi3(90,17,i.singleBalise.date_achat,"yyyy-MM-dd")),e.xp6(5),e.Q6J("ngModel",e.xi3(95,20,i.singleBalise.date_mise_service,"yyyy-MM-dd")),e.xp6(3),e.Q6J("ngModel",i.singleBalise.eco_conduite),e.xp6(14),e.Q6J("ngModel",i.singleBalise.client_id),e.xp6(3),e.Q6J("ngForOf",i.clients),e.xp6(4),e.Q6J("ngModel",i.singleBalise.vehicule_id),e.xp6(3),e.Q6J("ngForOf",i.vehicules),e.xp6(4),e.Q6J("disabled",!n.valid)}},directives:[c.O5,c.sg,d._Y,d.JL,d.F,d.Fj,d.JJ,d.On,d.Wl,d.EJ,d.YN,d.Kr],pipes:[c.uU],styles:[".modal-dialog[_ngcontent-%COMP%]{max-width:700px!important}.eco_conduite[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:auto;display:block;margin:auto}"]}),l})(),data:{title:"Gestion des balises"},canActivate:[f.m]},{path:"informations",component:(()=>{class l{constructor(t,i,n){this.securiteClass=t,this.globale=i,this.baliseService=n,this.balises=[]}ngOnInit(){this.getAllBalise()}getAllBalise(){this.baliseService.getAll().subscribe(t=>this.balises=t,t=>{401==t.status&&this.securiteClass.refreshToken()&&this.getAllBalise()})}}return l.\u0275fac=function(t){return new(t||l)(e.Y36(_.z),e.Y36(b.N),e.Y36(p))},l.\u0275cmp=e.Xpm({type:l,selectors:[["app-informations"]],decls:26,vars:1,consts:[[1,"page-balise"],[1,"header-body","shadow-sm","p-3","mb-5","bg-white","rounded"],[1,"align-items-end"],[1,"header-pretitle"],[1,"header-title"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"table-responsive","row"],[1,"table","table-sm","table-nowrap","card-table"],[1,"list"],[4,"ngFor","ngForOf"],[1,"imei"],[1,"marque"],[1,"modele"],[1,"matricule"],[1,"date_mise_service"]],template:function(t,i){1&t&&(e.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"h6",3),e._uU(4," Administration "),e.qZA(),e.TgZ(5,"h2",4),e._uU(6," Balises GPS "),e.qZA()()(),e.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"table",9)(12,"thead")(13,"tr")(14,"th"),e._uU(15,"IMEI"),e.qZA(),e.TgZ(16,"th"),e._uU(17,"Marque"),e.qZA(),e.TgZ(18,"th"),e._uU(19,"Mod\xe8le"),e.qZA(),e.TgZ(20,"th"),e._uU(21,"V\xe9hicule attribu\xe9"),e.qZA(),e.TgZ(22,"th"),e._uU(23,"Date de mise en service"),e.qZA()()(),e.TgZ(24,"tbody",10),e.YNc(25,B,12,8,"tr",11),e.qZA()()()()()()()),2&t&&(e.xp6(25),e.Q6J("ngForOf",i.balises))},directives:[c.sg],pipes:[c.uU],styles:[""]}),l})(),data:{title:"informations des balises"},canActivate:[Z.I]}]}];let G=(()=>{class l{}return l.\u0275fac=function(t){return new(t||l)},l.\u0275mod=e.oAB({type:l}),l.\u0275inj=e.cJS({imports:[[h.Bz.forChild(J)],h.Bz]}),l})(),N=(()=>{class l{}return l.\u0275fac=function(t){return new(t||l)},l.\u0275mod=e.oAB({type:l}),l.\u0275inj=e.cJS({imports:[[c.ez,G,d.u5]]}),l})()}}]);